webpackJsonp([2],{"+708":function(t,e,i){"use strict";var n={name:"vue-particles",data:function(){return{id:"particles-instance-"+Math.floor(5e3*Math.random())}},props:{color:{type:String,default:"#dedede"},particleOpacity:{type:Number,default:.7},particlesNumber:{type:Number,default:80},shapeType:{type:String,default:"circle"},image:{},particleSize:{type:Number,default:4},linesColor:{type:String,default:"#dedede"},linesWidth:{type:Number,default:1},lineLinked:{type:Boolean,default:!0},lineOpacity:{type:Number,default:.4},linesDistance:{type:Number,default:150},moveSpeed:{type:Number,default:3},hoverEffect:{type:Boolean,default:!0},hoverMode:{type:String,default:"grab"},clickEffect:{type:Boolean,default:!0},clickMode:{type:String,default:"push"}},mounted:function(){var t=this;i("JAHf"),this.$nextTick(function(){t.initParticleJS(t.color,t.particleOpacity,t.particlesNumber,t.shapeType,t.particleSize,t.linesColor,t.linesWidth,t.lineLinked,t.lineOpacity,t.linesDistance,t.moveSpeed,t.hoverEffect,t.hoverMode,t.clickEffect,t.clickMode,t.image)})},methods:{initParticleJS:function(t,e,i,n,s,o,a,r,h,l,p,u,c,d,g,m){particlesJS(this.id,{particles:{number:{value:i,density:{enable:!0,value_area:800}},color:{value:t},shape:{type:n,stroke:{width:0,color:"#192231"},polygon:{nb_sides:5},image:m},opacity:{value:e,random:!1,anim:{enable:!1,speed:1,opacity_min:.1,sync:!1}},size:{value:s,random:!0,anim:{enable:!1,speed:40,size_min:.1,sync:!1}},line_linked:{enable:r,distance:l,color:o,opacity:h,width:a},move:{enable:!0,speed:p,direction:"none",random:!1,straight:!1,out_mode:"out",bounce:!1,attract:{enable:!1,rotateX:600,rotateY:1200}}},interactivity:{detect_on:"canvas",events:{onhover:{enable:u,mode:c},onclick:{enable:d,mode:g},onresize:{enable:!0,density_auto:!0,density_area:400}},modes:{grab:{distance:140,line_linked:{opacity:1}},bubble:{distance:400,size:40,duration:2,opacity:8,speed:3},repulse:{distance:200,duration:.4},push:{particles_nb:4},remove:{particles_nb:2}}},retina_detect:!0})}}},s=function(){var t=this,e=t.$createElement;return(t._self._c||e)("div",{staticClass:"particles-js",attrs:{id:t.id,color:t.color,particleOpacity:t.particleOpacity,linesColor:t.linesColor,particlesNumber:t.particlesNumber,shapeType:t.shapeType,image:t.image,particleSize:t.particleSize,linesWidth:t.linesWidth,lineLinked:t.lineLinked,lineOpacity:t.lineOpacity,linesDistance:t.linesDistance,moveSpeed:t.moveSpeed,hoverEffect:t.hoverEffect,hoverMode:t.hoverMode,clickEffect:t.clickEffect,clickMode:t.clickMode}})},o=[];s._withStripped=!0;var a=i("XyMi"),r=Object(a.a)(n,s,o,!1,null,null,null);r.options.__file="node_modules/vue-particles/src/vue-particles/vue-particles.vue";e.a=r.exports},"+nwc":function(t,e){},"+szC":function(t,e){},"/cJt":function(t,e){},0:function(t,e,i){t.exports=i("nplA")},1:function(t,e){},2:function(t,e){},"3Puz":function(t,e){},"6WWz":function(t,e){},"6hKi":function(t,e){},"7XV9":function(t,e){},"7faQ":function(t,e){},"Arq/":function(t,e){},D4uH:function(t,e,i){"use strict";var n={},s={name:"icon",props:{name:{type:String,validator:function(t){return t?t in n||(console.warn('Invalid prop: prop "name" is referring to an unregistered icon "'+t+'".\nPlease make sure you have imported this icon before using it.'),!1):(console.warn('Invalid prop: prop "name" is required.'),!1)}},scale:[Number,String],spin:Boolean,inverse:Boolean,pulse:Boolean,flip:{validator:function(t){return"horizontal"===t||"vertical"===t}},label:String},data:function(){return{x:!1,y:!1,childrenWidth:0,childrenHeight:0,outerScale:1}},computed:{normalizedScale:function(){var t=this.scale;return t=void 0===t?1:Number(t),isNaN(t)||t<=0?(console.warn('Invalid prop: prop "scale" should be a number over 0.',this),this.outerScale):t*this.outerScale},klass:function(){return{"fa-icon":!0,"fa-spin":this.spin,"fa-flip-horizontal":"horizontal"===this.flip,"fa-flip-vertical":"vertical"===this.flip,"fa-inverse":this.inverse,"fa-pulse":this.pulse}},icon:function(){return this.name?n[this.name]:null},box:function(){return this.icon?"0 0 "+this.icon.width+" "+this.icon.height:"0 0 "+this.width+" "+this.height},ratio:function(){if(!this.icon)return 1;var t=this.icon,e=t.width,i=t.height;return Math.max(e,i)/16},width:function(){return this.childrenWidth||this.icon&&this.icon.width/this.ratio*this.normalizedScale||0},height:function(){return this.childrenHeight||this.icon&&this.icon.height/this.ratio*this.normalizedScale||0},style:function(){return 1!==this.normalizedScale&&{fontSize:this.normalizedScale+"em"}},raw:function(){if(!this.icon||!this.icon.raw)return null;var t=this.icon.raw,e={};return t=t.replace(/\s(?:xml:)?id=(["']?)([^"')\s]+)\1/g,function(t,i,n){var s="fa-"+(o++).toString(16);return e[n]=s,' id="'+s+'"'}),t=t.replace(/#(?:([^'")\s]+)|xpointer\(id\((['"]?)([^')]+)\2\)\))/g,function(t,i,n,s){var o=i||s;return o&&e[o]?"#"+e[o]:t}),t}},mounted:function(){var t=this;if(!this.icon){this.$children.forEach(function(e){e.outerScale=t.normalizedScale});var e=0,i=0;this.$children.forEach(function(t){e=Math.max(e,t.width),i=Math.max(i,t.height)}),this.childrenWidth=e,this.childrenHeight=i,this.$children.forEach(function(t){t.x=(e-t.width)/2,t.y=(i-t.height)/2})}},register:function(t){for(var e in t){var i=t[e];i.paths||(i.paths=[]),i.d&&i.paths.push({d:i.d}),i.polygons||(i.polygons=[]),i.points&&i.polygons.push({points:i.points}),n[e]=i}},icons:n},o=870711;var a=function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("svg",{class:t.klass,style:t.style,attrs:{version:"1.1",role:t.label?"img":"presentation","aria-label":t.label,x:t.x,y:t.y,width:t.width,height:t.height,viewBox:t.box}},[t._t("default",[t.icon&&t.icon.paths?t._l(t.icon.paths,function(e,n){return i("path",t._b({key:"path-"+n},"path",e,!1))}):t._e(),t._v(" "),t.icon&&t.icon.polygons?t._l(t.icon.polygons,function(e,n){return i("polygon",t._b({key:"polygon-"+n},"polygon",e,!1))}):t._e(),t._v(" "),t.icon&&t.icon.raw?[i("g",{domProps:{innerHTML:t._s(t.raw)}})]:t._e()])],2)},r=[];a._withStripped=!0;var h=i("XyMi"),l=!1;var p=function(t){l||i("jc1H")},u=Object(h.a)(s,a,r,!1,p,null,null);u.options.__file="node_modules/vue-awesome/components/Icon.vue";e.a=u.exports},EUs4:function(t,e){},FgsX:function(t,e){},Hgz1:function(t,e){},J91Y:function(t,e){},JzC1:function(t,e){},L9cC:function(t,e){},LNWm:function(t,e){t.exports="data:image/svg+xml;base64,PD94bWwgdmVyc2lvbj0iMS4wIiBlbmNvZGluZz0iaXNvLTg4NTktMSI/Pg0KPCEtLSBHZW5lcmF0b3I6IEFkb2JlIElsbHVzdHJhdG9yIDE5LjAuMCwgU1ZHIEV4cG9ydCBQbHVnLUluIC4gU1ZHIFZlcnNpb246IDYuMDAgQnVpbGQgMCkgIC0tPg0KPHN2ZyB2ZXJzaW9uPSIxLjEiIGlkPSJMYXllcl8xIiB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIHhtbG5zOnhsaW5rPSJodHRwOi8vd3d3LnczLm9yZy8xOTk5L3hsaW5rIiB4PSIwcHgiIHk9IjBweCINCgkgdmlld0JveD0iMCAwIDUxMiA1MTIiIHN0eWxlPSJlbmFibGUtYmFja2dyb3VuZDpuZXcgMCAwIDUxMiA1MTI7IiB4bWw6c3BhY2U9InByZXNlcnZlIj4NCjxwYXRoIHN0eWxlPSJmaWxsOiNEOEQ4RDg7IiBkPSJNMjU2LDI2NC44MjhjLTEyLjM1OSwwLTIzLjgzNC0xLjc2Ni0zNC40MjgtNC40MTRsMTYuNzcyLDIzMy45MzENCglDMjM5LjIyOCw1MDQuMDU1LDI0Ni4yOSw1MTIsMjU2LDUxMmM5LjcxLDAsMTYuNzcyLTcuOTQ1LDE3LjY1NS0xNy42NTVsMTYuNzcyLTIzMy45MzENCglDMjc5LjgzNSwyNjMuOTQ1LDI2OC4zNTksMjY0LjgyOCwyNTYsMjY0LjgyOCIvPg0KPHBhdGggc3R5bGU9ImZpbGw6IzYxQkE3MjsiIGQ9Ik0zODguNDE0LDEzMi40MTRDMzg4LjQxNCw1OS4xNDUsMzI5LjI2OSwwLDI1NiwwUzEyMy41ODYsNTkuMTQ1LDEyMy41ODYsMTMyLjQxNA0KCVMxODIuNzMxLDI2NC44MjgsMjU2LDI2NC44MjhTMzg4LjQxNCwyMDUuNjgzLDM4OC40MTQsMTMyLjQxNCIvPg0KPGc+DQoJPHBhdGggc3R5bGU9ImZpbGw6I0ZGRkZGRjsiIGQ9Ik0yNTYsMjAzLjAzNGMtNS4yOTcsMC04LjgyOC0zLjUzMS04LjgyOC04LjgyOFY3MC42MjFjMC01LjI5NywzLjUzMS04LjgyOCw4LjgyOC04LjgyOA0KCQljNS4yOTcsMCw4LjgyOCwzLjUzMSw4LjgyOCw4LjgyOHYxMjMuNTg2QzI2NC44MjgsMTk5LjUwMywyNjEuMjk3LDIwMy4wMzQsMjU2LDIwMy4wMzR6Ii8+DQoJPHBhdGggc3R5bGU9ImZpbGw6I0ZGRkZGRjsiIGQ9Ik0zMTcuNzkzLDE0MS4yNDFIMTk0LjIwN2MtNS4yOTcsMC04LjgyOC0zLjUzMS04LjgyOC04LjgyOGMwLTUuMjk3LDMuNTMxLTguODI4LDguODI4LTguODI4DQoJCWgxMjMuNTg2YzUuMjk3LDAsOC44MjgsMy41MzEsOC44MjgsOC44MjhDMzI2LjYyMSwxMzcuNzEsMzIzLjA5LDE0MS4yNDEsMzE3Ljc5MywxNDEuMjQxeiIvPg0KPC9nPg0KPGc+DQo8L2c+DQo8Zz4NCjwvZz4NCjxnPg0KPC9nPg0KPGc+DQo8L2c+DQo8Zz4NCjwvZz4NCjxnPg0KPC9nPg0KPGc+DQo8L2c+DQo8Zz4NCjwvZz4NCjxnPg0KPC9nPg0KPGc+DQo8L2c+DQo8Zz4NCjwvZz4NCjxnPg0KPC9nPg0KPGc+DQo8L2c+DQo8Zz4NCjwvZz4NCjxnPg0KPC9nPg0KPC9zdmc+DQo="},Linl:function(t,e){},MQfU:function(t,e){},Mfxk:function(t,e){},N12Q:function(t,e){},NSaL:function(t,e){},NcxX:function(t,e){},R58i:function(t,e){},W5Ap:function(t,e){},"YW3+":function(t,e){},bDpf:function(t,e){},bhaj:function(t,e){},dFJ4:function(t,e){},dUFf:function(t,e){},eadD:function(t,e){},fcAc:function(t,e){},jc1H:function(t,e){},"lw+A":function(t,e){},mpFg:function(t,e){},n8cc:function(t,e){},nplA:function(t,e,i){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var n=i("Dd8w"),s=i.n(n),o=(i("30VO"),i("/5sW")),a=i("7109");o.a.use(a.default,{components:a,directives:a,plugins:a});i("L4dm"),i("hAPP"),i("3Puz"),i("N12Q");var r={name:"login-small-comp",data:function(){return{entity:this.$store.state.entity,fields:{username:null,password:null},uuid:this._uid,errMsg:null,feedbackMsg:null}},sockets:{connect:function(){console.log("module %s connect vue side",this.$options.name)},giveLogin:function(t){t.success?this.feedbackMsg=t.msg||"successfully logged in":this.errMsg=t.msg||"something went wrong logging in"}},created:function(){},watch:{"$store.state.entity":function(){this.entity=this.$store.state.entity}},methods:{login:function(){var t={username:this.fields.username,password:this.fields.password};console.log("emitting"),this.$socket.emit("login",t)},clearFields:function(){for(var t in this.fields)this.fields.hasOwnProperty(t)&&(this.fields[t]=null)}},props:{}},h=function(){var t=this,e=t.$createElement,i=t._self._c||e;return!t.entity||t.entity&&!t.entity.auth?i("div",{staticClass:"login-small"},[i("div",{staticClass:"login-form"},[i("input",{directives:[{name:"model",rawName:"v-model",value:t.fields.username,expression:"fields.username"}],attrs:{type:"text",placeholder:"username"},domProps:{value:t.fields.username},on:{keyup:function(e){if(!("button"in e)&&t._k(e.keyCode,"enter",13,e.key))return null;t.login(e)},input:function(e){e.target.composing||t.$set(t.fields,"username",e.target.value)}}}),i("input",{directives:[{name:"model",rawName:"v-model",value:t.fields.password,expression:"fields.password"}],attrs:{placeholder:"password",type:"password"},domProps:{value:t.fields.password},on:{keyup:function(e){if(!("button"in e)&&t._k(e.keyCode,"enter",13,e.key))return null;t.login(e)},input:function(e){e.target.composing||t.$set(t.fields,"password",e.target.value)}}}),i("button",{attrs:{type:"button"},on:{click:t.login}},[t._v("login")]),i("router-link",{attrs:{to:"/register"}},[i("button",[t._v("register")])])],1),t.errMsg||t.feedbackMsg?i("div",{staticClass:"messages-container"},[t.errMsg?i("div",{staticClass:"errMsg"},[t._v(t._s(t.errMsg))]):t._e(),t.feedbackMsg?i("div",{staticClass:"feedbackMsg"},[t._v(t._s(t.feedbackMsg))]):t._e()]):t._e()]):t._e()},l=[];h._withStripped=!0;var p=i("XyMi"),u=!1;var c=function(t){u||i("fcAc")},d=Object(p.a)(r,h,l,!1,c,"data-v-a32cbb7a",null);d.options.__file="src/components/login-small.vue";var g=d.exports,m={data:function(){return{nav:this.$store.state.nav,entity:this.$store.state.entity}},sockets:{connect:function(){},giveNav:function(t){this._uid==t.clientId&&t.nav&&this.$store.commit("navSet",t.nav)}},created:function(){this.getNav({clientId:this._uid,siteTitle:this.siteTitle})},watch:{"$store.state.entity":function(){this.entity=this.$store.state.entity}},methods:{getNav:function(t){this.$socket.emit("getNav",t)},toggleSideBar:function(){this.eventHub.$emit("toggleSideBar")},emit:function(t){this.eventHub.$emit(t)}},props:{siteTitle:{}},components:{"login-small-comp":g}},v=function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("div",{staticClass:"nav"},[t.nav?i("div",{staticClass:"nav-positioner"},[i("div",{staticClass:"brand-container"},[i("router-link",{staticClass:"brand",attrs:{to:"/home"}},[t._v(t._s(t.nav.siteTitle))])],1),i("div",{staticClass:"actions-group-container"},[t._l(t.nav.actionGroups,function(e){return t.nav.actionGroups&&t.nav.actionGroups.length>0?i("div",{staticClass:"actions-container"},t._l(e.actions,function(e){return e.auth.indexOf("user")>=0&&!t.entity.auth||e.auth.indexOf("nouser")>=0&&t.entity.auth?t._e():i("div",{staticClass:"action",attrs:{title:e.text}},["link"==e.type?i("router-link",{attrs:{to:e.link}},["text"==e.render?i("div",{staticClass:"text"},[t._v(t._s(e.text))]):"icon"==e.render?i("icon",{attrs:{name:e.icon}}):"img"==e.render?i("img",{attrs:{src:e.src}}):t._e()],1):"component"!=e.type||t.entity.auth?"dropdown"==e.type?i("div",{staticClass:"dropdown-container",on:{click:function(i){t.emit(e.action)}}},["text"==e.render?i("div",{staticClass:"text"},[t._v(t._s(e.text))]):"icon"==e.render?i("icon",{attrs:{name:e.icon}}):"img"==e.render?i("img",{attrs:{src:e.src}}):t._e()],1):"static"==e.type?i("div",{staticClass:"static"},["text"==e.render?i("div",{staticClass:"text"},[t._v(t._s(e.text))]):"icon"==e.render?i("icon",{attrs:{name:e.icon}}):"img"==e.render?i("img",{attrs:{src:e.src}}):t._e()],1):t._e():i(e.text+"-comp",{tag:"component"})],1)})):t._e()}),t.nav.actions&&t.nav.actions.length>0?i("div",{staticClass:"actions-container"},t._l(t.nav.actions,function(e){return e.auth.indexOf("user")>=0&&!t.entity.auth||e.auth.indexOf("nouser")>=0&&t.entity.auth?t._e():i("div",{staticClass:"action",attrs:{title:e.text}},["link"==e.type?i("router-link",{attrs:{to:e.link}},["text"==e.render?i("div",{staticClass:"text"},[t._v(t._s(e.text))]):"icon"==e.render?i("icon",{attrs:{name:e.icon}}):t._e()],1):"component"!=e.type||t.entity.auth?"dropdown"==e.type?i("div",{staticClass:"dropdown-container"},["text"==e.render?i("div",{staticClass:"text"},[t._v(t._s(e.text))]):"icon"==e.render?i("icon",{attrs:{name:e.icon}}):t._e()],1):t._e():i(e.text+"-comp",{tag:"component"})],1)})):t._e()],2)]):t._e()])},f=[];v._withStripped=!0;var y=!1;var b=function(t){y||i("bDpf")},M=Object(p.a)(m,v,f,!1,b,"data-v-0276edc3",null);M.options.__file="src/components/nav.vue";var w=M.exports,C=i("ElYn"),I=i.n(C),_={mixins:[I()({vue:{reactiveSetter:!0,vm:this},objList:"this.optionsMutable",stringList:"this.optionsMutable"})],data:function(){return{sidebar:null,uuid:this._uid,entity:this.$store.state.entity,optionsMutable:this.$store.state.sideBarOptions}},sockets:{connect:function(){},giveNav:function(t){this.uuid==t.id&&(this.sidebar=t.sidebar)}},created:function(){var t=this;this.eventHub.$on("toggleSideBar",function(){t.toggleOpt("closed")}),this.optionsMutable=this.options},watch:{"$store.state.entity":function(){this.entity=this.$store.state.entity,this.entity.inventory=this.$store.state.entity.inventory},"$store.state.sideBarOptions":function(){this.optionsMutable=this.$store.state.sideBarOptions}},methods:{getNav:function(t){this.$socket.emit("getNav",t)},logout:function(){console.log("logging out"),this.$socket.emit("logout",{})}},props:{siteTitle:{default:"site title",type:String},options:{type:Array,default:function(){return["closed"]}}},components:{"login-small-comp":g}},T=function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("div",{staticClass:"sidebar",class:{closed:t.optIn("closed")}},[i("div",{staticClass:"sidebar-positioner"},[t.entity?i("div",{staticClass:"welcome-message-container"},[i("div",{staticClass:"welcome-message"},[t._v("welcome,"),i("a",{attrs:{href:"/self"}},[t._v(t._s(t.entity.username||t.entity.identity))])])]):t._e(),i("div",{staticClass:"inventory-list"}),t.sidebar?i("div",{staticClass:"actions-group-container"},[t._l(t.sidebar.actionGroups,function(e){return t.sidebar.actionGroups&&t.sidebar.actionGroups.length>0?i("div",{staticClass:"actions-container"},t._l(e.actions,function(e){return e.auth.indexOf("user")>=0&&!t.entity.auth||e.auth.indexOf("nouser")>=0&&t.entity.auth?t._e():i("div",{staticClass:"action"},["link"==e.type?i("a",{attrs:{href:e.link}},["text"==e.render?i("div",{staticClass:"text"},[t._v(t._s(e.text))]):"icon"==e.render?i("icon",{attrs:{name:e.icon}}):t._e()],1):"component"!=e.type||t.entity.auth?"dropdown"==e.type?i("div",{staticClass:"dropdown-container"},["text"==e.render?i("div",{staticClass:"text"},[t._v(t._s(e.text))]):"icon"==e.render?i("icon",{attrs:{name:e.icon}}):t._e()],1):t._e():i(e.text+"-comp",{tag:"component"})],1)})):t._e()}),t.sidebar.actions&&t.sidebar.actions.length>0?i("div",{staticClass:"actions-container"},t._l(t.sidebar.actions,function(e){return e.auth.indexOf("user")>=0&&!t.entity.auth||e.auth.indexOf("nouser")>=0&&t.entity.auth?t._e():i("div",{staticClass:"action"},["link"==e.type?i("a",{attrs:{href:e.link}},["text"==e.render?i("div",{staticClass:"text"},[t._v(t._s(e.text))]):"icon"==e.render?i("icon",{attrs:{name:e.icon}}):t._e()],1):"component"!=e.type||t.entity.auth?"dropdown"==e.type?i("div",{staticClass:"dropdown-container"},["text"==e.render?i("div",{staticClass:"text"},[t._v(t._s(e.text))]):"icon"==e.render?i("icon",{attrs:{name:e.icon}}):t._e()],1):t._e():i(e.text+"-comp",{tag:"component"})],1)})):t._e()],2):t._e(),i("div",{staticClass:"actions-group-container bottom-row"},[i("div",{staticClass:"actions-container"},[t.entity.username?i("div",{staticClass:"action",on:{click:t.logout}},[i("div",{staticClass:"text"},[t._v("logout")])]):t._e(),t.entity.username?t._e():i("div",{staticClass:"action"},[i("router-link",{attrs:{to:"/register"}},[t._v("register")])],1),i("div",{staticClass:"action",on:{click:function(e){t.pushOpt("closed")}}},[i("div",{staticClass:"text"},[t._v("close")])])])])])])},O=[];T._withStripped=!0;var x=!1;var S=function(t){x||i("W5Ap")},k=Object(p.a)(_,T,O,!1,S,"data-v-19f8877c",null);k.options.__file="src/components/sidebar.vue";var $=k.exports,j=i("pFYg"),A=i.n(j),N=i("BO1k"),L=i.n(N),P=i("//Fk"),D=i.n(P),F={data:function(){return{}},methods:{setThing:function(){var t=this,e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},i=e.option,n=e.list,s=void 0===n?this.thingMutable.things:n,o=e.obj,a=void 0!==o&&o,r=e.key,h=void 0===r?"_id":r,l=e.keymatchtype,p=e.push,u=e.strings,c=e.targets;return new D.a(function(e,n){var o=t.thingIndex({option:i,list:s,obj:a,key:h,keymatchtype:l,strings:u});if(o>=0&&s)if(c)for(var r=0;r<c.length;r++)s[o][c[r]]=i[c[r]];else s.splice(o,1,i);else p&&s&&s.push(i);e()})},setThings:function(){var t=this,e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},i=e.options,n=e.list,s=void 0===n?this.thingMutable.things:n,o=e.obj,a=void 0!==o&&o,r=e.key,h=void 0===r?"_id":r,l=e.keymatchtype,p=e.push;return new D.a(function(e,n){if(i&&s){var o=!0,r=!1,u=void 0;try{for(var c,d=L()(i);!(o=(c=d.next()).done);o=!0){var g=c.value;t.setThing({option:g,list:s,obj:a,key:h,keymatchtype:l,push:p})}}catch(t){r=!0,u=t}finally{try{!o&&d.return&&d.return()}finally{if(r)throw u}}}e()})},optIn:function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:this.optionsMutable,i=arguments.length>2&&void 0!==arguments[2]&&arguments[2],n=arguments.length>3&&void 0!==arguments[3]?arguments[3]:"_id",s=arguments[4];if(!i&&e&&e.indexOf(t)>=0)return!0;if(i&&e)for(var o=0;o<e.length;o++)if("object"==(void 0===n?"undefined":A()(n))){for(var a=0;a<n.length;a++)if("broad"==s){if(e[o]&&this.getsmart(e[o],n[a],void 0)==this.getsmart(t,n[a],void 0)&&void 0!==this.getsmart(e[o],n[a],void 0))return!0;if(e[o]&&"string"==typeof e[o]&&e[o]==this.getsmart(t,n[a],void 0)&&void 0!==this.getsmart(t,n[a],void 0))return!0}else if(e[o]&&this.getsmart(e[o],n[a],void 0)==this.getsmart(t,n[a],void 0)&&void 0!==this.getsmart(e[o],n[a],void 0)){if(a==n.length-1)return!0}else if(e[o]&&"string"==typeof e[o]&&e[o]==this.getsmart(t,n[a],void 0)&&void 0!==this.getsmart(t,n[a],void 0)&&a==n.length-1)return!0}else if(e[o]&&e[o][n]==t[n]&&void 0!==e[o][n])return!0;return!1},thingIn:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},e=t.option,i=t.list,n=t.obj,s=void 0!==n&&n,o=t.key,a=void 0===o?"_id":o,r=t.keymatchtype,h=(t.strings,t.retIndex);if(!s&&i&&i.indexOf(e)>=0)return!h||i.indexOf(e);if(s&&i)for(var l=0;l<i.length;l++)if("object"==(void 0===a?"undefined":A()(a))){for(var p=0;p<a.length;p++)if("broad"==r){if(i[l]&&this.getsmart(i[l],a[p],void 0)==this.getsmart(e,a[p],void 0)&&void 0!==this.getsmart(i[l],a[p],void 0))return!h||l;if(i[l]&&"string"==typeof i[l]&&i[l]==this.getsmart(e,a[p],void 0)&&void 0!==this.getsmart(e,a[p],void 0))return!h||l}else if(i[l]&&this.getsmart(i[l],a[p],void 0)==this.getsmart(e,a[p],void 0)&&void 0!==this.getsmart(i[l],a[p],void 0)){if(p==a.length-1)return!h||l}else if(i[l]&&"string"==typeof i[l]&&i[l]==this.getsmart(e,a[p],void 0)&&void 0!==this.getsmart(e,a[p],void 0)&&p==a.length-1)return!h||l}else{if(i[l]&&i[l][a]==e[a]&&void 0!==i[l][a])return!h||l;if(i[l]&&"string"==typeof i[l]&&i[l]==e[a]&&void 0!==e[a])return!h||l}return!!h&&-1},optsIn:function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:this.optionsMutable,i=arguments.length>2&&void 0!==arguments[2]&&arguments[2],n=arguments.length>3&&void 0!==arguments[3]?arguments[3]:"_id",s=arguments[4],o=!0,a=!1,r=void 0;try{for(var h,l=L()(t);!(o=(h=l.next()).done);o=!0){var p=h.value;if(!i&&e&&e.indexOf(p)>=0);else{if(!i||!e)return!1;for(var u=0;u<e.length;u++)if(!this.optIn(p,e[u],i,n,s))return!1}}}catch(t){a=!0,r=t}finally{try{!o&&l.return&&l.return()}finally{if(a)throw r}}return!0},thingsIn:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},e=t.options,i=t.list,n=void 0===i?this.optionsMutable:i,s=t.obj,o=void 0!==s&&s,a=t.key,r=void 0===a?"_id":a,h=t.keymatchtype,l=!0,p=!1,u=void 0;try{for(var c,d=L()(e);!(l=(c=d.next()).done);l=!0){var g=c.value;if(!o&&n&&n.indexOf(g)>=0);else{if(!o||!n)return!1;for(var m=0;m<n.length;m++)if(!this.optIn(g,n[m],o,r,h))return!1}}}catch(t){p=!0,u=t}finally{try{!l&&d.return&&d.return()}finally{if(p)throw u}}return!0},anyOptsIn:function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:this.optionsMutable,i=arguments.length>2&&void 0!==arguments[2]&&arguments[2],n=arguments.length>3&&void 0!==arguments[3]?arguments[3]:"_id",s=arguments[4],o=!0,a=!1,r=void 0;try{for(var h,l=L()(t);!(o=(h=l.next()).done);o=!0){var p=h.value;if(!i&&e&&e.indexOf(p)>=0)return!0;if(i&&e)for(var u=0;u<e.length;u++)if(this.optIn(p,e[u],i,n,s))return!0}}catch(t){a=!0,r=t}finally{try{!o&&l.return&&l.return()}finally{if(a)throw r}}return!1},anyThingsIn:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},e=t.options,i=t.list,n=void 0===i?this.optionsMutable:i,s=t.obj,o=void 0!==s&&s,a=t.key,r=void 0===a?"_id":a,h=t.keymatchtype,l=!0,p=!1,u=void 0;try{for(var c,d=L()(e);!(l=(c=d.next()).done);l=!0){var g=c.value;if(!o&&n&&n.indexOf(g)>=0)return!0;if(o&&n)for(var m=0;m<n.length;m++)if(this.optIn(g,n[m],o,r,h))return!0}}catch(t){p=!0,u=t}finally{try{!l&&d.return&&d.return()}finally{if(p)throw u}}return!1},optIndex:function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:this.optionsMutable,i=arguments.length>2&&void 0!==arguments[2]&&arguments[2],n=arguments.length>3&&void 0!==arguments[3]?arguments[3]:"_id",s=arguments[4];if(i&&e&&n){for(var o=0;o<e.length;o++)if(this.optIn(t,e,i,n,s))return o}else if(e)return e.indexOf(t);return-1},thingIndex:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},e=t.option,i=t.list,n=t.obj,s=void 0!==n&&n,o=t.key,a=void 0===o?"_id":o,r=t.keymatchtype,h=t.strings;return s&&i&&a?this.thingIn({option:e,list:i,obj:s,key:a,keymatchtype:r,strings:h,retIndex:!0}):i?i.indexOf(e):-1},pushOpt:function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:this.optionsMutable,i=arguments.length>2&&void 0!==arguments[2]&&arguments[2],n=arguments.length>3&&void 0!==arguments[3]?arguments[3]:"_id";"object"!=(void 0===e?"undefined":A()(e))||this.optIn(t,e,i,n)||e.push(t)},pushThing:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},e=t.option,i=t.list,n=void 0===i?this.optionsMutable:i,s=t.obj,o=void 0!==s&&s,a=t.key,r=void 0===a?"_id":a;"object"!=(void 0===n?"undefined":A()(n))||this.optIn(e,n,o,r)||n.push(e)},pushOpts:function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:this.optionsMutable,i=arguments.length>2&&void 0!==arguments[2]&&arguments[2],n=arguments.length>3&&void 0!==arguments[3]?arguments[3]:"_id",s=!0,o=!1,a=void 0;try{for(var r,h=L()(t);!(s=(r=h.next()).done);s=!0){var l=r.value;this.pushOpt(l,e,i,n)}}catch(t){o=!0,a=t}finally{try{!s&&h.return&&h.return()}finally{if(o)throw a}}},pushThings:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},e=t.options,i=t.list,n=void 0===i?this.optionsMutable:i,s=t.obj,o=void 0!==s&&s,a=t.key,r=void 0===a?"_id":a,h=!0,l=!1,p=void 0;try{for(var u,c=L()(e);!(h=(u=c.next()).done);h=!0){var d=u.value;this.pushOpt(d,n,o,r)}}catch(t){l=!0,p=t}finally{try{!h&&c.return&&c.return()}finally{if(l)throw p}}},popOpt:function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:this.optionsMutable,i=arguments.length>2&&void 0!==arguments[2]&&arguments[2],n=arguments.length>3&&void 0!==arguments[3]?arguments[3]:"_id";"object"==(void 0===e?"undefined":A()(e))&&this.optIn(t,e,i,n)&&e.splice(this.optIndex(t,e,i,n),1)},popThing:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},e=t.option,i=t.list,n=void 0===i?this.optionsMutable:i,s=t.obj,o=void 0!==s&&s,a=t.key,r=void 0===a?"_id":a;"object"==(void 0===n?"undefined":A()(n))&&this.optIn(e,n,o,r)&&n.splice(this.optIndex(e,n,o,r),1)},popOpts:function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:this.optionsMutable,i=arguments.length>2&&void 0!==arguments[2]&&arguments[2],n=arguments.length>3&&void 0!==arguments[3]?arguments[3]:"_id",s=!0,o=!1,a=void 0;try{for(var r,h=L()(t);!(s=(r=h.next()).done);s=!0){var l=r.value;this.popOpt(l,e,i,n)}}catch(t){o=!0,a=t}finally{try{!s&&h.return&&h.return()}finally{if(o)throw a}}},popThings:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},e=t.options,i=t.list,n=void 0===i?this.optionsMutable:i,s=t.obj,o=void 0!==s&&s,a=t.key,r=void 0===a?"_id":a,h=!0,l=!1,p=void 0;try{for(var u,c=L()(e);!(h=(u=c.next()).done);h=!0){var d=u.value;this.popOpt(d,n,o,r)}}catch(t){l=!0,p=t}finally{try{!h&&c.return&&c.return()}finally{if(l)throw p}}},toggleOpt:function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:this.optionsMutable,i=arguments.length>2&&void 0!==arguments[2]&&arguments[2],n=arguments.length>3&&void 0!==arguments[3]?arguments[3]:"_id";this.optIn(t,e,i,n)?this.popOpt(t,e,i,n):this.pushOpt(t,e,i,n)},toggleThing:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},e=t.option,i=t.list,n=void 0===i?this.optionsMutable:i,s=t.obj,o=void 0!==s&&s,a=t.key,r=void 0===a?"_id":a;this.optIn(e,n,o,r)?this.popOpt(e,n,o,r):this.pushOpt(e,n,o,r)},toggleOpts:function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:this.optionsMutable,i=arguments[2],n=arguments[3];for(var s in t)this.optIn(s,e,i,n)?this.popOpt(s,e,i,n):this.pushOpt(s,e,i,n)},toggleThings:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},e=t.options,i=t.list,n=void 0===i?this.optionsMutable:i,s=t.obj,o=t.key;for(var a in e)this.optIn(a,n,s,o)?this.popOpt(a,n,s,o):this.pushOpt(a,n,s,o)},ratchetOpt:function(t,e,i,n){},getsmart:function(t,e,i){"string"==typeof e&&(e=e.split("."));return function t(e,i,n){return void 0===e||null===e?n:0===i.length?e:t(e[i[0]],i.slice(1),n)}(t,e,i)},safestring:function(t){return this.jsmart.stringify(t||"")},safeparse:function(t){return this.jsmart.parse(t||"")}}},B={mixins:[F],name:"app",data:function(){return{siteTitle:"planet express",entity:this.$store.state.entity,uuid:this._uid,pageHistory:this.$store.state.pageHistory,mainDrawer:!1}},sockets:{connect:function(){},giveAuthenticate:function(t){console.log(t),t.entity&&t.auth?(t.entity.auth=!0,this.$store.commit("entitySet",t.entity)):(console.log("resetting entity"),this.$store.commit("entitySet",{type:"temporary",identity:"anonymous",auth:!1,username:void 0}),t.err&&this.$store.commit("newAuthLog",{err:t.err,msg:"something went wrong authorizing the user"}))},giveRealms:function(t){t.id==this.uuid&&this.$store.commit("SetRealms",t.realms)}},created:function(){new t(function(){},0),new t(function(){},0);function t(t,e){var i,n,s,o=e;this.start=function(){s=!0,n=new Date,i=setTimeout(t,o)},this.pause=function(){s=!1,clearTimeout(i),o-=new Date-n},this.getTimeLeft=function(){return s&&(this.pause(),this.start()),o},this.getStateRunning=function(){return s},this.start()}console.log("%s was created",this.siteTitle),this.$socket.emit("getRealms",{id:this.uuid,find:{},count:1/0})},watch:{"$store.state.entity":function(){this.entity=this.$store.state.entity},"$store.state.pageHistory":function(){this.pageHistory=this.$store.state.pageHistory}},components:{navbar:w,sidebar:$}},E=function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("div",{ref:"app",attrs:{id:"app"}},[i("q-layout",{attrs:{view:"HHH Lpr fff"}},[i("q-layout-drawer",{staticClass:"z-top",attrs:{side:"left",overlay:!0},model:{value:t.mainDrawer,callback:function(e){t.mainDrawer=e},expression:"mainDrawer"}},[i("q-list",[i("q-item",[i("q-item-side",[i("q-item-tile",{staticClass:"q-item-tile-profile-picture",attrs:{avatar:"avatar",sparse:"sparse"},on:{click:function(e){t.mainDrawer=!t.mainDrawer}}},[i("img",{attrs:{src:"/assets/astronaut.png"}})])],1),i("q-item-main",[i("q-item-tile",{attrs:{label:"label"}},[t._v("Nikolaj Frey")])],1),i("q-item-side",[i("q-btn",{staticClass:"shadow-0",attrs:{icon:"close"},on:{click:function(e){t.mainDrawer=!t.mainDrawer}}})],1)],1),i("q-item-separator"),i("q-item",[i("q-item-side",{attrs:{avatar:"/assets/box.png"}}),i("q-item-main",{attrs:{label:"Your Inventory"}})],1),i("q-item",[i("q-item-main",{attrs:{label:"Tracking"}})],1),i("q-item",[i("q-item-main",{attrs:{label:"Waiting"}})],1),i("q-item",[i("q-item-main",{attrs:{label:"Despatched"}})],1),i("q-item",[i("q-item-main",{attrs:{label:"Delivered"}})],1),i("q-item",[i("q-item-main",{attrs:{label:"Routes"}})],1),i("q-item-separator"),i("q-item",[i("q-item-side",{attrs:{avatar:"/assets/van.png"}}),i("q-item-main",{attrs:{label:"Your vehicle"}}),i("q-item-side",{staticClass:"q-verified-status",attrs:{avatar:"/assets/question-yellow.png"}})],1),i("q-item",[i("q-item-side",{attrs:{avatar:"/assets/license-plate.png"}}),i("q-item-main",{attrs:{label:"Become Verified"}}),i("q-item-side",{staticClass:"q-verified-status",attrs:{avatar:"/assets/wrong-thick.png"}})],1),i("q-item-separator"),i("q-item",[i("q-item-main",{attrs:{label:"Settings"}})],1)],1)],1),i("q-page-container",{staticClass:"q-pt-none"},[i("router-view",{staticClass:"router-view",attrs:{siteTitle:t.siteTitle}})],1),i("q-toolbar",{staticClass:"fixed-top q-nav-toolbar",attrs:{color:"primary",overlay:!0}},[i("q-btn",{staticClass:"shadow-0",attrs:{icon:"menu",size:"1.2rem"},on:{click:function(e){t.mainDrawer=!t.mainDrawer}}}),i("img",{attrs:{src:"/assets/pe-logo.png"},on:{click:function(e){t.mainDrawer=!t.mainDrawer}}})],1)],1)],1)},z=[];E._withStripped=!0;var G=!1;var q=function(t){G||i("dUFf")},H=Object(p.a)(B,E,z,!1,q,null,null);H.options.__file="src/App.vue";var V=H.exports,U=i("/ocq"),W={mixins:[F],name:"search-comp",data:function(){return{optionsMutable:this.options}},sockets:{connect:function(){}},created:function(){},methods:{updateCurrentSearchText:function(t){this.$emit("searchText",t)}},props:{options:{default:function(){return["double","all"]}},label:{}}},R=function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("div",{staticClass:"search"},[i("div",{staticClass:"search-container"},[i("div",{staticClass:"search-form"},[i("v-select",{attrs:{placeholder:"Type in anything that you're looking for",pushTags:!1,inputStore:!0,taggable:!0,searchMessage:"No suggestions",noDropArrow:!0,options:t.options,label:t.label,minResults:2},on:{click:function(e){t.popOpt("all"),t.pushOpt("first")},input:t.updateCurrentSearchText}})],1)])])},Q=[];R._withStripped=!0;var Y=!1;var J=function(t){Y||i("J91Y")},Z=Object(p.a)(W,R,Q,!1,J,null,null);Z.options.__file="src/components/search.vue";var K=Z.exports,X=i("mvHQ"),tt=i.n(X),et={name:"thing",mixins:[I()({vue:{reactiveSetter:!0,vm:"this"},objList:"this.thingMutable.things",stringList:"this.thingMutable.properties.mapped.options.Array of Strings"})],data:function(){return{thingMutable:this.thing,entity:this.$store.state.entity,feedback:null,realms:this.$store.state.realms,thingTypes:this.$store.state.thingTypes,types:this.$store.state.types,thingNames:this.$store.state.thingNames,priceUnits:this.$store.state.priceUnits,currencies:this.$store.state.currencies,urls:["http://agora.dev/forum","http://lopu.com.au","http://agora.lopu.com.au"],err:null,alterEgos:[this.$store.state.entity.username?this.$store.state.entity.username:"anonymous","anonymous"],neighboursMutable:this.neighbours,messages:[],funCounter:0,limitMutable:5,loadLimitMutable:5,propertiesLimitMutable:50,propertiesLoadLimitMutable:5,valueLimitMutable:5,valueLoadLimitMutable:5,savesToMutable:this.savesTo,optionsMutable:[],childOptions:[],parentOptionsMutable:this.parentOptions,defaultThingMutable:this.defaultThing,thingMap:void 0,thingMapGeocoder:void 0,thingMapFeatures:{type:"FeatureCollection",features:[]},invGrid:{width:80,invWidth:void 0,padding:"2px 3px"}}},sockets:{connect:function(){},giveThing:function(t){var e=this;if("hmm"==this.thingMutable.uuid&&console.log("got thing %s",Date.now()),this.sameObj(t.thing,this.thingMutable,t))this.thingMutable=t.thing,(t.giveEvent="save")&&this.$emit("saved"),this.mapProperties().then(function(t){e.reinit(),e.popOpt("editing"),e.pushOpt("fetched")}).catch(function(t){console.error(t)}),this.setFeedback(t.feedback);else if(this.isParent(t))if(this.optIn("a lopu inventory generator",this.getsmart(this.thingMutable,"names",[])))"hmm"==this.thingMutable.uuid&&console.log("where we should be"),t.thing.tag="loading",this.setThing({option:t.thing,list:this.gosmart(this,"thingMutable.things",[]),obj:!0,key:["_id","uuid","tag"],keymatchtype:"broad",push:!0,strings:!0}).then(function(e){delete t.thing.tag}).catch(function(t){t&&console.error(t)}),this.optIn("a lopu map",this.getsmart(this.thingMutable,"names",[]))&&this.pushThingFeature(t.thing,"render");else{for(var i=0;i<t.thing.relatives.length;i++)this.optIn(t.thing._id,this.thingMutable[t.thing.relatives[i].path])||this.optIn(t.thing,this.thingMutable[t.thing.relatives[i].path],!0)||this.optIn(t.thing,this.thingMutable[t.thing.relatives[i].path],!0,"uuid")?this.setThing({option:t.thing,list:this.thingMutable[t.thing.relatives[i].path],obj:!0,key:["_id","uuid"],keymatchtype:"broad",strings:!0}):this.optIn(t.thing,this.thingMutable.things,!0),this.thingMutable._id&&this.thingMutable._id.toString()==t.thing.relatives[i].relative&&this.pushOpt(t.thing,this.thingMutable[t.thing.relatives[i].path],!0);this.entity&&this.entity.inventory&&(this.entity.inventory._id==this.thingMutable._id&&void 0!==this.thingMutable._id||this.entity.inventory.uuid==this.thingMutable.uuid&&void 0!==this.thingMutable.uuid)&&this.$store.commit("entityInventorySet",this.thingMutable)}else t.thing.title&&t.thing.title.indexOf("-comments")},giveThings:function(t){this.isParent(t)&&t.returnPath&&(this.setThings({options:t.things,list:this.thingMutable[t.returnPath],obj:!0,strings:!0}),this.mapList(this.thingMutable[t.returnPath]))},confirmThingDeletion:function(t){console.log("wtf"),console.log(this.sameObj(this.getsmart(t,"thing",void 0),this.getsmart(this,"thingMutable",void 0),t)),console.log(t),this.sameObj(this.getsmart(t,"thing",void 0),this.getsmart(this,"thingMutable",void 0),t)&&(this.getsmart(t,"feedback.success",!1)?(this.$emit("remove"),this.setsmart(this,"thingMutable",void 0)):(this.setFeedback(null),this.pushOpt({text:this.getsmart(t,"feedback.message","There was an error deleting this thing from the database"),from:"lopu"},this.messages)))}},created:function(){},mounted:function(){this.isMounted=!0;var t=this;window.onresize=function(){t.addSlotsToInv()},this.create()},methods:{create:function(){this.thingMutable&&"object"===A()(this.thingMutable)?(this.thingMutable.uuid||!1===this.thingMutable.uuid||(this.thingMutable.uuid=this.$uuid.v4()),this.reinit()):"string"!=typeof this.thingMutable||this.optIn("no-fetch")||(this.getThing({thing:this.thingMutable,parentId:this.parentId,clientId:this._uid,populations:[{path:"properties"}]}),this.thingMutable={_id:this.thingMutable,names:["loading"]});var t=this;setTimeout(function(){t.optIn("loading",t.getsmart(t,"thingMutable.names",[]))},12345),this.setChildOptions()},reinit:function(){var t=this;"hmm"==this.thingMutable.uuid&&console.log("reinitting"),this.parentOptionsMutable=JSON.parse(tt()(this.parentOptions)),this.mapProperties().then(function(e){t.applySchema().then(function(e){t.mapProperties().then(function(e){t.checkPropertiesForOptions(),t.updateOpts(),t.updateThingLocation({loc:"user",overwrite:!1}).then(function(e){if(t.optIn("a lopu inventory generator",t.getsmart(t,"thingMutable.names",[]))&&!t.optIn("gotten")&&!t.getsmart(t,"thingMutable.properties.mapped.dont gen this lopu",!1)){var i=t.generateFind();if(i){for(var n=t.generateFind({piece:"count"}),s=t.generateFind({piece:"options"}),o=(t.getsmart(t,"thingMutable.things.length",0),t.gosmart(t,"thingMutable.things",[])),a=0;a<n;a++){t.pushThing({option:{names:["loading"],uuid:!1,tag:"loading"},list:o})}t.limitMutable=t.limitMutable+n,t.getThings({parentId:t.getsmart(t,"thingMutable._id",t._uid),entity:{_id:t.entity._id},returnPath:"things",find:i,count:n,findOptions:s,stream:!0}),t.pushOpt("gotten"),t.popOpt("regen lopu")}}}).catch(function(t){t&&console.error(t)}),t.optIn("show-comments")&&t.loadComments(),t.optIn("inventory",t.thingMutable.names)&&t.pushOpts(["show inventory","inventory mode"]),t.setChildOptions(),t.resetDefaultThing(),t.addSlotsToInv()}).catch(function(t){t&&console.error(t)})}).catch(function(t){t&&console.error(t)})}).catch(function(t){console.error(t)})},getThing:function(t){this.$socket.emit("getThing",t)},getThings:function(t){console.log("emitting request %s",Date.now()),this.$socket.emit("getThings",t)},addPrice:function(){this.thingMutable.contract?this.thingMutable.contract.push({thing:null,amount:null,multiplier:null,unit:null}):this.$set(this.thingMutable,"contract",[{thing:null,amount:null,multiplier:null,unit:null}])},removePrice:function(t){this.thingMutable.contract.splice(t,1)},updateDescription:function(t){this.setsmart(this,"thingMutable.description",t.api.origElements.innerHTML)},updateTitle:function(t){this.setsmart(this,"thingMutable.title",t.api.origElements.innerHTML)},updateValue:function(t){this.value=t.api.origElements.innerHTML},updateAt:function(t,e,i){console.log(t),console.log(e),console.log(i)},showOptions:function(){this.optIn("icon")||this.optIn("hiding")||this.pushOpt("show options")},showOptionsPerm:function(){this.pushOpts(["show options","focused"]),this.popOpts(["hiding"])},toggleOptions:function(){this.optIn("focused")?this.popOpts(["show options","focused"]):this.optIn("icon")||this.pushOpts(["show options","focused"])},hideOptions:function(){this.popOpts(["show options","focused"]),this.pushOpt("hiding"),setTimeout(this.popOpt("hiding"),4e3)},hideOptionsMaybe:function(){!this.optIn("focused")&&this.optIn("show options")&&this.popOpt("show options")},setFeedback:function(t){this.feedback=t||null},generateFind:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},e=t.piece,i=void 0===e?"for":e,n=t.obj,s=void 0===n?this.thingMutable:n;if("object"==(void 0===s?"undefined":A()(s))){if(!i||"for"==i){var o={};if(this.getsmart(s,"properties.mapped.a special lopu regex to match."+this.getsmart(s,"properties.mapped.a special lopu regex to match.type","String"),!1)){var a=this.getsmart(s,"properties.mapped.a special lopu regex to match."+this.getsmart(s,"properties.mapped.a special lopu regex to match.type","String"),void 0),r=a.split(" ");o.realms={$in:r},o.names={$in:r},o.text={regex:!0,value:a,options:"i"},o.description={regex:!0,value:a,options:"i"},o.title={regex:!0,value:a,options:"i"},o.orAllTheThings=!0}else o.realms=this.getsmart(s,"properties.mapped.ignore realms.Boolean",!1)?void 0:this.getsmart(s,"properties.mapped.realms to match.Array of Strings.length",0)>0?this.getsmart(s,"properties.mapped.broadly match realms.Boolean",!1)?{$in:this.getsmart(s,"properties.mapped.realms to match.Array of Strings",void 0)}:{$all:this.getsmart(s,"properties.mapped.realms to match.Array of Strings",void 0)}:void 0,o.names=this.getsmart(s,"properties.mapped.ignore names.Boolean",!1)?void 0:this.getsmart(s,"properties.mapped.names to match.Array of Strings.length",0)>0?this.getsmart(s,"properties.mapped.broadly match names.Boolean",!1)?{$in:this.getsmart(s,"properties.mapped.names to match.Array of Strings",void 0)}:{$all:this.getsmart(s,"properties.mapped.names to match.Array of Strings",void 0)}:void 0,o.owners=this.getsmart(s,"properties.mapped.ignore owners.Boolean",!1)?void 0:this.getsmart(s,"properties.mapped.owners to match.Array of Strings.length",0)>0?this.getsmart(s,"properties.mapped.broadly match owners.Boolean",!1)?{$in:this.getsmart(s,"properties.mapped.owners to match.Array of Strings",void 0)}:{$all:this.getsmart(s,"properties.mapped.owners to match.Array of Strings",void 0)}:void 0,o.text=this.getsmart(s,"properties.mapped.ignore text.Boolean",!1)?void 0:this.getsmart(s,"properties.mapped.text to match.String",!1)?this.getsmart(s,"properties.mapped.broadly match text.Boolean",!1)?{regex:!0,value:this.getsmart(s,"properties.mapped.text to match.String",void 0),options:"i"}:this.getsmart(s,"properties.mapped.text to match.String",void 0):void 0,o.description=this.getsmart(s,"properties.mapped.ignore description.Boolean",!1)?void 0:this.getsmart(s,"properties.mapped.description to match.String",!1)?this.getsmart(s,"properties.mapped.broadly match description.Boolean",!1)?{regex:!0,value:this.getsmart(s,"properties.mapped.description to match.String",void 0),options:"i"}:this.getsmart(s,"properties.mapped.description to match.String",void 0):void 0,o.title=this.getsmart(s,"properties.mapped.ignore title.Boolean",!1)?void 0:this.getsmart(s,"properties.mapped.title to match.String",!1)?this.getsmart(s,"properties.mapped.broadly match title.Boolean",!1)?{regex:!0,value:this.getsmart(s,"properties.mapped.title to match.String",void 0),options:"i"}:this.getsmart(s,"properties.mapped.title to match.String",void 0):void 0,o["geojson.geometry"]=this.getsmart(s,"properties.mapped.ignore location.Boolean",!1)?void 0:this.getsmart(s,"properties.mapped.geojson to match.geojson",!1)?{$near:{$maxDistance:this.getsmart(s,"properties.mapped.broadly match location.Boolean",!1)?1e4*this.getsmart(s,"properties.mapped.geojson search radius.Number",12):1e4,$geometry:this.getsmart(s,"geojson.geometry",void 0)}}:this.getsmart(s,"properties.mapped.use this things location.Boolean",!1)?{$near:{$maxDistance:this.getsmart(s,"properties.mapped.broadly match location.Boolean",!1)?1e3*this.getsmart(s,"properties.mapped.geojson search radius.Number",12):1e4,$geometry:this.getsmart(s,"geojson.geometry",void 0)}}:void 0;return o}if("count"==i)return this.getsmart(s,"properties.mapped.limit.Number",!1)||this.getsmart(s,"properties.mapped.count.Number",5);if("options"==i){var h={};return h.sort=this.getsmart(s,"properties.mapped.sort."+this.getsmart(s,"properties.mapped.sort.type","json"),void 0),h}}return!1},getProperty:function(t){for(var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"title",i=arguments.length>2&&void 0!==arguments[2]?arguments[2]:this.gosmart(this,"thingMutable.properties",[]),n=0;n>i.length;n++)if(i[n][e]==t)return i[n]},updateRealmsList:function(t,e){this.$set(this.realms,"searched",null),this.realms.push({key:"searched",realm:t})},genDefaultThing:function(){return"slot"==(arguments.length>0&&void 0!==arguments[0]?arguments[0]:void 0)?{realms:["inventory slots"],title:"debug",names:["inventory slot"],properties:[{title:"options","Array of Strings":["inventory slot","icon"],type:"Array of Strings"}],owners:[this.entity._id],parents:[this.thingMutable.uuid],uuid:this.$uuid.v4()}:this.optIn("a lopu inventory generator",this.thingMutable.names)?{realms:["new"].concat(this.getsmart(this.thingMutable,"properties.mapped.realms to match.Array of Strings",[])),names:this.getsmart(this.thingMutable,"properties.mapped.names to match.Array of Strings",[]),description:void 0,properties:[{title:"options","Array of Strings":["editing","edited","is-default-thing",this.optIn("shallow adders")?"less padding":null],type:"Array of Strings"}],owners:[this.entity._id],parents:[this.thingMutable],uuid:this.$uuid.v4()}:{realms:["new"],description:void 0,properties:[{title:"options","Array of Strings":["editing","edited","is-default-thing",this.optIn("shallow adders")?"less padding":null],type:"Array of Strings"}],owners:[this.entity._id],parents:[this.thingMutable],uuid:this.$uuid.v4()}},resetDefaultThing:function(){this.defaultThingMutable=this.genDefaultThing()},setChildOptions:function(){this.childOptions=[this.optIn("feed")?"wide":"icon",this.optIn("addable")?"addable":null,this.optIn("slotted")?"in slot":null,this.optIn("shrink slot icons")?"shrink slot icon":null,this.optIn("feed")?null:"inventory item",this.optIn("icon")?"no-fetch":null,this.optIn("show inventory")?"fetch":null,this.optIn("dont load childrens children")?"dont load children":null,this.optIn("dont load children children children")?"dont load childrens children":null,this.optIn("show-children-comments")?"show-comments":null,this.optIn("shallow adders")?"shallow adders":null],this.childOptions=this.childOptions.filter(function(t){return t||0==t})},removeMessage:function(t){this.messages.splice(t,1)},sameObj:function(t,e,i){return!(!t||!e)&&(e&&(i&&this._uid&&this._uid==i.clientId&&(e._id&&e._id==t._id||e.uuid&&e.uuid==t.uuid)||e._id&&e._id==t._id||e.uuid&&e.uuid==t.uuid))},isParent:function(t){return void 0!==t.parentId&&(this.getsmart(this,"thingMutable.uuid",void 0)==t.parentId||this._uid==t.parentId||this.getsmart(this,"thingMutable._id",void 0)==t.parentId)||t.thing&&this.getsmart(t,"thing.relatives",[])&&this.getsmart(this,"thingMutable._id",!1)&&this.optIn({path:"parents",relative:this.getsmart(this,"thingMutable._id",{toString:function(){}}).toString()},this.getsmart(t,"thing.relatives",[]),!0,["relative","path"])},thingCleaned:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:this.thingMutable;return{_id:t._id,uuid:t.uuid,title:t.title,description:t.description}},valueToAThing:function(t){if(this.getsmart(t,"constructor",void 0)!==Object){var e={type:this.childType,names:["a lopu value"]};return e[this.childType]=t,e}return this.getsmart(t,"constructor",void 0),Object,t},firstOrLast:function(t,e,i){var n=arguments.length>3&&void 0!==arguments[3]?arguments[3]:"thing";return!(0!=t&&!t||!e||!i)&&((0!=t||1!=e&&1!=i.length)&&(0==t?"first-"+n:t<=e&&t==i.length-1||t==e-1?"last-"+n:"mid-"+n))},osxTrunc:function(t){if("string"==typeof t){var e=t.replace(/&nbsp;/g," ");if(e.replace(/^\s+|\s+$/g,"").length>26){var i=e.replace(/&nbsp;/g," ").replace(/\s+$/g,"").substr(-8).replace(/^\s+/g,"");return e.replace(/&nbsp;/g," ").substr(0,19).replace(/\s+$/g,"")+"..."+i}return t}},trunc:function(t){if("string"==typeof t){var e=t.replace(/&nbsp;/g," ");return e.replace(/^\s+|\s+$/g,"").length>26?e.replace(/&nbsp;/g," ").substr(0,26).replace(/\s+$/g,"")+"..":t}},updateOpts:function(){var t=this;return new D.a(function(e,i){t.getsmart(t,"thingMutable.properties.mapped.options",!1)?(t.pushOpts(t.parentOptionsMutable.filter(function(e){return t.getsmart(t,"thingMutable.properties.mapped.options.Array of Strings",[]).indexOf("ignore client option "+e)<0&&(e||0==e)})),t.parentOptionsMutable=[],e(!0)):t.mapList(t.gosmart(t,"thingMutable.properties",[]),"title","options").then(function(i){if(i)e(t.updateOpts());else{var n=t.gosmart(t,"thingMutable.properties",[]);t.pushThing({option:{title:"options","Array of Strings":[],type:"Array of Strings"},list:n,obj:!0,key:"title"}),e(t.updateOpts())}}).catch(function(t){console.error(t),i(t)})})},checkPropertiesForOptions:function(){if(this.gosmart(this,"thingMutable.properties",[]).constructor==Array){var t=!0,e=!1,i=void 0;try{for(var n,s=L()(this.thingMutable.properties);!(t=(n=s.next()).done);t=!0){var o=n.value;"things render limit"==o.title&&(this.limitMutable=o[o.type||"Number"]||5),this.pushOpt(o.title)}}catch(t){e=!0,i=t}finally{try{!t&&s.return&&s.return()}finally{if(e)throw i}}}},addSlotsToInv:function(t){var e=this,i=Math.floor(this.getsmart(this,"$refs.inventory-list-container.offsetWidth",558))-2,n=93;if(this.invGrid.invWidth==i&&i<93);else if(this.optIn("slotted")){if(i%n>n/3)for(;i%n>7;)n--;else for(;i%n>7;)n++;if(this.invGrid.width=n,this.invGrid.invWidth=Math.floor(i/n)*n,this.optIn("generate slots")){var s=this.gosmart(this,"thingMutable.things",[]),o=4*Math.floor(i/n);if(o=o<this.limitMutable?this.limitMutable:o,s.length<o){for(var a=o-s.length,r=function(){var t=e.genDefaultThing("slot");e.mapList(e.setsmart(t,"properties",e.getsmart(t,"properties",[]))).then(function(e){s.push(t)}).catch(function(t){console.error(t)})},h=0;h<a;h++)r();this.limitMutable=o}else s.length>=o&&(this.limitMutable=o)}}},noValids:function(t){if(t&&t.length){for(var e=0;e<t.length;e++)if(!t[e])return!0;return!1}return!0},applySchema:function(){var t=this,e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:this.getsmart(this,"schema",void 0),i=arguments.length>1&&void 0!==arguments[1]?arguments[1]:this.getsmart(this,"thingMutable",void 0);return new D.a(function(n,s){e&&i?"string"==typeof e?n(!1):"string"!=typeof i?e.properties?t.mapList(e.properties,"title",void 0,!0).then(function(s){s?(e.properties.forEach(function(e,n){if("string"==typeof t.getsmart(e,"title","")&&t.getsmart(e,"title","").indexOf(" schema")>=0){var s=t.getsmart(e,e.type,!1);if(s){if(s.constructor==Array)if(!0===t.getsmartvalue(e,"properties","merge",!1))for(var o=0;o<s.length;o++)t.pushThing({option:s[o],list:t.gosmartvalue(i,e.title.replace(" schema",""),[])});t.setsmart(i,e.title.replace(" schema",""),t.jsmart.parse(t.jsmart.stringify(s)))}}}),n(!0)):n(!1)}).catch(function(t){t&&console.error(t)}):n(!0):n(!1):n(!(e||!i))})},pushChildThing:function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:this.gosmart(this,"thingMutable.things",[]);this.pushOpt(t,e,!0,"_id"),this.mapThings(),this.mapThings("title",t.properties)},saveThing:function(){this.pushOpt(this.entity._id,this.gosmart(this,"thingMutable.owners",[])),this.savesToMutable&&(this.getsmart(this,"savesToMutable.properties.#"),this.pushOpts(this.savesToMutable,this.gosmart(this,"thingMutable.parents",[]))),this.thingMutable.clientId=this._uid;var t={thing:this.thingMutable,clientId:this._uid,entity:this.entity};this.$socket.emit("saveThing",t)},forkThing:function(){},referenceThing:function(){},deleteThing:function(t,e){if(1==t)if("object"!=A()(this.thingMutable)||this.thingMutable._id){var i={thing:this.thingMutable,clientId:this._uid,entity:this.entity};this.$socket.emit("deleteThing",i),this.setFeedback(null)}else this.$emit("remove"),this.setsmart(this,"thingMutable",void 0),this.setFeedback(null);else this.setFeedback({message:"Are you sure you want to delete this?",type:"delete"})},deleteChildThing:function(t,e){(t||0==t)&&e&&this.getsmart(this,"thingMutable."+e,!1)&&this.gosmart(this,"thingMutable."+e,[]).splice(t,1)},savedChildThing:function(t){this.optsIn(["a lopu inventory generator","a lopu map"],this.getsmart(this.thingMutable,"names",[]))&&this.renderThingsOnMap()},addNewChildThing:function(){var t=this.genDefaultThing(),e=this.gosmart(this,"thingMutable.things",[]);this.limitMutable=this.limitMutable+1,e.push(t),this.updateThingLocation({thing:t,loc:"map"})},addNewProperty:function(){var t={names:["property"],owners:[this.entity._id],parents:[this.thingMutable._id],uuid:this.$uuid.v4()};this.propertiesLimitMutable=this.propertiesLimitMutable+1,this.gosmart(this,"thingMutable.properties",[]).push(t)},addNewValue:function(){if(this.getsmart(this,"thingMutable.type",void 0)){if("String"==this.childType)var t="new string";else t={names:["a lopu value"],owners:[this.entity._id],parents:[this.thingMutable._id],uuid:this.$uuid.v4(),type:this.childType};this.valueLimitMutable=this.valueLimitMutable+1,this.gosmart(this,"thingMutable."+this.getsmart(this,"thingMutable.type",void 0),[]).push(t)}},updateType:function(t){this.type=t},mapInventory:function(t,e,i){if("object"==(void 0===t?"undefined":A()(t))&&t.things){var n=!0,s=!1,o=void 0;try{for(var a,r=L()(t.things);!(n=(a=r.next()).done);n=!0){var h=a.value;t.thing&&(e[h.thing]=h,this.mapInventory(h,e[h.thing],i++))}}catch(t){s=!0,o=t}finally{try{!n&&r.return&&r.return()}finally{if(s)throw o}}}},mapList:function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"title",i=this,n=arguments[2],s=arguments[3];return new D.a(function(o,a){if(e){if(t){t.mapped&&"boolean"!=typeof t.mapped||i.$set(t,"mapped",{}),0==t.length&&(n&&i.getsmart(t,"mapped."+n,!1)||!n?o(!0):n?o(!1):o());for(var r=0;r<t.length;r++)if("string"!=typeof t[r])i.$set(t.mapped,t[r][e],t[r]),r==t.length-1&&(n&&i.getsmart(t,"mapped."+n,!1)||!n?o(!0):n?o(!1):o());else if(s){var h=i.funCounter;i.funCounter=i.funCounter+1,i.getThing({thing:t[r],clientId:i._uid,funCounter:h}),i.$options.sockets.giveThing=function(s){i._uid==s.clientId&&s.funCounter==h&&(i.$set(t,r.toString(),s.thing),i.$set(t.mapped,t[r][e],t[r])),r==t.length-1&&(n&&i.getsmart(t,"mapped."+n,!1)||!n?o(!0):n?o(!1):o())}}else r==t.length-1&&(n&&i.getsmart(t,"mapped."+n,!1)||!n?o(!0):n?o(!1):o())}}else a()})},mapThings:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"title",e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:this.gosmart(this,"thingMutable.things",[]);return this.mapList(e,t)},mapProperties:function(){return this.mapList(this.gosmart(this,"thingMutable.properties",[]),"title")},loadComments:function(){var t=this,e=(arguments.length>0&&void 0!==arguments[0]&&arguments[0],arguments.length>1&&void 0!==arguments[1]?arguments[1]:"all");this.optIn("comments-loaded")||"all"==e&&this.populateThings({rules:{title:{regex:!0,value:"-comments"}},returnPath:"things"}).then(function(){t.compileComments()})},compileComments:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:this.gosmart(this,"thingMutable.things",[]);t.mapped["all-comments"]||(t.push({title:"all-comments",things:[],parents:[this.thingMutable._id],owners:[],properties:[{title:"things render limit",Number:0,names:["a lopu client option"]},{title:"uniques","Array of Strings":["title"],type:"Array of Strings"}],uuid:this.$uuid.v4()}),this.mapList(t)),t.mapped["this lopus comments"]||(t.push({title:"this lopus comments",things:[],parents:[this.thingMutable._id],owners:[],properties:[{title:"things render limit",Number:5,names:["a lopu client option"]},{title:"uniques","Array of Strings":["title"],type:"Array of Strings"}],uuid:this.$uuid.v4()}),this.mapList(t));var e=!0,i=!1,n=void 0;try{for(var s,o=L()(t);!(e=(s=o.next()).done);e=!0){var a=s.value;a.title&&a.title.indexOf("comments")>=0&&"all-comments"!==a.title&&this.pushOpts(a.things,t.mapped["all-comments"].things)}}catch(t){i=!0,n=t}finally{try{!e&&o.return&&o.return()}finally{if(i)throw n}}this.pushOpt("comments-loaded")},populateThings:function(){var t=this,e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},i=e.things,n=void 0===i?this.gosmart(this,"thingMutable.things",[]):i,s=e.returnPath,o=void 0===s?"things":s,a=e.funCounter,r=void 0===a?this.funCounter:a,h=e.rules,l=void 0===h?void 0:h;return this.funCounter++,new D.a(function(e,i){t.$socket.emit("populateThings",{things:n,parentId:t.thingMutable._id||t.thingMutable.uuid||t._uid,returnPath:o,rules:l,funCounter:r,sort:"inception"}),t.$options.sockets.giveThings=function(i){t.isParent(i)&&i.funCounter==r&&t.setThings({options:i.things,list:t.gosmart(t,"thingMutable."+i.returnPath,[]),obj:!0,strings:!0}).then(function(){t.mapList(t.gosmart(t,"thingMutable."+i.returnPath,[])).then(function(){e()})})}})},populate:function(){var t=this,e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},i=e.things,n=void 0===i?this.gosmart(this,"thingMutable.things",[]):i,s=e.returnPath,o=void 0===s?"things":s,a=e.funCounter,r=void 0===a?this.funCounter:a,h=e.rules,l=void 0===h?void 0:h;return this.funCounter++,new D.a(function(e,i){t.$socket.emit("populateThings",{things:n,parentId:t.thingMutable._id||t.thingMutable.uuid||t._uid,returnPath:o,rules:l,funCounter:r,sort:"inception"});t.$options.sockets.giveThings=function(n){t.isParent(n)&&n.funCounter==r?t.setThings({options:n.things,list:t.gosmart(t,"thingMutable."+n.returnPath,[]),obj:!0,strings:!0}).then(function(){e()}).catch(function(){i()}):e()}})},locationInitialized:function(t){var e=this,i=new MapboxGeocoder({accessToken:mapboxgl.accessToken});this.thingMapGeocoder=i,t.addControl(i),this.thingMap=t,t.on("load",function(){t.addSource("things",{type:"geojson",data:e.thingMapFeatures}),e.updateGeoSearchValue(),e.listenForDragEvents(t)})},listenForDragEvents:function(t){var e,i=this;t.on("move",function(){clearTimeout(e),e=setTimeout(function(){i.updateGeoSearchValue()},500)})},updateThingLocation:function(){var t=this,e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},i=e.thing,n=void 0===i?this.thingMutable:i,s=e.loc,o=void 0===s?"user":s,a=e.overwrite,r=void 0===a||a;return new D.a(function(e,i){t.getsmart(n,"geojson",!1)?e(!1):"user"==o?navigator.geolocation&&(r||t.getsmart(n,"geojson",!0))?navigator.geolocation.getCurrentPosition(function(i){t.$set(n,"geojson",t.tryGeojson(i)),e(!0)},function(t){t&&console.error(t),e(!1)}):e(!1):"map"==o&&(r||t.getsmart(n,"geojson",!0))?t.optIn("locationSet")&&t.sameObj(n,t.thingMutable)?(t.popOpt("locationSet"),t.removeMarker(),e(!1)):t.updateGeoSearchValue(n).then(function(i){i?(n.geojson=i,t.pushOpt("locationSet"),t.optsIn(["a lopu inventory generator","a lopu map"],t.gosmart(t.thingMutable,"names",[]))?(t.sameObj(n,t.thingMutable)||t.pushThingFeature(n,"render"),e(!0)):(t.pushThingFeature(n,"render"),e(!0))):e(!1)}).catch(function(t){console.error(t),i(t)}):e(!1)})},thingMapboxCoords:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:this.thingMutable;return[this.findCoord("lng",t),this.findCoord("lat",t)]},thingLCoords:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:this.thingMutable;return[this.findCoord("lat",t),this.findCoord("lng",t)]},findCoord:function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:this.thingMutable;return"lng"==t?this.getsmart(e,"geojson.geometry.coordinates.0",this.getsmart(e,"geojson.coords.longitude",145.1794972)):"lat"==t?this.getsmart(e,"geojson.geometry.coordinates.1",this.getsmart(e,"geojson.coords.latitude",-37.9831522)):void 0},pushThingFeature:function(){var t=this,e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:this.thingMutable,i=arguments.length>1&&void 0!==arguments[1]&&arguments[1],n=this.getsmart(this.thingMapFeatures,"features",void 0);if(n){var s=this.thingToFeature(e);this.setThing({option:s,list:n,obj:!0,key:["properties.thing._id","properties.thing.uuid"],targets:["properties.thing","geometry"],keymatchtype:"broad",push:!0}).then(function(e){t.getsmart(t,"thingMap.getSource",!1)&&t.thingMap.getSource("things")&&t.thingMap.getSource("things").setData(t.thingMapFeatures),i&&t.renderFeatureMarker(e,n)})}},removeMarker:function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:this.gosmart(this,"thingMapFeatures.features",[]),i=arguments.length>2&&void 0!==arguments[2]?arguments[2]:this.thingMutable;if(t){var n=this.getsmart(e[t],"properties.el",void 0);n&&n.parentNode&&n.parentNode.removeChild(n)}else for(var s=0;s<e.length;s++)if(this.sameObj(this.getsmart(e[s],"properties.thing",void 0),i)){var o=e[s].properties.el;o&&o.parentNode&&o.parentNode.removeChild(o)}},renderFeatureMarker:function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:this.gosmart(this,"thingMapFeatures.features",[]);if(e&&e[t]&&this.thingMap){this.removeMarker(t,e);var i=document.createElement("div");i.className="marker";var n=document.createElement("img");i.appendChild(n);var s=this.getsmart(e[t],"properties.thing.description",this.getsmart(e[t],"properties.thing.uuid",void 0));if(s){var o=document.createTextNode(s);i.appendChild(o)}n.src="../static/svg/thingMarker.svg",e[t].properties.el=i,new mapboxgl.Marker(i,{offset:[0,-15]}).setLngLat(e[t].geometry.coordinates).addTo(this.thingMap)}},renderFeatureMarkers:function(){for(var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:this.gosmart(this,"thingMapFeatures.features",[]),e=0;e<t.length;e++)this.renderFeatureMarker(e,t)},thingToFeature:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:this.thingMutable;return{type:"Feature",geometry:{type:"Point",coordinates:this.thingMapboxCoords(t)},properties:{thing:this.thingCleaned(t)}}},updateGeoSearchValue:function(){var t=this;arguments.length>0&&void 0!==arguments[0]?arguments[0]:this.thingMutable;return new D.a(function(e,i){t.getMapCentreAddress().then(function(i){i&&(t.thingMapGeocoder._inputEl.value=i.place_name),e(i)}).catch(function(t){t&&console.error(t)})})},getMapCentreAddress:function(){var t=this;return new D.a(function(e,i){if(t.thingMap){var n=t.thingMap.getCenter().lng,s=t.thingMap.getCenter().lat;t.getAddressFromCoords(n,s).then(function(t){e(t)}).catch(function(t){i(t)})}else i()})},getAddressFromCoords:function(t,e){var i=this;return new D.a(function(n,s){var o="https://api.mapbox.com/geocoding/v5/mapbox.places/"+t+","+e+".json?access_token="+mapboxgl.accessToken+"&types=address";i.$http.get(o).then(function(t){n(t.body.features[0])}).catch(function(t){console.error(t),s(t)})})},autoCompleteAddress:function(t){var e=this;return new D.a(function(i,n){var s="https://api.mapbox.com/geocoding/v5/mapbox.places/"+t+".json?access_token="+mapboxgl.accessToken+"&types=address";e.$http.get(s).then(function(t){i(t.body.features[0])}).catch(function(t){console.error(t),n(t)})})},tryGeojson:function(t){return this.getsmart(t,"coords",void 0)&&this.getsmart(t,"coords.latitude",void 0)&&this.getsmart(t,"coords.longitude",void 0)?{center:[this.getsmart(t,"coords.longitude",145.179286),this.getsmart(t,"coords.latitude",-37.983109)],geometry:{coordinates:[this.getsmart(t,"coords.longitude",145.179286),this.getsmart(t,"coords.latitude",-37.983109)],type:"Point"}}:t},renderThingsOnMap:function(){var t=this,e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:this.gosmart(this.thingMutable,"things",[]);e&&this.convertListToFeatures(e).then(function(){t.renderFeatureMarkers()})},convertListToFeatures:function(){var t=this,e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:this.gosmart(this.thingMutable,"things",[]);return new D.a(function(i,n){if(e)for(var s=0;s<e.length;s++)t.pushThingFeature(e[s]),s==e.length-1&&i();else n()})}},watch:{"$store.state.entity":function(){this.entity=this.$store.state.entity},"$store.state.realms":function(){this.realms=this.$store.state.realms},"$store.state.thingTypes":function(){this.thingTypes=this.$store.state.thingTypes},"$store.state.thingNames":function(){this.thingNames=this.$store.state.thingNames},"$store.state.priceUnits":function(){this.priceUnits=this.$store.state.priceUnits},"$store.state.currencies":function(){this.currencies=this.$store.state.currencies},thing:function(){this.sameObj(this.thing,this.thingMutable)?this.sameObj(this.thing,this.thingMutable):(this.setsmart(this,"thingMutable",this.thing),this.create())},"thing.properties":function(){console.log("hmm"),this.sameObj(this.thing,this.thingMutable)&&this.getsmart(this.thing,"names",[]).includes("a lopu inventory generator")&&!this.optIn("gotten")&&this.optIn("regen lopu")&&(this.popOpt("regen lopu"),console.log("woo"),this.reinit())},thingMutable:function(){var t=this,e=this;this.thingMutable&&(this.mapThings(),this.resetDefaultThing(),this.mapProperties().then(function(e){t.resetDefaultThing(),t.updateOpts()}),setTimeout(function(){e.optIn("loading",e.getsmart(e,"thingMutable.names",[]))&&e.pushOpt("waiting-hidden",e.getsmart(e,"thingMutable.names",[]))},6e3),this.entity&&this.entity.inventory&&(this.entity.inventory._id==this.thingMutable._id&&void 0!==this.thingMutable._id||this.entity.inventory.uuid==this.thingMutable.uuid&&void 0!==this.thingMutable.uuid)&&this.$store.commit("entityInventorySet",this.thingMutable))},"thingMutable.properties.mapped.options.Array of Strings":function(){this.optIn("show inventory")?(this.popOpt("no-fetch",this.childOptions),this.pushOpt("fetch",this.childOptions),this.optIn("watched-inv")||this.addSlotsToInv(),this.pushOpt("watched-inv")):this.popOpt("watched-inv")},optionsMutable:function(){},parentOptions:function(){this.optIn("no-fetch",this.parentOptionsMutable)||this.optIn("fetched")||!this.optIn("fetch",this.parentOptionsMutable)||(this.popOpt("no-fetch"),this.create())}},props:{thing:{default:function(){return{description:void 0,names:["new"],uuid:this.$uuid.v4()}}},defaultThing:{default:function(){}},neighbours:{default:function(){return[]}},parentId:{},index:{},options:{type:Array,default:function(){return[]}},parentOptions:{type:Array,default:function(){return[]}},theme:{default:"reddit",type:String},fieldsDraft:{default:function(){}},requiredRealms:{default:function(){return[{realm:"all"}]}},limit:{type:Number,default:50},loadLimit:{type:Number,default:5},savesTo:{default:void 0},schema:{}},computed:{thingComputed:{get:function(){return this.thing||{description:"",parents:[this.parentId],names:["new"]}}},fieldsComputed:{get:function(){return this.fieldsDraft||{title:null,description:this.getsmart(this,"thingMutable.description",""),owners:[this.$store.state.entity._id],ownerAlias:this.$store.state.entity.username,realms:null,names:null,url:null,parents:this.getsmart(this,"thingMutable.parents",[])}}},value:{get:function(){var t=void 0;return this.type&&"string"==typeof this.type&&(0==this.type.indexOf("String")?t=this.thingMutable.String:0==this.type.indexOf("Thing")?t=this.thingMutable[this.type]:0==this.type.indexOf("Array")?t=this.thingMutable[this.type]:0==this.type.indexOf("Number")?t=this.thingMutable.Number:0==this.type.indexOf("Boolean")&&(t=this.thingMutable.Boolean)),t},set:function(t){if("string"==typeof t&&"string"==typeof this.type)if(0==this.type.indexOf("String"))this.$set(this.thingMutable,"String",t);else if(0==this.type.indexOf("Thing"))this.$set(this.thingMutable,this.type,t);else if(0==this.type.indexOf("Array"))this.$set(this.thingMutable,this.type,t);else if(0==this.type.indexOf("Number")){var e=parseInt(t);this.$set(this.thingMutable,"Number",e)}else 0==this.type.indexOf("Boolean")&&this.$set(this.thingMutable,"Boolean",t)}},valueString:{get:function(){var t="undefined";this.value;return this.type&&"string"==typeof this.type&&(0==this.type.indexOf("String")?t=this.getsmart(this,"thingMutable.String","undefined"):0==this.type.indexOf("Thing")?t=this.getsmart(this,"thingMutable."+this.type,"undefined").toString():0==this.type.indexOf("Array")?t=this.getsmart(this,"thingMutable."+this.type,"undefined").toString():0==this.type.indexOf("Number")?t=this.getsmart(this,"thingMutable.Number","undefined").toString():0==this.type.indexOf("Boolean")&&(t=this.getsmart(this,"thingMutable.Boolean","undefined").toString())),t}},valueShortRender:{get:function(){var t="undefined";this.value;return this.type&&"string"==typeof this.type&&(0==this.type.indexOf("String")?t=this.trunc(this.thingMutable.String)||"undefined":0==this.type.indexOf("Thing")?t="{"+(this.getsmart(this,"thingMutable."+this.type+".title",!1)||"thing")+"}":0==this.type.indexOf("Array")?t="[ "+this.getsmart(this,"thingMutable."+this.type+".length",0)+" ]":0==this.type.indexOf("Number")?t=this.getsmart(this,"thingMutable.Number","undefined").toString():0==this.type.indexOf("Boolean")&&(t=this.getsmart(this,"thingMutable.Boolean","undefined").toString())),t}},type:{get:function(){return this.thingMutable.type},set:function(t){this.$set(this.thingMutable,"type",t)}},typeString:{get:function(){return this.type}},childType:{get:function(){var t=void 0;return"string"==typeof this.type?this.optIn(0,[this.type.indexOf("Thing"),this.type.indexOf("Array")])&&(this.type.length>"Array".length||this.type.length>"Thing".length)&&(t=(t=this.type.split(" "))[t.length-1].replace(/s$/gi,"")):t=void 0,t}},thingDescriptionInputOptions:{get:function(){return{toolbar:{},placeholder:{text:"Start typing to add a description",hideOnClick:!1},targetBlank:!0}}},thingValueInputOptions:{get:function(){var t={toolbar:{},placeholder:{text:"Start typing to express your self",hideOnClick:!1},targetBlank:!0};return"string"==typeof this.getsmart(this.thingMutable,"type",void 0)&&0==this.getsmart(this.thingMutable,"type","").indexOf("Boolean")?t.placeholder.text="Enter either true or false, 0 or 1, yes or no":"string"==typeof this.getsmart(this.thingMutable,"type",void 0)&&0==this.getsmart(this.thingMutable,"type","").indexOf("Number")?t.placeholder.text='Enter any number you want, "500 million" works, so does "negative 900", as does "four times eight"':"string"==typeof this.getsmart(this.thingMutable,"type",void 0)&&0==this.getsmart(this.thingMutable,"type","").indexOf("String")&&(t.placeholder.text="Start typing to enter the text value"),t}},thingTitleInputOptions:{get:function(){return{toolbar:{},placeholder:{text:"Start typing to add a title",hideOnClick:!1},targetBlank:!0}}},editable:{get:function(){var t=this.getsmart(this,"thingMutable.owners",[]).filter(function(t){});return!(0!=t.length&&!this.optIn(this.getsmart(this,"entity._id",void 0),t))}}},components:{thing:rt}},it=function(){var t=this,e=t.$createElement,i=t._self._c||e;return!t.thingMutable||t.optIn("waiting-hidden",t.gosmart(t.thingMutable,"names",[]))||t.optIn("deleted",t.gosmart(t.thingMutable,"names",[]))?t._e():i("div",{staticClass:"thing",class:{"inventory-mode":t.optIn("inventory mode"),icon:t.optIn("icon"),wide:t.optIn("wide"),feed:t.optIn("feed"),comments:t.optIn("comments"),editing:t.optIn("editing"),"inventory-item":t.optIn("inventory item"),shallow:t.optIn("less padding"),debate:t.optIn("debate",t.gosmart(t.thingMutable,"names",[])),"a-lopu-root":t.optIn("a lopu root",t.gosmart(t.thingMutable,"names",[])),"show-options":t.optIn("show options"),"show-value":t.optIn("show value"),"tight-list-thing":t.optIn("tight list thing"),"inventory-slot":t.optIn("inventory slot"),"show-slots":t.optIn("show slots"),"in-slot":t.optIn("in slot"),"shrink-slot-icon":t.optIn("shrink slot icon"),"holo-mode":t.optIn("holo mode"),"a-lopu-map":t.optIn("a lopu map",t.gosmart(t.thingMutable,"names",[])),"put-inventory-first":t.optIn("put inventory first"),"put-properties-first":t.optIn("put properties first"),"put-value-first":t.optIn("put value first"),"put-options-first":t.optIn("put options first"),"put-inventory-last":t.optIn("put inventory last"),"put-properties-last":t.optIn("put properties last"),"put-value-last":t.optIn("put value last"),"put-options-last":t.optIn("put options last"),property:t.optIn("property",t.gosmart(t.thingMutable,"names",[])),value:t.optIn("a lopu value",t.gosmart(t.thingMutable,"names",[])),"no-options":t.optIn("no options")},style:t.getsmart(t.thingMutable,"properties.mapped.css.json",void 0),on:{click:function(e){if(e.target!==e.currentTarget)return null;t.popOpt("icon")}}},[i("div",{staticClass:"main-container"},[i("div",{staticClass:"main-positioner"},[!t.optIn("loading",t.gosmart(t.thingMutable,"names",[]))&&!t.optIn("hide title")&&(t.anyOptsIn(["show title","inventory mode"])||t.optIn("property",t.gosmart(t.thingMutable,"names",[])))||!t.optIn("hide title when icon")&&t.optIn("icon")?i("b",{staticClass:"vis title-container"}):t._e(),i("div",{directives:[{name:"show",rawName:"v-show",value:!t.optIn("loading",t.gosmart(t.thingMutable,"names",[]))&&!t.optIn("hide title")&&(t.anyOptsIn(["show title","inventory mode"])||t.optIn("property",t.gosmart(t.thingMutable,"names",[])))||!t.optIn("hide title when icon")&&t.optIn("icon"),expression:"\n          (\n            !optIn('loading', gosmart(thingMutable, 'names', [])) \n            && \n            !optIn('hide title')\n          ) \n          &&\n          (\n            anyOptsIn(['show title', 'inventory mode']) \n            || \n            optIn('property', gosmart(thingMutable, 'names', []))\n          )\n          ||\n          (\n            !optIn('hide title when icon')\n            &&\n            optIn('icon')\n          )\n        "}],staticClass:"option-container title-container",on:{click:function(e){t.showOptionsPerm(),t.popOpt("icon")}}},[i("div",{staticClass:"option-positioner title-positioner"},[t.optIn("editing")||t.optIn("loading",t.gosmart(t.thingMutable,"names",[]))?t._e():i("h4",{staticClass:"title option",attrs:{title:"title"},domProps:{innerHTML:t._s(t.thingMutable.title||t.getsmart(t.thingMutable,"names.0","Something")||t.thingMutable.properties&&t.thingMutable.properties.mapped&&t.thingMutable.properties.mapped.fbData&&t.thingMutable.properties.mapped.fbData.story)}}),i("div",{staticClass:"title option"},[t.optIn("edited")||t.optIn("editing")?i("medium-editor",{directives:[{name:"show",rawName:"v-show",value:t.optIn("editing")&&!t.optIn("loading",t.gosmart(t.thingMutable,"names",[])),expression:"\n                optIn('editing') \n                && \n                !optIn('loading', gosmart(thingMutable, 'names', []))\n                "}],attrs:{options:t.thingTitleInputOptions,"custom-tag":"h4",text:t.gosmart(t.thingMutable,"title","")},on:{edit:t.updateTitle}}):t._e()],1),t.optIn("property",this.gosmart(t.thingMutable,"names",[]))||t.optIn("is a typed lopu")?i("div",{staticClass:"type-container"},[i("div",{staticClass:"type-positioner"},[t.optIn("editing")?t._e():i("div",{staticClass:"type"},[t._v(t._s(t.typeString))]),t.anyOptsIn(["edited","editing"])?i("v-select",{directives:[{name:"show",rawName:"v-show",value:t.optIn("editing"),expression:"optIn('editing')"}],staticClass:"type",attrs:{pushTags:!1,value:"undefined"==t.typeString?void 0:t.typeString,inputStore:!0,options:t.types,taggable:!0,placeholder:"type"},on:{input:t.updateType}}):t._e()],1)]):t._e(),i("div",{directives:[{name:"show",rawName:"v-show",value:!t.optIn("icon")&&t.optIn("property",t.gosmart(t.thingMutable,"names",[]))&&!t.optIn("editing")&&!t.optIn("show value"),expression:"\n              !optIn('icon')\n              && \n              optIn('property', gosmart(thingMutable, 'names', []))\n              && \n              !optIn('editing') \n              && \n              !optIn('show value')\n              "}],staticClass:"value-render-container",attrs:{title:"type"}},[i("div",{staticClass:"value-render-positioner"},[i("div",{staticClass:"option value-render",domProps:{innerHTML:t._s(t.valueShortRender)}})])])])]),t.anyOptsIn(["inventory mode","icon"])||t.optIn("loading",t.gosmart(t.thingMutable,"names",[]))||t.optIn("hide name")||!t.optIn("show name")?t._e():i("b",{staticClass:"vis name-container"}),i("div",{directives:[{name:"show",rawName:"v-show",value:!t.anyOptsIn(["inventory mode","icon"])&&!t.optIn("loading",t.gosmart(t.thingMutable,"names",[]))&&!t.optIn("hide name")&&t.optIn("show name"),expression:"\n          !anyOptsIn(['inventory mode', 'icon']) \n          && \n          !optIn('loading', gosmart(thingMutable, 'names', [])) \n          && \n          !optIn('hide name') \n          && \n          optIn('show name')\n          "}],staticClass:"option-container name-container",on:{click:function(e){t.showOptionsPerm(),t.popOpt("icon")}}},[i("div",{staticClass:"option-positioner name-positioner"},[t.thingMutable.names&&t.thingMutable.names.length>0&&!t.optIn("inventory mode")?i("div",{staticClass:"name option"},[t._v(t._s("object"==typeof t.thingMutable.names[0]?t.thingMutable.names[0].name:t.thingMutable.names[0]))]):t.thingMutable.title?i("div",{staticClass:"name option",domProps:{innerHTML:t._s(t.thingMutable.title)}}):t.thingMutable.description?i("div",{staticClass:"name option",domProps:{innerHTML:t._s(t.thingMutable.description)}}):"string"==typeof t.thingMutable?i("div",{staticClass:"name option"},[t._v(t._s(t.thingMutable))]):i("div",{staticClass:"name option"},[t._v("Something")])])]),t.anyOptsIn(["loading","property","a lopu value"],t.gosmart(t.thingMutable,"names",[]))&&"Thing"!=t.getsmart(t.thingMutable,"type",void 0)&&!t.optIn("show description")||t.optIn("hide description")||t.optIn("icon")?t._e():i("b",{staticClass:"vis description-container"}),i("div",{directives:[{name:"show",rawName:"v-show",value:(!t.anyOptsIn(["loading","property","a lopu value"],t.gosmart(t.thingMutable,"names",[]))||"Thing"==t.getsmart(t.thingMutable,"type",void 0)||t.optIn("show description"))&&!t.optIn("hide description")&&!t.optIn("icon"),expression:"\n          (\n            (\n              !anyOptsIn(['loading', 'property', 'a lopu value'], gosmart(thingMutable, 'names', []))\n              ||\n              getsmart(thingMutable, 'type', undefined) == 'Thing'\n            )\n            || \n            optIn('show description')\n          ) \n          && \n          !optIn('hide description')\n          &&\n          !optIn('icon')\n        "}],staticClass:"option-container description-container",on:{click:function(e){t.showOptionsPerm(),t.popOpt("icon")}}},[i("div",{staticClass:"option-positioner description-positioner"},[t.optIn("editing")||t.optIn("icon")||t.optIn("loading",t.gosmart(t.thingMutable,"names",[]))?t._e():i("p",{staticClass:"description option",attrs:{title:"description"},domProps:{innerHTML:t._s(t.getsmart(t.thingMutable,"description",void 0)?t.thingMutable.description:t.getsmart(t.thingMutable,"properties.mapped.fbData.story",void 0)||"sup?")}}),t.optIn("edited")||t.optIn("editing")?i("medium-editor",{directives:[{name:"show",rawName:"v-show",value:t.optIn("editing")&&!t.optIn("icon")&&!t.optIn("loading",t.gosmart(t.thingMutable,"names",[])),expression:"optIn('editing') && !optIn('icon') && !optIn('loading', gosmart(thingMutable, 'names', []))"}],staticClass:"option",class:{description:!0},attrs:{options:t.thingDescriptionInputOptions,"custom-tag":"p",text:t.gosmart(t.thingMutable,"description","")},on:{edit:t.updateDescription}}):t._e()],1)]),t.optIn("loading",t.gosmart(t.thingMutable,"names",[]))?i("b",{staticClass:"vis status-container"}):t._e(),i("div",{directives:[{name:"show",rawName:"v-show",value:t.optIn("loading",t.gosmart(t.thingMutable,"names",[])),expression:"optIn('loading', gosmart(thingMutable, 'names', []))"}],staticClass:"option-container status-container"},[i("div",{staticClass:"option-positioner status-positioner"},[i("div",{staticClass:"status"},[i("icon",{attrs:{name:"spinner",pulse:"pulse"}})],1)])]),t.optIn("realms")?i("b",{staticClass:"vis realms-container"}):t._e(),i("div",{directives:[{name:"show",rawName:"v-show",value:t.optIn("realms"),expression:"optIn('realms')"}],staticClass:"option-container realms-container",class:{vis:t.optIn("realms")},on:{click:function(e){t.showOptionsPerm(),t.popOpt("icon")}}},[t.optIn("realms")?i("div",{staticClass:"option-positioner"},[i("div",{staticClass:"option pill realms"},[t.optIn("editing")?t._e():i("div",{staticClass:"values"},t._l(t.thingMutable.realms,function(e){return i("div",{staticClass:"value"},[t._v(t._s(e))])})),i("v-select",{directives:[{name:"show",rawName:"v-show",value:t.optIn("editing"),expression:"optIn('editing')"}],attrs:{pushTags:!0,multiple:"multiple",taggable:"taggable",options:t.realms,placeholder:"realms"},on:{click:t.showOptionsPerm},model:{value:t.thingMutable.realms,callback:function(e){t.$set(t.thingMutable,"realms",e)},expression:"thingMutable.realms"}})],1)]):t._e()]),t.optIn("names")?i("b",{staticClass:"vis names-container"}):t._e(),i("div",{directives:[{name:"show",rawName:"v-show",value:t.optIn("names"),expression:"optIn('names')"}],staticClass:"option-container names-container",class:{vis:t.optIn("names")},on:{click:function(e){t.showOptionsPerm(),t.popOpt("icon")}}},[t.optIn("names")?i("div",{staticClass:"option-positioner"},[i("div",{staticClass:"option pill thingNames"},[t.optIn("editing")?t._e():i("div",{staticClass:"value"},[t._v(t._s(t.thingMutable.thing))]),i("v-select",{directives:[{name:"show",rawName:"v-show",value:t.optIn("editing"),expression:"optIn('editing')"}],attrs:{pushTags:!0,taggable:"taggable",multiple:"multiple",returnLabeledValues:!0,options:t.thingNames,placeholder:"thing names"},on:{click:t.showOptionsPerm},model:{value:t.thingMutable.names,callback:function(e){t.$set(t.thingMutable,"names",e)},expression:"thingMutable.names"}})],1)]):t._e()]),t.optIn("privacy")?i("b",{staticClass:"vis privacy-container"}):t._e(),i("div",{directives:[{name:"show",rawName:"v-show",value:t.optIn("privacy"),expression:"optIn('privacy')"}],staticClass:"option-container privacy-container",class:{vis:t.optIn("privacy")},on:{click:function(e){t.showOptionsPerm(),t.popOpt("icon")}}},[t.optIn("privacy")?i("div",{staticClass:"option-positioner"},[i("div",{staticClass:"option pill privacy"},[t.optIn("editing")?t._e():i("div",{staticClass:"value"},[t._v(t._s(t.thingMutable.thing))]),i("v-select",{directives:[{name:"show",rawName:"v-show",value:t.optIn("editing"),expression:"optIn('editing')"}],attrs:{pushTags:!0,taggable:"taggable",multiple:"multiple",options:t.thingNames,placeholder:"these eyes only"},on:{click:t.showOptionsPerm},model:{value:t.thingMutable.privacy,callback:function(e){t.$set(t.thingMutable,"privacy",e)},expression:"thingMutable.privacy"}})],1)]):t._e()]),t.optIn("prices")?i("b",{staticClass:"vis contracts-container"}):t._e(),i("div",{directives:[{name:"show",rawName:"v-show",value:t.optIn("prices"),expression:"optIn('prices')"}],staticClass:"option-container contracts-container",class:{vis:t.optIn("prices")},on:{click:function(e){t.showOptionsPerm(),t.popOpt("icon")}}},[t.optIn("prices")?i("div",{staticClass:"option-positioner",on:{click:t.showOptionsPerm}},[i("div",{staticClass:"option pill contract"},[[i("div",{staticClass:"label-group"},[i("div",{staticClass:"label"},[t._v("costs")]),t.optIn("editing")?i("div",{staticClass:"label price-add",on:{click:t.addPrice}},[t._v("+")]):t._e()]),t.optIn("editing")?t.optIn("editing")?i("div",{staticClass:"contract-list"},t._l(t.thingMutable.contract,function(e,n){return i("div",{staticClass:"price"},[i("v-select",{directives:[{name:"show",rawName:"v-show",value:t.optIn("editing"),expression:"optIn('editing')"}],staticClass:"source-select",attrs:{inputStore:!0,options:t.currencies,placeholder:"payee"},model:{value:e.source,callback:function(i){t.$set(e,"source",i)},expression:"price.source"}}),i("v-select",{directives:[{name:"show",rawName:"v-show",value:t.optIn("editing"),expression:"optIn('editing')"}],staticClass:"currency-select",attrs:{inputStore:!0,options:t.currencies,placeholder:"thing"},model:{value:e.thing,callback:function(i){t.$set(e,"thing",i)},expression:"price.thing"}}),i("div",{staticClass:"denominator"},[t._v("$")]),i("v-select",{directives:[{name:"show",rawName:"v-show",value:t.optIn("editing"),expression:"optIn('editing')"}],staticClass:"ammount-select",attrs:{inputStore:!0,pushTags:!0,taggable:"taggable",options:t.realms,placeholder:"amount"},model:{value:e.amount,callback:function(i){t.$set(e,"amount",i)},expression:"price.amount"}}),i("div",{staticClass:"signifier"},[t._v("per")]),i("v-select",{directives:[{name:"show",rawName:"v-show",value:t.optIn("editing"),expression:"optIn('editing')"}],staticClass:"multiplier-select",attrs:{inputStore:!0,pushTags:!0,taggable:"taggable",options:t.realms,placeholder:"amount"},model:{value:e.multiplier,callback:function(i){t.$set(e,"multiplier",i)},expression:"price.multiplier"}}),i("v-select",{directives:[{name:"show",rawName:"v-show",value:t.optIn("editing"),expression:"optIn('editing')"}],staticClass:"unit-select",attrs:{inputStore:!0,options:t.priceUnits,placeholder:"unit"},model:{value:e.unit,callback:function(i){t.$set(e,"unit",i)},expression:"price.unit"}}),i("v-select",{directives:[{name:"show",rawName:"v-show",value:t.optIn("editing"),expression:"optIn('editing')"}],staticClass:"destination-select",attrs:{inputStore:!0,options:t.currencies,placeholder:"receiver"},model:{value:e.destination,callback:function(i){t.$set(e,"destination",i)},expression:"price.destination"}}),i("div",{staticClass:"action",on:{click:function(e){t.removePrice(n)}}},[i("icon",{attrs:{name:"remove"}})],1)],1)})):t._e():i("div",{staticClass:"values"},t._l(t.thingMutable.contract,function(e){return i("div",{staticClass:"value"},[t._v(t._s(e.fiat)+" per "+t._s(e.multipler)+" "+t._s(e.unit)+"'s")])}))]],2)]):t._e()]),t.anyOptsIn(["show map","location"])?i("b",{staticClass:"vis location-container"}):t._e(),i("div",{directives:[{name:"show",rawName:"v-show",value:t.anyOptsIn(["show map","location"]),expression:"anyOptsIn(['show map', 'location'])"}],staticClass:"option-container location-container",class:{vis:t.anyOptsIn(["show map","location"])}},[t.anyOptsIn(["show map","location","location rendered"])?i("div",{staticClass:"option-positioner"},[i("div",{staticClass:"option location"},[i("div",{staticClass:"map-container"},[i("div",{staticClass:"map-positioner"},[i("mapbox",{attrs:{"access-token":"pk.eyJ1IjoibG9wdSIsImEiOiJjamFydTVhc3QxNjRtMzNwaHEzNmJ1bW0zIn0.Wm7f-1eyd7K5AT3WN7fRDw","map-options":{style:"mapbox://styles/lopu/cjaru8bau2y1x2rp9ks1fk973",center:t.thingMapboxCoords(),zoom:15.6,container:"map"+t.$uuid.v4()},"geolocate-control":{show:!0,position:"top-left"}},on:{"map-init":t.locationInitialized}}),i("div",{staticClass:"overlay-container"},[i("div",{staticClass:"overlay-positioner"},[t.optIn("locationSet")?t._e():i("div",{staticClass:"custom-pin-container"},[t._m(0)])])])],1)]),i("div",{staticClass:"btn-container",class:{"courier-job":t.optIn("courier job",t.thingMutable.names),"courier-map":t.optIn("courier map",t.thingMutable.names)}},[i("div",{staticClass:"btn-positioner"},[t.optIn("a lopu map",t.gosmart(t.thingMutable,"names",[]))&&!t.optIn("locationSet")?i("div",{staticClass:"wide-btn",on:{click:t.addNewChildThing}},[i("div",{staticClass:"wide-btn-content"},[t._v("Add something here")])]):t.optIn("a lopu map",t.gosmart(t.thingMutable,"names",[]))&&t.optIn("locationSet")?i("div",{staticClass:"wide-btn",on:{click:function(e){t.popOpt("locationSet")}}},[i("div",{staticClass:"wide-btn-content"},[t._v("Add something else")])]):t.optIn("locationSet")?t.optIn("locationSet")?i("div",{staticClass:"wide-btn",on:{click:function(e){t.updateThingLocation({loc:"map"})}}},[i("div",{staticClass:"wide-btn-content"},[t._v("New Location")])]):t._e():i("div",{staticClass:"wide-btn",on:{click:function(e){t.updateThingLocation({loc:"map"})}}},[i("div",{staticClass:"wide-btn-content"},[t._v("Set Location")])])])])])]):t._e()]),t.optIn("postas")?i("b",{staticClass:"vis postas-container"}):t._e(),i("div",{directives:[{name:"show",rawName:"v-show",value:t.optIn("postas"),expression:"optIn('postas')"}],staticClass:"option-container postas-container",class:{vis:t.optIn("postas")},on:{click:function(e){t.showOptionsPerm(),t.popOpt("icon")}}},[t.optIn("postas")?i("div",{staticClass:"option-positioner"},[i("div",{staticClass:"option pill postas"},[i("v-select",{attrs:{inputStore:!0,placeholder:"post as",taggable:!0,pushTags:!0,options:t.alterEgos,value:t.thingMutable.ownerAlias},model:{value:t.thingMutable.ownerAlias,callback:function(e){t.$set(t.thingMutable,"ownerAlias",e)},expression:"thingMutable.ownerAlias"}})],1)]):t._e()]),t.feedback||t.getsmart(t.messages,"length",0)?i("b",{staticClass:"vis feedback-container"}):t._e(),i("div",{directives:[{name:"show",rawName:"v-show",value:t.feedback||t.getsmart(t.messages,"length",0),expression:"feedback || getsmart(messages, 'length', 0)"}],staticClass:"option-container feedback-container",class:{vis:t.feedback}},[i("div",{staticClass:"option-positioner"},[t.feedback?i("div",{staticClass:"option feedback"},[i("div",{staticClass:"msg"},[t._v(t._s(t.feedback.message)),"delete"!==t.feedback.type?i("div",{staticClass:"action",on:{click:function(e){t.setFeedback()}}},[t._v("Thank you")]):t._e(),"delete"==t.feedback.type?i("div",{staticClass:"action",on:{click:function(e){t.deleteThing(!0)}}},[t._v("Yes")]):t._e()])]):t._e(),t.messages?i("div",{staticClass:"option feedback-list"},[i("div",{staticClass:"feedback-list-container"},[i("div",{staticClass:"feedback-list-positioner"},[i("div",{staticClass:"feedback-list option-messages inventory-messages"},[t._l(t.messages,function(e,n){return[i("div",{staticClass:"message"},[i("div",{staticClass:"contents"},[i("div",{staticClass:"from"},[t._v(t._s(e.from))]),i("div",{staticClass:"text"},[t._v(t._s(e.text))])]),i("div",{staticClass:"action",on:{click:function(e){t.removeMessage(n)}}},[t._v("read")])])]})],2)])])]):t._e()])]),t.optIn("show inventory")&&!t.optIn("icon")||t.optIn("feed")?i("b",{staticClass:"vis inventory-container"}):t._e(),i("div",{directives:[{name:"show",rawName:"v-show",value:t.optIn("show inventory")&&!t.optIn("icon")||t.optIn("feed"),expression:"(optIn('show inventory') && !optIn('icon')) || optIn('feed')"}],ref:"inventory-option",staticClass:"option-container inventory-container",class:{vis:t.optIn("show inventory")&&!t.optIn("icon")||t.optIn("feed")},on:{click:function(e){t.showOptionsPerm(),t.popOpt("icon")}}},[i("div",{staticClass:"option-positioner"},[i("div",{staticClass:"option inventory"},[i("div",{ref:"inventory-list-container",staticClass:"thing-list-container inventory-list-container"},[i("div",{ref:"inventory-list",staticClass:"thing-list inventory-list",class:{"show-slots":t.optIn("show slots")},style:{width:t.invGrid.invWidth?t.invGrid.invWidth+"px":void 0}},[t._l(t.getsmart(t.thingMutable,"things",[]),function(e,n){return[n<(t.limitMutable==t.getsmart(t.thingMutable,"things.length",5)+1?t.limitMutable:t.limitMutable-1)?i("b"):t._e(),t.optIn("slotted")?i("div",{directives:[{name:"show",rawName:"v-show",value:n<(t.limitMutable==t.getsmart(t.thingMutable,"things.length",5)+1?t.limitMutable:t.limitMutable-1),expression:"index < ((limitMutable == getsmart(thingMutable, 'things.length', 5)+1) ? limitMutable : limitMutable-1)"}],staticClass:"slot-container inventory-slot-container",style:{width:t.optIn("icon",t.getsmart(e,"properties.mapped.options.Array of Strings",!1))&&t.optIn("slotted",t.getsmart(t.thingMutable,"properties.mapped.options.Array of Strings",!1))?t.invGrid.width+"px":"auto",height:t.optIn("icon",t.getsmart(e,"properties.mapped.options.Array of Strings",!1))&&t.optIn("slotted",t.getsmart(t.thingMutable,"properties.mapped.options.Array of Strings",!1))?t.invGrid.width+"px":"auto",padding:t.optIn("show slots")?t.invGrid.padding:void 0}},[i("div",{staticClass:"slot-positioner",style:{}},["debug"!==e.title&&t.anyOptsIn(["keep inventory loaded","show inventory"])&&!t.optIn("dont load children")&&e&&!t.optIn("inventory slot",e.names)?i("thing",{key:e._id||e.uuid||e,style:{order:t.optIn("put things first")&&!t.optIn("new",e.names)?2:t.optIn("put things last")&&!t.optIn("new",e.names)?4:t.optIn("put new things first")&&t.optIn("new",e.names)?2:t.optIn("put new things last")&&t.optIn("new",e.names)?4:3},attrs:{thing:e,index:n,parentId:t.thingMutable._id||t.thingMutable.uuid||t._uid,schema:t.getsmart(t.thingMutable,"properties.mapped.things schema",void 0),parentOptions:t.childOptions},on:{remove:function(e){t.deleteChildThing(n,"things")},saved:function(e){t.savedChildThing(n)}}}):t._e()],1)]):!t.optIn("slotted")&&"debug"!==e.title&&t.anyOptsIn(["keep inventory loaded","show inventory"])&&!t.optIn("dont load children")&&e&&!t.optIn("inventory slot",e.names)&&n<(t.limitMutable==t.getsmart(t.thingMutable,"things.length",5)+1?t.limitMutable:t.limitMutable-1)?i("thing",{key:e._id||e.uuid||e,style:{order:t.optIn("put things first")&&!t.optIn("new",e.names)?2:t.optIn("put things last")&&!t.optIn("new",e.names)?4:t.optIn("put new things first")&&t.optIn("new",e.names)?2:t.optIn("put new things last")&&t.optIn("new",e.names)?4:3},attrs:{thing:e,index:n,parentId:t.thingMutable._id||t.thingMutable.uuid||t._uid,schema:t.getsmart(t.thingMutable,"properties.mapped.things schema",void 0),parentOptions:t.childOptions},on:{remove:function(e){t.deleteChildThing(n,"things")},saved:function(e){t.savedChildThing(n)}}}):t._e()]}),t.optIn("slotted")?i("div",{directives:[{name:"show",rawName:"v-show",value:!t.optIn("not-addable")&&t.anyOptsIn(["addable with template","template adder"]),expression:"!optIn('not-addable') && anyOptsIn(['addable with template', 'template adder'])"}],staticClass:"slot-container inventory-slot-container",class:{vis:!t.optIn("not-addable")&&t.anyOptsIn(["addable with template","template adder"])},style:{width:t.invGrid.width&&t.optIn("slotted")?t.invGrid.width+"px":"auto",height:t.invGrid.width&&t.optIn("slotted")?t.invGrid.width+"px":"auto",padding:t.optIn("show slots")?t.invGrid.padding:void 0}},[i("div",{staticClass:"slot-positioner"},[!t.optIn("not-addable")&&t.anyOptsIn(["addable with template","template adder"])?i("thing",{staticClass:"in-slot",attrs:{thing:t.defaultThingMutable,savesTo:t.savesToMutable},on:{saved:function(e){t.resetDefaultThing()}}}):t._e()],1)]):!t.optsIn(["not-addable","slotted"])&&t.anyOptsIn(["addable with template","template adder"])?i("thing",{directives:[{name:"show",rawName:"v-show",value:!t.optIn("not-addable")&&t.anyOptsIn(["addable with template","template adder"]),expression:"!optIn('not-addable') && anyOptsIn(['addable with template', 'template adder'])"}],attrs:{thing:t.defaultThingMutable,savesTo:t.savesToMutable},on:{saved:function(e){t.resetDefaultThing()}}}):t._e(),t.optIn("slotted")?i("div",{directives:[{name:"show",rawName:"v-show",value:!t.anyOptsIn(["not-addable","no adder button","hide addable button"]),expression:"!anyOptsIn(['not-addable', 'no adder button', 'hide addable button'])"}],staticClass:"slot-container inventory-slot-container",class:{"put-addable-first":t.optIn("put addable first"),"put-addable-last":t.optIn("put addable last"),wide:t.optIn("wide-adder")||t.optIn("feed"),rounded:t.optIn("rounded"),vis:!t.anyOptsIn(["not-addable","no adder button","hide addable button"])},style:{width:t.invGrid.width&&t.optIn("slotted")?t.invGrid.width+"px":"auto",height:t.invGrid.width&&t.optIn("slotted")?t.invGrid.width+"px":"auto",padding:t.optIn("show slots")?t.invGrid.padding:void 0}},[i("div",{staticClass:"slot-positioner"},[i("div",{staticClass:"thing meta-thing add-new in-slot",class:{"shrink-slot-icon":t.optIn("shrink slot icons"),icon:!t.optIn("wide adder")},on:{click:t.addNewChildThing}},[i("div",{staticClass:"meta-thing-square"},[i("icon",{attrs:{name:"plus"}})],1)])])]):t.optIn("slotted")?t._e():i("div",{directives:[{name:"show",rawName:"v-show",value:!t.anyOptsIn(["not-addable","no adder button","hide addable button"]),expression:"!anyOptsIn(['not-addable', 'no adder button', 'hide addable button'])"}],staticClass:"thing meta-thing add-new",class:{"put-addable-first":t.optIn("put addable first"),"put-addable-last":t.optIn("put addable last"),icon:!t.optIn("wide adder"),wide:t.optIn("wide-adder")||t.optIn("feed"),rounded:t.optIn("rounded"),vis:!t.anyOptsIn(["not-addable","no adder button","hide addable button"])},on:{click:t.addNewChildThing}},[i("div",{staticClass:"meta-thing-square"},[i("icon",{attrs:{name:"plus"}})],1)]),t.optIn("slotted")?i("div",{directives:[{name:"show",rawName:"v-show",value:t.getsmart(t.gosmart(t.thingMutable,"things",[]),"length",0)>t.limitMutable,expression:"getsmart(gosmart(thingMutable, 'things', []), 'length', 0) > limitMutable"}],staticClass:"slot-container",class:{"put-addable-first":t.optIn("put-thing-loader-first"),"put-addable-last":t.optIn("put-thing-loader-last"),wide:(t.optIn("wide")||t.optIn("feed"))&&!t.optIn("normal-loader"),rounded:t.optIn("rounded"),vis:t.thingMutable.things&&t.getsmart(t.thingMutable,"things.length",5)>0&&t.limitMutable<t.getsmart(t.thingMutable,"things.length",5)},style:{width:t.invGrid.width&&t.optIn("slotted")?t.invGrid.width+"px":"auto",height:t.invGrid.width&&t.optIn("slotted")?t.invGrid.width+"px":"auto",padding:t.optIn("show slots")?t.invGrid.padding:void 0},on:{click:function(e){t.limitMutable=t.getsmart(t.thingMutable,"things.length",5)+1}}},[i("div",{staticClass:"slot-positioner"},[i("div",{staticClass:"thing meta-thing load-next in-slot",class:{"shrink-slot-icon":t.optIn("shrink slot icons"),icon:!t.optIn("wide adder")}},[i("div",{staticClass:"meta-thing-square"},[i("div",{staticClass:"name"},[t._v("Load "+t._s(t.getsmart(t.thingMutable,"things.length",5)-t.limitMutable)+" more "+t._s(t.thingMutable.title?t.thingMutable.title.replace(/.*-/,""):""))])])])])]):t.optIn("slotted")?t._e():i("div",{directives:[{name:"show",rawName:"v-show",value:t.getsmart(t.gosmart(t.thingMutable,"things",[]),"length",0)>t.limitMutable,expression:"getsmart(gosmart(thingMutable, 'things', []), 'length', 0) > limitMutable"}],staticClass:"thing meta-thing load-next",class:{"put-addable-first":t.optIn("put-thing-loader-first"),"put-addable-last":t.optIn("put-thing-loader-last"),wide:(t.optIn("wide")||t.optIn("feed"))&&!t.optIn("normal-loader"),rounded:t.optIn("rounded"),vis:t.thingMutable.things&&t.getsmart(t.thingMutable,"things.length",5)>0&&t.limitMutable<t.getsmart(t.thingMutable,"things.length",5),"shrink-slot-icon":t.optIn("shrink slot icons"),icon:!t.optIn("wide adder")},on:{click:function(e){t.limitMutable=t.getsmart(t.thingMutable,"things.length",5)+1}}},[i("div",{staticClass:"meta-thing-square"},[i("div",{staticClass:"name"},[t._v("Load "+t._s(t.getsmart(t.thingMutable,"things.length",5)-t.limitMutable)+" more "+t._s(t.thingMutable.title?t.thingMutable.title.replace(/.*-/,""):""))])])])],2)]),i("div",{staticClass:"option-messages inventory-messages"},[t._l(t.messages,function(e,n){return[i("div",{staticClass:"message"},[i("div",{staticClass:"contents"},[i("div",{staticClass:"from"},[t._v(t._s(e.from))]),i("div",{staticClass:"text"},[t._v(t._s(e.text))])]),i("div",{staticClass:"action",on:{click:function(e){t.removeMessage(n)}}},[t._v("read")])])]})],2)])])]),t.optIn("show-comments")&&!t.optIn("icon")?i("b",{staticClass:"vis comments-container"}):t._e(),i("div",{directives:[{name:"show",rawName:"v-show",value:t.optIn("show-comments")&&!t.optIn("icon"),expression:"(optIn('show-comments') && !optIn('icon'))"}],staticClass:"option-container comments-container",class:{vis:t.optIn("show-comments")&&!t.optIn("icon")}},[i("div",{staticClass:"option-positioner comments-sizer"},[i("div",{staticClass:"option comments"},[!t.optIn("dont-load-comments")&&t.getsmart(t.thingMutable,"things.mapped.all-comments",!1)?i("thing",{key:t.getsmart(t.thingMutable,"things.mapped.all-comments",void 0),style:{order:t.optIn("put things first")&&!t.optIn("new",t.thing.names)?2:t.optIn("put things last")&&!t.optIn("new",t.thing.names)?4:t.optIn("put new things first")&&t.optIn("new",t.thing.names)?2:t.optIn("put new things last")&&t.optIn("new",t.thing.names)?4:3},attrs:{thing:t.getsmart(t.thingMutable,"things.mapped.all-comments",void 0),index:t.index,parentOptions:["no options","no context","feed","comments","addable","addable with template","shallow adders","dont load children children children"],savesTo:[t.gosmart(t.thingMutable,"things.mapped.this lopus comments",{parents:[t.thingMutable],title:"this lopus comments",properties:[{title:"uniques",list:"title"}],uuid:t.$uuid.v4()})]}}):t._e()],1)])]),!t.optIn("show options")||t.optIn("loading",t.getsmart(t.thingMutable,"names",[]))||t.anyOptsIn(["icon","no options"])?t._e():i("b",{staticClass:"vis icons-container"}),i("div",{directives:[{name:"show",rawName:"v-show",value:t.optIn("show options")&&!t.optIn("loading",t.getsmart(t.thingMutable,"names",[]))&&!t.anyOptsIn(["icon","no options"]),expression:"\n          optIn('show options')\n          &&\n          !optIn('loading', getsmart(thingMutable, 'names', []))\n          &&\n          !anyOptsIn(['icon', 'no options'])\n          "}],staticClass:"option-container icons-container",class:{vis:t.optIn("show options")&&!t.optIn("loading",t.getsmart(t.thingMutable,"names",[]))&&!t.anyOptsIn(["icon","no options"])},style:{order:55}},[i("div",{staticClass:"option-positioner"},[t.optIn("show options icons")?i("div",{staticClass:"option delete",attrs:{title:"delete"}},[i("div",{staticClass:"label action",on:{click:function(e){t.deleteThing(!1)}}},[i("icon",{attrs:{name:"trash"}})],1)]):t._e(),t.optIn("show options icons")?i("div",{staticClass:"option realms",attrs:{title:"realms"}},[i("div",{staticClass:"action",on:{click:function(e){t.toggleOpt("realms")}}},[i("icon",{attrs:{name:"connectdevelop"}})],1)]):t._e(),t.optIn("show options icons")?i("div",{staticClass:"option names",attrs:{title:"names"}},[i("div",{staticClass:"action",on:{click:function(e){t.toggleOpt("names")}}},[i("icon",{attrs:{name:"diamond"}})],1)]):t._e(),t.optIn("show options icons")?i("div",{staticClass:"option replies",attrs:{title:"comments"}},[i("div",{staticClass:"action",on:{click:function(e){t.toggleOpt("show-comments"),t.loadComments()}}},[i("icon",{attrs:{name:"comments"}})],1)]):t._e(),t.optIn("show options icons")?i("div",{staticClass:"option fork",attrs:{title:"fork"}},[i("div",{staticClass:"action",on:{click:t.forkThing}},[i("icon",{attrs:{name:"code-fork"}})],1)]):t._e(),t.optIn("show options icons")?i("div",{staticClass:"option reference",attrs:{title:"reference"}},[i("div",{staticClass:"action",on:{click:t.referenceThing}},[i("icon",{attrs:{name:"sitemap"}})],1)]):t._e(),t.optIn("show options icons")?i("div",{staticClass:"option boxup",attrs:{title:"collapse"}},[i("div",{staticClass:"action",on:{click:function(e){t.toggleOpt("icon")}}},[i("icon",{attrs:{name:"cube"}})],1)]):t._e(),t.optIn("show options icons")?i("div",{staticClass:"option showinv",attrs:{title:"inventory"}},[i("div",{staticClass:"action",on:{click:function(e){t.toggleOpt("show inventory"),t.popOpt("dont load children")}}},[i("icon",{attrs:{name:"cubes"}})],1)]):t._e(),t.optIn("show options icons")?i("div",{staticClass:"option showproperties",attrs:{title:"properties"}},[i("div",{staticClass:"action",on:{click:function(e){t.toggleOpt("show properties")}}},[i("icon",{attrs:{name:"flask"}})],1)]):t._e(),t.anyOptsIn(["property","a lopu value"],t.gosmart(t.thingMutable,"names",[]))&&t.optIn("show options icons")?i("div",{staticClass:"option show-value",attrs:{title:"value"}},[i("div",{staticClass:"action",on:{click:function(e){t.toggleOpt("show value")}}},[i("icon",{attrs:{name:"balance-scale"}})],1)]):t._e(),t.optIn("show options icons")?i("div",{staticClass:"option title",attrs:{title:"title"}},[i("div",{staticClass:"action",on:{click:function(e){t.toggleOpt("show title"),t.popOpt("hide title")}}},[i("icon",{attrs:{name:"envira"}})],1)]):t._e(),t.optIn("show options icons")?i("div",{staticClass:"option description",attrs:{title:"description"}},[i("div",{staticClass:"action",on:{click:function(e){t.toggleOpt("show description"),t.popOpt("hide description")}}},[i("icon",{attrs:{name:"book"}})],1)]):t._e(),t.optIn("show options icons")&&!t.optIn("editing")&&t.thingMutable.realms&&t.thingMutable.realms.indexOf("statement")>=0?i("div",{staticClass:"option statement",attrs:{title:"vote"}},[i("div",{staticClass:"action",attrs:{title:"up vote"}},[i("icon",{attrs:{name:"level-up",flip:"horizontal"}})],1),i("div",{staticClass:"action",attrs:{title:"down vote"}},[i("icon",{attrs:{name:"level-down"}})],1)]):t._e(),t.optIn("show options icons")?i("div",{staticClass:"option url",attrs:{title:"link"}},[i("div",{staticClass:"action link"},[i("div",{staticClass:"icon-wrapper"},[i("icon",{attrs:{name:"paperclip",flip:"vertical"}})],1),i("div",{directives:[{name:"show",rawName:"v-show",value:t.optIn("editing"),expression:"optIn('editing')"}],staticClass:"input-popup-positioner"},[t._m(1),t._m(2)])])]):t._e(),t.optIn("show options icons")?i("div",{staticClass:"option commerce",attrs:{title:"price"}},[(t.optIn("editing"),i("div",{staticClass:"action",on:{click:function(e){t.toggleOpt("prices")}}},[i("icon",{attrs:{name:"credit-card"}})],1))]):t._e(),t.optIn("show options icons")?i("div",{staticClass:"option close-options",attrs:{title:"hide options"}},[i("div",{staticClass:"label action",on:{click:t.hideOptions}},[i("icon",{attrs:{name:"angle-double-up"}})],1)]):t._e(),t.optIn("show options icons")?i("div",{staticClass:"option map",attrs:{title:"location"}},[i("div",{staticClass:"label action",on:{click:function(e){t.toggleOpt("location"),t.pushOpt("location rendered")}}},[i("icon",{attrs:{name:"map-o"}})],1)]):t._e(),t.optIn("show options icons")&&t.editable?i("div",{staticClass:"option edit",attrs:{title:"edit"}},[i("div",{staticClass:"label action",on:{click:function(e){t.toggleOpt("editing"),t.pushOpt("edited")}}},[t.optIn("editing")?t._e():i("icon",{attrs:{name:"envelope"}}),t.optIn("editing")?i("icon",{attrs:{name:"envelope-open"}}):t._e()],1)]):t._e(),t.optIn("show options icons")&&t.editable?i("div",{staticClass:"option submit",attrs:{title:"save"}},[i("div",{staticClass:"label action",on:{click:t.saveThing}},[i("icon",{attrs:{name:"magic"}})],1),t.err?i("div",{staticClass:"err"},[t._v(t._s(t.err))]):t._e()]):t._e(),i("div",{staticClass:"option meta",attrs:{title:"more options"}},[i("div",{staticClass:"action",on:{click:function(e){t.toggleOpt("show options icons")}}},[i("icon",{attrs:{name:"cog"}})],1)])])])])])])},nt=[function(){var t=this.$createElement,e=this._self._c||t;return e("div",{staticClass:"custom-pin-positioner"},[e("img",{staticClass:"pin-svg",attrs:{src:i("LNWm")}})])},function(){var t=this.$createElement,e=this._self._c||t;return e("div",{staticClass:"input-popup"},[e("div",{staticClass:"input",attrs:{contenteditable:"true",placeholder:"paste a link"}})])},function(){var t=this.$createElement,e=this._self._c||t;return e("div",{staticClass:"input-diamond-positioner"},[e("div",{staticClass:"input-diamond"})])}];it._withStripped=!0;var st=!1;var ot=function(t){st||(i("Mfxk"),i("6hKi"))},at=Object(p.a)(et,it,nt,!1,ot,"data-v-4dc72a0e",null);at.options.__file="src/components/thing.vue";var rt=at.exports,ht={mixins:[I()({vue:{reactiveSetter:!0,vm:"this"}})],name:"home",data:function(){return{entity:this.$store.state.entity,pageHistory:this.$store.state.pageHistory,frontPageThing:{title:"The Collective Inventory",names:["a lopu inventory generator"],uuid:"hngg",properties:[{title:"a saveable lopu?",Boolean:!1,type:"Boolean"},{title:"things schema",properties:[{title:"properties schema",type:"Array",Array:[{title:"options",type:"Array of Strings","Array of Strings":["show title"]}]}]},{title:"things render limit",type:"Number",Number:20},{title:"count",Number:20,type:"Number"},{title:"sort",type:"json",json:{created:-1}},{title:"options",type:"Array of Strings","Array of Strings":["no options","addable","put new things first","dont load childrens children","show inventory","hide description","put addable first","template adder","holo mode","feed"]}]}}},sockets:{connect:function(){}},created:function(){this.$store.commit("addPage",this.$options.name)},methods:{spinLogo:function(){this.$refs.logo.classList.add("spin");var t=this;this.$refs.logo.movingTimer=this.$refs.logo.movingTimer||1e3,this.$refs.logo.movingTimer=setTimeout(function(){t.$refs.logo.classList.remove("spin")},this.$refs.logo.movingTimer)},queryNewThings:function(t){this.setThing({option:{title:"a special lopu regex to match",type:"String",String:t.title},list:this.gosmart(this,"frontPageThing.properties",[]),key:["title"],push:!0}),this.popOpt("gotten",this.getsmart(this,"frontPageThing.properties.mapped.options.Array of Strings",[])),this.pushOpt("regen lopu",this.getsmart(this,"frontPageThing.properties.mapped.options.Array of Strings",[]))}},watch:{"$store.state.entity":function(){this.entity=this.$store.state.entity,this.entity.inventory=this.$store.state.entity.inventory},"$store.state.pageHistory":function(){this.pageHistory=this.$store.state.pageHistory}},props:["siteTitle"],components:{search:K,thing:rt}},lt=function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("div",{staticClass:"home"},[i("img",{staticClass:"noselect",staticStyle:{transform:"rotate(180deg)","max-width":"100%"},attrs:{src:"assets/logo.png",title:"yes, this is the vue logo upside down"}}),t._m(0),i("search",{attrs:{options:t.frontPageThing.things,label:"title"},on:{go:function(e){t.createNewGetter(t.data)},searchText:t.queryNewThings}}),i("div",{staticClass:"inventories-container stream-container maps-inventory-container"},[i("thing",{attrs:{thing:t.frontPageThing}})],1),i("div",{staticClass:"inventories-container vertical"}),i("div",{staticClass:"inventories-container vertical"})],1)},pt=[function(){var t=this.$createElement,e=this._self._c||t;return e("div",{staticClass:"intro-text-container"},[e("div",{staticClass:"intro-text"},[this._v("Welcome to "),e("div",{staticClass:"inline"},[this._v("alopu, a social platform for trading anything")])])])}];lt._withStripped=!0;var ut=!1;var ct=function(t){ut||i("JzC1")},dt=Object(p.a)(ht,lt,pt,!1,ct,null,null);dt.options.__file="src/components/home.vue";var gt=dt.exports,mt={name:"realm",data:function(){return{realm:$route.params.realm,realms:$route.params.realms}},socket:{connect:function(){this.isConnected=!0},disconnect:function(){this.isConnected=!1},updatePosts:function(t){this.user&&this.user.wantsLive}},created:function(){getPosts({count:25,realm:this.realm})},methods:{getPosts:function(t){this.$socket.emit("getPosts",t)}}},vt=function(){var t=this.$createElement,e=this._self._c||t;return e("div",{staticClass:"realm"},[e("div",{staticClass:"posts-container"},[e("div",{staticClass:"posts-list"},[this._v("posts in a realm "+this._s(this.realm)+" or multiple realms "+this._s(this.realms))])])])},ft=[];vt._withStripped=!0;var yt=!1;var bt=function(t){yt||i("NcxX")},Mt=Object(p.a)(mt,vt,ft,!1,bt,"data-v-4353c72f",null);Mt.options.__file="src/components/realm.vue";var wt=Mt.exports,Ct={name:"realms",data:function(){return{}},socket:{connect:function(){this.isConnected=!0},disconnect:function(){this.isConnected=!1},giveRealms:function(t){this.user&&this.user.wantsLive,console.log(t),this.realms=t}},created:function(){this.getRealms({count:100,sort:"alphabetical",sortDirection:"ascending"})},methods:{getRealms:function(t){this.$socket.emit("getRealms",t)}},props:["realms"]},It=function(){var t=this.$createElement,e=this._self._c||t;return e("div",{staticClass:"realm"},[e("div",{staticClass:"posts-container"},[e("div",{staticClass:"posts-list"},[e("thing",{attrs:{thing:"5a4fb5ccc2f5ef485345f8d4"}})],1)])])},_t=[];It._withStripped=!0;var Tt=!1;var Ot=function(t){Tt||i("rp0M")},xt=Object(p.a)(Ct,It,_t,!1,Ot,"data-v-2ad0bfd4",null);xt.options.__file="src/components/realms.vue";var St=xt.exports,kt={name:"register-comp",data:function(){return{entity:this.$store.state.entity,pageHistory:this.$store.state.pageHistory,fields:{username:null,password:null,passwordConfirm:null},errMsg:null,feedbackMsg:null,uuid:this._uid}},sockets:{connect:function(){},giveRegister:function(t){console.log(t),t.success?(this.feedbackMsg=t.msg||"succesfully registered",this.clearFields()):(this.errMsg=t.msg||"there was an error",console.log(t.err))}},created:function(){},methods:{register:function(){if(this.fields.password&&this.fields.password==this.fields.passwordConfirm){var t={username:this.fields.username,password:this.fields.password};console.log("sent register emit"),this.$socket.emit("register",t),this.errMsg=null}else this.errMsg="the passwords do not match"},clearFields:function(){for(var t in this.fields)this.fields.hasOwnProperty(t)&&(this.fields[t]=null)}},watch:{"$store.state.entity":function(){this.entity=this.$store.state.entity},"$store.state.pageHistory":function(){this.pageHistory=this.$store.state.pageHistory}},props:{}},$t=function(){var t=this,e=t.$createElement,i=t._self._c||e;return!t.entity||t.entity&&!t.entity.auth?i("div",{staticClass:"register"},[i("div",{staticClass:"register-sizer"},[i("input",{directives:[{name:"model",rawName:"v-model",value:t.fields.username,expression:"fields.username"}],attrs:{placeholder:"username"},domProps:{value:t.fields.username},on:{input:function(e){e.target.composing||t.$set(t.fields,"username",e.target.value)}}}),i("input",{directives:[{name:"model",rawName:"v-model",value:t.fields.password,expression:"fields.password"}],attrs:{type:"password",placeholder:"password"},domProps:{value:t.fields.password},on:{input:function(e){e.target.composing||t.$set(t.fields,"password",e.target.value)}}}),i("input",{directives:[{name:"model",rawName:"v-model",value:t.fields.passwordConfirm,expression:"fields.passwordConfirm"}],attrs:{type:"password",placeholder:"confirm password"},domProps:{value:t.fields.passwordConfirm},on:{input:function(e){e.target.composing||t.$set(t.fields,"passwordConfirm",e.target.value)}}}),i("button",{attrs:{type:"button"},on:{click:t.register}},[t._v("register")]),t.errMsg?i("div",{staticClass:"errMsg"},[t._v(t._s(t.errMsg))]):t._e(),t.feedbackMsg&&t.entity.username?i("div",{staticClass:"feedbackMsg"},[t._v(t._s(t.feedbackMsg))]):t._e()])]):t.entity.username?i("div",{staticClass:"register"},[i("div",{staticClass:"msg thanks"},[t._v(t._s(t.feedbackMsg))])]):t._e()},jt=[];$t._withStripped=!0;var At=!1;var Nt=function(t){At||i("eadD")},Lt=Object(p.a)(kt,$t,jt,!1,Nt,"data-v-8f8a1d9a",null);Lt.options.__file="src/components/register.vue";var Pt=Lt.exports,Dt={data:function(){return{uuid:this._uid,entity:this.$store.state.entity}},sockets:{connect:function(){console.log("socket connect vue side")}},created:function(){},methods:{},props:{},watch:{"$store.state.entity":function(){this.entity=this.$store.state.entity,this.entity.inventory=this.$store.state.entity.inventory}},components:{},route:{canActivate:function(){return!0}}},Ft=function(){var t=this.$createElement,e=this._self._c||t;return e("div",{staticClass:"self"},[e("div",{staticClass:"entity-container"}),e("div",{staticClass:"entity-inventories"},[e("thing",{attrs:{thing:this.entity.inventory,parentOptions:["options","inventory","inventory mode","addable","put-options-last"]}})],1)])},Bt=[];Ft._withStripped=!0;var Et=!1;var zt=function(t){Et||i("Hgz1")},Gt=Object(p.a)(Dt,Ft,Bt,!1,zt,"data-v-1949915c",null);Gt.options.__file="src/components/self.vue";var qt=Gt.exports,Ht={data:function(){return{uuid:this._uid,entity:this.$store.state.entity}},sockets:{connect:function(){console.log("socket connect vue side")}},created:function(){},methods:{},props:{},watch:{"$store.state.entity":function(){this.entity=this.$store.state.entity}},components:{},route:{canActivate:function(){return!0}}},Vt=function(){var t=this.$createElement,e=this._self._c||t;return e("div",{staticClass:"trade"},[e("div",{staticClass:"entity-container"}),e("div",{staticClass:"inventories"},[e("div",{staticClass:"trader-container"},[e("div",{staticClass:"trader-positioner"},[e("thing",{attrs:{thing:{title:"Your Offerings",names:["inventory"],uuid:this.$uuid.v4()},parentOptions:["options","slotted","generate slots","show slots","show inventory","inventory mode","addable","put-options-last"]}}),this._m(0)],1)]),e("div",{staticClass:"trader-container"},[e("div",{staticClass:"trader-positioner"},[e("thing",{attrs:{thing:{title:"Their Offerings",names:["inventory"],uuid:this.$uuid.v4()},parentOptions:["options","show inventory","slotted","generate slots","show slots","inventory mode","addable","put-options-last"]}}),this._m(1)],1)])])])},Ut=[function(){var t=this.$createElement,e=this._self._c||t;return e("div",{staticClass:"accept-trade-button-container"},[e("div",{staticClass:"accept-trade-button-positioner"},[e("div",{staticClass:"accept-trade-button accept"},[e("div",{staticClass:"accept-trade-button-content"},[this._v("Accept")])])])])},function(){var t=this.$createElement,e=this._self._c||t;return e("div",{staticClass:"accept-trade-button-container"},[e("div",{staticClass:"accept-trade-button-positioner"},[e("div",{staticClass:"accept-trade-button reject"},[e("div",{staticClass:"accept-trade-button-content"},[this._v("Reject")])])])])}];Vt._withStripped=!0;var Wt=!1;var Rt=function(t){Wt||i("FgsX")},Qt=Object(p.a)(Ht,Vt,Ut,!1,Rt,"data-v-b79728f8",null);Qt.options.__file="src/components/trade.vue";var Yt=Qt.exports,Jt=function(){var t=this,e=t.$createElement,i=t._self._c||e;return!t.entity||t.entity&&!t.entity.auth?i("div",{staticClass:"logout"},[i("div",{staticClass:"logout-sizer"},[t.errMsg?i("div",{staticClass:"errMsg"},[t._v(t._s(t.errMsg))]):t._e(),t.feedbackMsg&&t.entity.username?i("div",{staticClass:"feedbackMsg"},[t._v(t._s(t.feedbackMsg))]):t._e()])]):t.entity.username?i("div",{staticClass:"logout"},[i("div",{staticClass:"msg thanks"},[t._v(t._s(t.feedbackMsg))])]):t._e()},Zt=[];Jt._withStripped=!0;var Kt=!1;var Xt=function(t){Kt||i("wttD")},te=Object(p.a)({name:"logout-comp",data:function(){return{entity:this.$store.state.entity,errMsg:"thanks for logging out",feedbackMsg:"thanks for logging out",uuid:this._uid}},sockets:{connect:function(){}},created:function(){this.logout()},methods:{logout:function(){this.$socket.emit("logout",{})}},watch:{"$store.state.entity":function(){this.entity=this.$store.state.entity}},props:{}},Jt,Zt,!1,Xt,"data-v-57730a9a",null);te.options.__file="src/components/logout.vue";var ee=te.exports,ie=function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("div",{staticClass:"ico"},[t._m(0),i("div",{staticClass:"contents-container"},[i("div",{staticClass:"contents-positioner"},[i("div",{staticClass:"content-container"},[i("div",{staticClass:"content-positioner"},[i("div",{staticClass:"content-title-container"},[i("div",{staticClass:"content-title-positioner"},[i("router-link",{staticClass:"content-title",attrs:{to:"/ico/things"}},[t._v("things")])],1)]),i("div",{staticClass:"content"})])]),i("div",{staticClass:"content-container"},[i("div",{staticClass:"content-positioner"},[i("div",{staticClass:"content-title-container"},[i("div",{staticClass:"content-title-positioner"},[i("router-link",{staticClass:"content-title",attrs:{to:"/ico/things/manifest"}},[t._v("manifest")])],1)]),i("div",{staticClass:"content"})])]),i("div",{staticClass:"content-container"},[i("div",{staticClass:"content-positioner"},[i("div",{staticClass:"content-title-container"},[i("div",{staticClass:"content-title-positioner"},[i("router-link",{staticClass:"content-title",attrs:{to:"/ico/things/sandbox"}},[t._v("sandbox")])],1)]),i("div",{staticClass:"content"})])]),i("div",{staticClass:"content-container"},[i("div",{staticClass:"content-positioner"},[i("div",{staticClass:"content-title-container"},[i("div",{staticClass:"content-title-positioner"},[i("router-link",{staticClass:"content-title",attrs:{to:"/ico/things/styles"}},[t._v("styles")])],1)]),i("div",{staticClass:"content"})])]),i("div",{staticClass:"content-container"},[i("div",{staticClass:"content-positioner"},[i("div",{staticClass:"content-title-container"},[i("div",{staticClass:"content-title-positioner"},[i("router-link",{staticClass:"content-title",attrs:{to:"/ico/things/styles/inventories"}},[t._v("inventories")])],1)]),i("div",{staticClass:"content"})])]),i("div",{staticClass:"content-container"},[i("div",{staticClass:"content-positioner"},[i("div",{staticClass:"content-title-container"},[i("div",{staticClass:"content-title-positioner"},[i("router-link",{staticClass:"content-title",attrs:{to:"/ico/things/options"}},[t._v("options")])],1)]),i("div",{staticClass:"content"})])]),i("div",{staticClass:"content-container"},[i("div",{staticClass:"content-positioner"},[i("div",{staticClass:"content-title-container"},[i("div",{staticClass:"content-title-positioner"},[i("router-link",{staticClass:"content-title",attrs:{to:"/ico/things/options/etc"}},[t._v("etc")])],1)]),i("div",{staticClass:"content"})])]),i("div",{staticClass:"content-container"},[i("div",{staticClass:"content-positioner"},[i("div",{staticClass:"content-title-container"},[i("div",{staticClass:"content-title-positioner"},[i("router-link",{staticClass:"content-title",attrs:{to:"/ico/things"}},[t._v("things")])],1)]),i("div",{staticClass:"content"})])]),i("div",{staticClass:"content-container"},[i("div",{staticClass:"content-positioner"},[i("div",{staticClass:"content-title-container"},[i("div",{staticClass:"content-title-positioner"},[i("router-link",{staticClass:"content-title",attrs:{to:"/ico/things"}},[t._v("things")])],1)]),i("div",{staticClass:"content"})])]),i("div",{staticClass:"content-container"},[i("div",{staticClass:"content-positioner"},[i("div",{staticClass:"content-title-container"},[i("div",{staticClass:"content-title-positioner"},[i("router-link",{staticClass:"content-title",attrs:{to:"/ico/things"}},[t._v("things")])],1)]),i("div",{staticClass:"content"})])]),i("div",{staticClass:"content-container"},[i("div",{staticClass:"content-positioner"},[i("div",{staticClass:"content-title-container"},[i("div",{staticClass:"content-title-positioner"},[i("router-link",{staticClass:"content-title",attrs:{to:"/ico/status"}},[t._v("status")])],1)]),i("div",{staticClass:"content"})])]),i("div",{staticClass:"content-container"},[i("div",{staticClass:"content-positioner"},[i("div",{staticClass:"content-title-container"},[i("div",{staticClass:"content-title-positioner"},[i("router-link",{staticClass:"content-title",attrs:{to:"/ico/source"}},[t._v("source")])],1)]),i("div",{staticClass:"content"})])])])])])},ne=[function(){var t=this.$createElement,e=this._self._c||t;return e("div",{staticClass:"banner-container"},[e("div",{staticClass:"banner-position-helper"},[e("div",{staticClass:"banner-sizer"})])])}];ie._withStripped=!0;var se=!1;var oe=function(t){se||i("Linl")},ae=Object(p.a)({name:"ico-comp",data:function(){return{uuid:this._uid}},sockets:{connect:function(){}},created:function(){},methods:{},props:{},components:{},watch:{},route:{canActivate:function(){return!0}}},ie,ne,!1,oe,"data-v-7a4d3cbb",null);ae.options.__file="src/components/ico/ico.vue";var re=ae.exports,he=function(){var t=this.$createElement,e=this._self._c||t;return e("div",{staticClass:"icoThings"},[e("div",{staticClass:"icoThings-container"},[e("div",{staticClass:"icoThings-positioner"},[e("img",{staticClass:"noselect",staticStyle:{transform:"rotate(180deg)","max-width":"100%"},attrs:{src:"src/assets/logo.png",title:"yes, this is the vue logo upside down"}}),this._m(0),e("div",{staticClass:"inventories-container maps-inventory-container"},[e("thing",{attrs:{thing:{title:"The local inventory",description:"Is there anything around you?",names:["a lopu inventory generator","a lopu map"],uuid:"woo",properties:[{title:"a saveable lopu?",boolean:!1},{title:"realms to match",list:["posts"]},{title:"broadly match realms",boolean:!0},{title:"use this things location",boolean:!0},{title:"broadly match location",boolean:!0},{title:"how broad?",Number:12,json:{unit:{title:"unit",text:"km"}}},{title:"limit",Number:50},{title:"options",list:["no options","addable","put-first","put new things first","dont load childrens children","inventory mode","show inventory","show-map-inventory","put addable last","show-active-options","location"]}]}}})],1),e("div",{staticClass:"inventories-container vertical"},[e("thing",{attrs:{thing:{names:["a lopu root"],properties:[{title:"options",names:["property"],list:["show inventory","feed","addable","dont load childrens children","put addable last","hide description"]}],things:[{title:"test thing",description:"test thing description",properties:[{title:"options",names:["property"],list:["show options","show properties","focused","addable","put-first","put new things first","dont load childrens children","put addable last","hide title"],type:Array,properties:[{title:"options",names:["property"],list:[]}]},{title:"some number",names:["property"],Number:5,type:Number,properties:[{title:"options",names:["property"],list:[]}]},{title:"some boolean",names:["property"],boolean:!0,type:Boolean,properties:[{title:"options",names:["property"],list:[]}]},{title:"some text",names:["property"],text:"fill me",type:String,properties:[{title:"options",names:["property"],list:[]}]},{title:"some thing",names:["property"],thing:{},type:Object,properties:[{title:"options",names:["property"],list:[]}]}]}]}}}),e("thing",{attrs:{thing:{title:"A thing",description:"this is a modern, technologically advanced, thing",properties:[{title:"options",names:["property"],list:["show options","focused","put new things first","dont load childrens children","put addable last","hide title","properties not addable"],type:Array,properties:[{title:"options",names:["property"],list:[]}]},{title:"some number",names:["property"],Number:5,type:Number,properties:[{title:"options",names:["property"],list:[]}]},{title:"some boolean",names:["property"],boolean:!0,type:Boolean,properties:[{title:"options",names:["property"],list:[]}]},{title:"some text",names:["property"],text:"fill me",type:String,properties:[{title:"options",names:["property"],list:[]}]},{title:"some thing",names:["property"],thing:{},type:Object,properties:[{title:"options",names:["property"],list:[]}]}],things:[{title:"a child thing"}]}}}),e("thing",{attrs:{thing:{title:"The Collective Inventory",description:"test thing description",properties:[{title:"options",names:["property"],list:["show options","focused","inventory mode","show inventory","put new things first","dont load childrens children","put addable last","properties not addable"],type:Array,properties:[{title:"options",names:["property"],list:["show value"]}]},{title:"some number",names:["property"],Number:5,type:Number,properties:[{title:"options",names:["property"],list:[]}]},{title:"some boolean",names:["property"],boolean:!0,type:Boolean,properties:[{title:"options",names:["property"],list:[]}]},{title:"some text",names:["property"],text:"fill me",type:String,properties:[{title:"options",names:["property"],list:[]}]},{title:"some thing",names:["property"],thing:{},type:Object,properties:[{title:"options",names:["property"],list:[]}]}]}}}),e("div",{staticClass:"inventories-container no-padding"},[e("thing",{attrs:{thing:this.entity.inventory,count:40,parentOptions:["inventory mode","show inventory","addable","put addable last","owner-root","owner-only","put-options-last"]}}),e("thing",{attrs:{thing:{owner:this.entity._id,title:"Add to your wishlist",description:"this is your wishlist, any things you put in here will be sent out to your peers",stateType:"unlinked"},parentOptions:["inventory mode","show inventory","addable","put addable last","owner-root","owner-only","put-options-last"]}})],1),e("thing",{attrs:{thing:{names:["a lopu inventory generator"],properties:[{title:"realms to match",list:["tests"]},{title:"limit",Number:5},{title:"broadly match realms",boolean:!0},{title:"options",list:["no options","addable","no context","put-first","feed","show-children-comments","put new things first","addable with template","dont load childrens children","wide-adder","put addable last","put-options-last"]}]}}})],1)])])])},le=[function(){var t=this.$createElement,e=this._self._c||t;return e("div",{staticClass:"intro-text-container"},[e("div",{staticClass:"intro-text"},[this._v("Welcome")])])}];he._withStripped=!0;var pe=!1;var ue=function(t){pe||i("7XV9")},ce=Object(p.a)({name:"icoThings-comp",data:function(){return{entity:this.$store.state.entity,uuid:this._uid}},sockets:{connect:function(){}},created:function(){},methods:{},props:{siteTitle:{}},components:{},watch:{},route:{canActivate:function(){return!0}}},he,le,!1,ue,"data-v-417ea160",null);ce.options.__file="src/components/ico/icoThings.vue";var de=ce.exports,ge=function(){var t=this.$createElement,e=this._self._c||t;return e("div",{staticClass:"icoThings"},[e("div",{staticClass:"icoThings-container"},[e("div",{staticClass:"icoThings-positioner"},[e("img",{staticClass:"noselect",staticStyle:{transform:"rotate(180deg)","max-width":"100%"},attrs:{src:"src/assets/logo.png",title:"yes, this is the vue logo upside down"}}),this._m(0),e("div",{staticClass:"inventories-container vertical"},[e("thing",{attrs:{thing:{title:"Some thing",description:"Somethings description..",properties:[{title:"options",names:["property"],"Array of Strings":["inventory mode","slotted","show slots","shrink slot icons","generate slots","put new things first","dont load childrens children","put addable last","properties not addable","show properties"],type:"Array of Strings",properties:[{title:"options",names:["property"],"Array of Strings":[],type:"Array of Strings"},{title:"array type",type:"String"}]}],things:[]}}})],1)])])])},me=[function(){var t=this.$createElement,e=this._self._c||t;return e("div",{staticClass:"intro-text-container"},[e("div",{staticClass:"intro-text"},[this._v("Welcome")])])}];ge._withStripped=!0;var ve=!1;var fe=function(t){ve||i("tQ2K")},ye=Object(p.a)({name:"icoThings-comp",data:function(){return{entity:this.$store.state.entity,uuid:this._uid}},sockets:{connect:function(){}},created:function(){},methods:{},props:{siteTitle:{}},components:{},watch:{},route:{canActivate:function(){return!0}}},ge,me,!1,fe,"data-v-37419f62",null);ye.options.__file="src/components/ico/icoThingsStyles.vue";var be=ye.exports,Me=function(){var t=this.$createElement,e=this._self._c||t;return e("div",{staticClass:"icoThings"},[e("div",{staticClass:"icoThings-container"},[e("div",{staticClass:"icoThings-positioner"},[e("img",{staticClass:"noselect",staticStyle:{transform:"rotate(180deg)","max-width":"100%"},attrs:{src:"src/assets/logo.png",title:"yes, this is the vue logo upside down"}}),this._m(0),e("div",{staticClass:"inventories-container vertical"},[e("thing",{attrs:{thing:{title:"Your Inventory",description:"Somethings description..",properties:[{title:"options",names:["property"],list:["inventory mode","show inventory","put new things first","dont load childrens children","put addable last","properties not addable","show properties"],type:Array,properties:[{title:"options",names:["property"],list:["show value"]},{title:"array type",type:String}]}],things:[]}}}),e("thing",{attrs:{thing:{title:"Your Inventory",description:"Somethings description..",properties:[{title:"options",names:["property"],list:["inventory mode","show inventory","slotted","put new things first","dont load childrens children","put addable last","properties not addable","show properties"],type:Array,properties:[{title:"options",names:["property"],list:["show value"]},{title:"array type",type:String}]}],things:[]}}}),e("thing",{attrs:{thing:{title:"Your Inventory",description:"Somethings description..",properties:[{title:"options",names:["property"],list:["inventory mode","show inventory","slotted","show slots","put new things first","dont load childrens children","put addable last","properties not addable","show properties"],type:Array,properties:[{title:"options",names:["property"],list:["show value"]},{title:"array type",type:String}]}],things:[]}}}),e("thing",{attrs:{thing:{title:"Your Inventory",description:"Somethings description..",properties:[{title:"options",names:["property"],list:["inventory mode","show inventory","slotted","show slots","shrink slot icons","put new things first","dont load childrens children","put addable last","properties not addable","show properties"],type:Array,properties:[{title:"options",names:["property"],list:["show value"]},{title:"array type",type:String}]}],things:[]}}}),e("thing",{attrs:{thing:{title:"Your Inventory",description:"Somethings description..",properties:[{title:"options",names:["property"],list:["inventory mode","show inventory","slotted","show slots","shrink slot icons","generate slots","put new things first","dont load childrens children","put addable last","properties not addable","show properties"],type:Array,properties:[{title:"options",names:["property"],list:["show value"]},{title:"array type",type:String}]}],things:[]}}})],1)])])])},we=[function(){var t=this.$createElement,e=this._self._c||t;return e("div",{staticClass:"intro-text-container"},[e("div",{staticClass:"intro-text"},[this._v("Welcome")])])}];Me._withStripped=!0;var Ce=!1;var Ie=function(t){Ce||i("lw+A")},_e=Object(p.a)({name:"icoThings-comp",data:function(){return{entity:this.$store.state.entity,uuid:this._uid}},sockets:{connect:function(){}},created:function(){},methods:{},props:{siteTitle:{}},components:{},watch:{},route:{canActivate:function(){return!0}}},Me,we,!1,Ie,"data-v-69089e04",null);_e.options.__file="src/components/ico/inventoryStyles.vue";var Te=_e.exports,Oe=function(){var t=this.$createElement,e=this._self._c||t;return e("div",{staticClass:"icoThings"},[e("div",{staticClass:"icoThings-container"},[e("div",{staticClass:"icoThings-positioner"},[e("img",{staticClass:"noselect",staticStyle:{transform:"rotate(180deg)","max-width":"100%"},attrs:{src:"src/assets/logo.png",title:"yes, this is the vue logo upside down"}}),this._m(0),e("div",{staticClass:"inventories-container vertical"},[e("thing",{attrs:{thing:{title:"Something",description:"Somethings description..",properties:[{title:"options",names:["property"],"Array of Strings":["show title","hide description"],type:"Array of Strings",properties:[{title:"options",names:["property"],"Array of Strings":["show value"],type:"Array of Strings"},{title:"array type",type:String}]}],things:[]}}}),e("thing",{attrs:{thing:{title:"Something",description:"Somethings description..",properties:[{title:"options",names:["property"],"Array of Strings":[],type:"Array of Strings",properties:[{title:"options",names:["property"],"Array of Strings":["show value"],type:"Array of Strings"},{title:"array type",type:String}]}],things:[]}}}),e("thing",{attrs:{thing:{title:"Something",description:"Somethings description..",properties:[{title:"options",names:["property"],"Array of Strings":["show title"],type:"Array of Strings",properties:[{title:"options",names:["property"],"Array of Strings":["show value"],type:"Array of Strings"},{title:"array type",type:String}]}],things:[]}}}),e("thing",{attrs:{thing:{title:"Something",description:"Somethings description..",properties:[{title:"options",names:["property"],"Array of Strings":["show title","hide description","show options"],type:"Array of Strings",properties:[{title:"options",names:["property"],"Array of Strings":["show value"],type:"Array of Strings"},{title:"array type",type:String}]}],things:[]}}}),e("thing",{attrs:{thing:{title:"Something",description:"Somethings description..",properties:[{title:"options",names:["property"],"Array of Strings":["hide title","show options"],type:"Array of Strings",properties:[{title:"options",names:["property"],"Array of Strings":["show value"],type:"Array of Strings"},{title:"array type",type:String}]}],things:[]}}}),e("thing",{attrs:{thing:{title:"Something",description:"Somethings description..",properties:[{title:"options",names:["property"],"Array of Strings":["show title","show options"],type:"Array of Strings",properties:[{title:"options",names:["property"],"Array of Strings":["show value"],type:"Array of Strings"},{title:"array type",type:String}]}],things:[]}}}),e("thing",{attrs:{thing:{title:"Something",description:"Somethings description..",properties:[{title:"options",names:["property"],"Array of Strings":["show title","hide description","show inventory","show options"],type:"Array of Strings",properties:[{title:"options",names:["property"],"Array of Strings":["show value"],type:"Array of Strings"},{title:"array type",type:String}]}],things:[]}}}),e("thing",{attrs:{thing:{title:"Something",description:"Somethings description..",properties:[{title:"options",names:["property"],"Array of Strings":["hide title","show inventory","show options"],type:"Array of Strings",properties:[{title:"options",names:["property"],"Array of Strings":["show value"],type:"Array of Strings"},{title:"array type",type:String}]}],things:[]}}}),e("thing",{attrs:{thing:{title:"Something",description:"Somethings description..",properties:[{title:"options",names:["property"],"Array of Strings":["icon"],type:"Array of Strings",properties:[{title:"options",names:["property"],"Array of Strings":["show value"],type:"Array of Strings"},{title:"array type",type:String}]}],things:[]}}}),e("thing",{attrs:{thing:{title:"Something",description:"Somethings description..",properties:[{title:"options",names:["property"],"Array of Strings":["icon","editing"],type:"Array of Strings",properties:[{title:"options",names:["property"],"Array of Strings":["show value"],type:"Array of Strings"},{title:"array type",type:String}]}],things:[]}}}),e("thing",{attrs:{thing:{title:"Something",description:"Somethings description..",properties:[{title:"options",names:["property"],"Array of Strings":["inventory mode","show inventory","slotted","show slots","shrink slot icons","generate slots","put new things first","dont load childrens children","put addable last","properties not addable","show properties"],type:"Array of Strings",properties:[{title:"options",names:["property"],"Array of Strings":["show value"],type:"Array of Strings"},{title:"array type",type:String}]}],things:[]}}})],1)])])])},xe=[function(){var t=this.$createElement,e=this._self._c||t;return e("div",{staticClass:"intro-text-container"},[e("div",{staticClass:"intro-text"},[this._v("Welcome")])])}];Oe._withStripped=!0;var Se=!1;var ke=function(t){Se||i("n8cc")},$e=Object(p.a)({name:"icoThings-comp",data:function(){return{entity:this.$store.state.entity,uuid:this._uid}},sockets:{connect:function(){}},created:function(){},methods:{},props:{siteTitle:{}},components:{},watch:{},route:{canActivate:function(){return!0}}},Oe,xe,!1,ke,"data-v-7b61c24e",null);$e.options.__file="src/components/ico/icoThingsOptions.vue";var je=$e.exports,Ae=i("NYxO"),Ne={mixins:[I()({vue:{reactiveSetter:!0,vm:this}})],name:"icoThings-comp",data:function(){return{entity:this.$store.state.entity,uuid:this._uid,wait:2e3}},sockets:{connect:function(){}},created:function(){var t=this;this.wait=setInterval(function(){t.$store.commit("sandboxThingSet",t.sandboxThing)},1e3)},methods:{commit:function(){},setRandomText:function(){console.log(Math.random(1e3).toString()),this.$set(this.sandboxThing,"description",Math.random(1e3).toString())},setRandomNum:function(){this.$set(this.sandboxThing,"description",Math.random(1e3).toString())},makeProperty:function(){this.pushOpt("property",this.sandboxThing.names)},resetThing:function(){this.sandboxThing=this.jsmart.parse(this.jsmart.stringify(this.$store.state.ico.sandboxThingSchema))}},props:{siteTitle:{}},components:{},watch:{},computed:{sandboxThing:{get:function(){return this.$store.state.ico.sandboxThing},set:function(){clearInterval(this.wait);var t=this;this.wait=setInterval(function(){t.$store.commit("sandboxThingSet",t.sandboxThing)},2e3),this.$store.commit("resetSandboxThing",!0)}}},route:{canActivate:function(){return!0}}},Le=function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("div",{staticClass:"icoThings"},[i("div",{staticClass:"icoThings-container"},[i("div",{staticClass:"icoThings-positioner"},[i("img",{staticClass:"noselect",staticStyle:{transform:"rotate(180deg)","max-width":"100%"},attrs:{src:"src/assets/logo.png",title:"yes, this is the vue logo upside down"}}),t._m(0),i("div",{staticClass:"inventories-container vertical"},[i("thing",{attrs:{thing:t.sandboxThing}})],1),i("div",{staticClass:"buttons-container"},[i("div",{staticClass:"button-container",on:{click:t.makeProperty}},[i("div",{staticClass:"button"},[t._v("make property")])]),i("div",{staticClass:"button-container",on:{click:t.commit}},[i("div",{staticClass:"button"},[t._v("commit")])]),i("div",{staticClass:"button-container",on:{click:t.resetThing}},[i("div",{staticClass:"button"},[t._v("reset")])])])])])])},Pe=[function(){var t=this.$createElement,e=this._self._c||t;return e("div",{staticClass:"intro-text-container"},[e("div",{staticClass:"intro-text"},[this._v("Welcome")])])}];Le._withStripped=!0;var De=!1;var Fe=function(t){De||i("YW3+")},Be=Object(p.a)(Ne,Le,Pe,!1,Fe,"data-v-6212597c",null);Be.options.__file="src/components/ico/icoSandboxThing.vue";var Ee=Be.exports,ze={mixins:[I()({vue:!0,objList:"this.thingMutable.things",stringList:"this.thingMutable.properties.mapped.options.list"})],name:"icoThings-comp",data:function(){return{entity:this.$store.state.entity,uuid:this._uid}},sockets:{connect:function(){}},created:function(){},methods:{},props:{siteTitle:{}},components:{},watch:{},route:{canActivate:function(){return!0}}},Ge=function(){var t=this.$createElement,e=this._self._c||t;return e("div",{staticClass:"icoThings"},[e("div",{staticClass:"icoThings-container"},[e("div",{staticClass:"icoThings-positioner"},[e("img",{staticClass:"noselect",staticStyle:{transform:"rotate(180deg)","max-width":"100%"},attrs:{src:"src/assets/logo.png",title:"yes, this is the vue logo upside down"}}),this._m(0),e("div",{staticClass:"inventories-container vertical"},[e("thing",{attrs:{thing:{}}})],1)])])])},qe=[function(){var t=this.$createElement,e=this._self._c||t;return e("div",{staticClass:"intro-text-container"},[e("div",{staticClass:"intro-text"},[this._v("Welcome")])])}];Ge._withStripped=!0;var He=!1;var Ve=function(t){He||i("/cJt")},Ue=Object(p.a)(ze,Ge,qe,!1,Ve,"data-v-a769e498",null);Ue.options.__file="src/components/ico/icoManifestThing.vue";var We=Ue.exports,Re=function(){var t=this.$createElement,e=this._self._c||t;return e("div",{staticClass:"icoThings"},[e("div",{staticClass:"icoThings-container"},[e("div",{staticClass:"icoThings-positioner"},[e("img",{staticClass:"noselect",staticStyle:{transform:"rotate(180deg)","max-width":"100%"},attrs:{src:"src/assets/logo.png",title:"yes, this is the vue logo upside down"}}),this._m(0),e("div",{staticClass:"inventories-container vertical"},[e("thing",{attrs:{thing:"5a4e3eb47c0fdc593d0992ea"}})],1)])])])},Qe=[function(){var t=this.$createElement,e=this._self._c||t;return e("div",{staticClass:"intro-text-container"},[e("div",{staticClass:"intro-text"},[this._v("Welcome")])])}];Re._withStripped=!0;var Ye=!1;var Je=function(t){Ye||i("MQfU")},Ze=Object(p.a)({name:"icoThings-comp",data:function(){return{entity:this.$store.state.entity,uuid:this._uid}},sockets:{connect:function(){}},created:function(){},methods:{},props:{siteTitle:{}},components:{},watch:{},route:{canActivate:function(){return!0}}},Re,Qe,!1,Je,"data-v-e758de88",null);Ze.options.__file="src/components/ico/status.vue";var Ke=Ze.exports,Xe={mixins:[I()({vue:{reactiveSetter:!0,vm:"this"},objList:"this.thingMutable.things",stringList:"this.thingMutable.properties.mapped.options.Array of Strings"})],data:function(){return{thingMutable:this.thing,entity:this.$store.state.entity,feedback:null,realms:this.$store.state.realms,thingTypes:this.$store.state.thingTypes,types:this.$store.state.types,thingNames:this.$store.state.thingNames,priceUnits:this.$store.state.priceUnits,currencies:this.$store.state.currencies,urls:["http://agora.dev/forum","http://lopu.com.au","http://agora.lopu.com.au"],err:null,alterEgos:[this.$store.state.entity.username?this.$store.state.entity.username:"anonymous","anonymous"],neighboursMutable:this.neighbours,messages:[],funCounter:0,limitMutable:5,loadLimitMutable:5,propertiesLimitMutable:50,propertiesLoadLimitMutable:5,valueLimitMutable:5,valueLoadLimitMutable:5,savesToMutable:this.savesTo,optionsMutable:[],childOptions:[],parentOptionsMutable:this.parentOptions,defaultThingMutable:this.defaultThing,thingMap:void 0,thingMapGeocoder:void 0,thingMapFeatures:{type:"FeatureCollection",features:[]},invGrid:{width:80,invWidth:void 0,padding:"2px 3px"}}},sockets:{connect:function(){},giveThing:function(t){var e=this;if("hmm"==this.thingMutable.uuid&&console.log("got thing %s",Date.now()),this.sameObj(t.thing,this.thingMutable,t))this.thingMutable=t.thing,(t.giveEvent="save")&&this.$emit("saved"),this.mapProperties().then(function(t){e.reinit(),e.popOpt("editing"),e.pushOpt("fetched")}).catch(function(t){console.error(t)}),this.setFeedback(t.feedback);else if(this.isParent(t))if(this.optIn("a lopu inventory generator",this.getsmart(this.thingMutable,"names",[])))"hmm"==this.thingMutable.uuid&&console.log("where we should be"),t.thing.tag="loading",this.setThing({option:t.thing,list:this.gosmart(this,"thingMutable.things",[]),obj:!0,key:["_id","uuid","tag"],keymatchtype:"broad",push:!0,strings:!0}).then(function(e){delete t.thing.tag}).catch(function(t){t&&console.error(t)}),this.optIn("a lopu map",this.getsmart(this.thingMutable,"names",[]))&&this.pushThingFeature(t.thing,"render");else{for(var i=0;i<t.thing.relatives.length;i++)this.optIn(t.thing._id,this.thingMutable[t.thing.relatives[i].path])||this.optIn(t.thing,this.thingMutable[t.thing.relatives[i].path],!0)||this.optIn(t.thing,this.thingMutable[t.thing.relatives[i].path],!0,"uuid")?this.setThing({option:t.thing,list:this.thingMutable[t.thing.relatives[i].path],obj:!0,key:["_id","uuid"],keymatchtype:"broad",strings:!0}):this.optIn(t.thing,this.thingMutable.things,!0),this.thingMutable._id&&this.thingMutable._id.toString()==t.thing.relatives[i].relative&&this.pushOpt(t.thing,this.thingMutable[t.thing.relatives[i].path],!0);this.entity&&this.entity.inventory&&(this.entity.inventory._id==this.thingMutable._id&&void 0!==this.thingMutable._id||this.entity.inventory.uuid==this.thingMutable.uuid&&void 0!==this.thingMutable.uuid)&&this.$store.commit("entityInventorySet",this.thingMutable)}else t.thing.title&&t.thing.title.indexOf("-comments")},giveThings:function(t){this.isParent(t)&&t.returnPath&&(this.setThings({options:t.things,list:this.thingMutable[t.returnPath],obj:!0,strings:!0}),this.mapList(this.thingMutable[t.returnPath]))},confirmThingDeletion:function(t){console.log("wtf"),console.log(this.sameObj(this.getsmart(t,"thing",void 0),this.getsmart(this,"thingMutable",void 0),t)),console.log(t),this.sameObj(this.getsmart(t,"thing",void 0),this.getsmart(this,"thingMutable",void 0),t)&&(this.getsmart(t,"feedback.success",!1)?(this.$emit("remove"),this.setsmart(this,"thingMutable",void 0)):(this.setFeedback(null),this.pushOpt({text:this.getsmart(t,"feedback.message","There was an error deleting this thing from the database"),from:"lopu"},this.messages)))}},created:function(){},mounted:function(){this.isMounted=!0;var t=this;window.onresize=function(){t.addSlotsToInv()},this.create()},methods:{create:function(){this.thingMutable&&"object"===A()(this.thingMutable)?this.reinit():"string"!=typeof this.thingMutable||this.optIn("no-fetch")||(this.getThing({thing:this.thingMutable,parentId:this.parentId,clientId:this._uid,populations:[{path:"properties"}]}),this.thingMutable={_id:this.thingMutable,names:["loading"]});var t=this;setTimeout(function(){t.optIn("loading",t.getsmart(t,"thingMutable.names",[]))},12345),this.setChildOptions()},reinit:function(){var t=this;"hmm"==this.thingMutable.uuid&&console.log("reinitting"),this.parentOptionsMutable=JSON.parse(tt()(this.parentOptions)),this.mapProperties().then(function(e){t.applySchema().then(function(e){t.mapProperties().then(function(e){t.checkPropertiesForOptions(),t.updateOpts(),t.updateThingLocation({loc:"user",overwrite:!1}).then(function(e){if(t.optIn("a lopu inventory generator",t.getsmart(t,"thingMutable.names",[]))&&!t.optIn("gotten")&&!t.getsmart(t,"thingMutable.properties.mapped.dont gen this lopu",!1)){var i=t.generateFind();if(i){for(var n=t.generateFind({piece:"count"}),s=t.generateFind({piece:"options"}),o=(t.getsmart(t,"thingMutable.things.length",0),t.gosmart(t,"thingMutable.things",[])),a=0;a<n;a++){t.pushThing({option:{names:["loading"],uuid:!1,tag:"loading"},list:o})}t.limitMutable=t.limitMutable+n,t.getThings({parentId:t.getsmart(t,"thingMutable._id",t._uid),entity:{_id:t.entity._id},returnPath:"things",find:i,count:n,findOptions:s,stream:!0}),t.pushOpt("gotten"),t.popOpt("regen lopu")}}}).catch(function(t){t&&console.error(t)}),t.optIn("show-comments")&&t.loadComments(),t.optIn("inventory",t.thingMutable.names)&&t.pushOpts(["show inventory","inventory mode"]),t.setChildOptions(),t.resetDefaultThing(),t.addSlotsToInv()}).catch(function(t){t&&console.error(t)})}).catch(function(t){t&&console.error(t)})}).catch(function(t){console.error(t)})},getThing:function(t){this.$socket.emit("getThing",t)},getThings:function(t){console.log("emitting request %s",Date.now()),this.$socket.emit("getThings",t)},addPrice:function(){this.thingMutable.contract?this.thingMutable.contract.push({thing:null,amount:null,multiplier:null,unit:null}):this.$set(this.thingMutable,"contract",[{thing:null,amount:null,multiplier:null,unit:null}])},removePrice:function(t){this.thingMutable.contract.splice(t,1)},updateDescription:function(t){this.setsmart(this,"thingMutable.description",t.api.origElements.innerHTML)},updateTitle:function(t){this.setsmart(this,"thingMutable.title",t.api.origElements.innerHTML)},updateValue:function(t){this.value=t.api.origElements.innerHTML},updateAt:function(t,e,i){console.log(t),console.log(e),console.log(i)},showOptions:function(){this.optIn("icon")||this.optIn("hiding")||this.pushOpt("show options")},showOptionsPerm:function(){this.pushOpts(["show options","focused"]),this.popOpts(["hiding"])},toggleOptions:function(){this.optIn("focused")?this.popOpts(["show options","focused"]):this.optIn("icon")||this.pushOpts(["show options","focused"])},hideOptions:function(){this.popOpts(["show options","focused"]),this.pushOpt("hiding"),setTimeout(this.popOpt("hiding"),4e3)},hideOptionsMaybe:function(){!this.optIn("focused")&&this.optIn("show options")&&this.popOpt("show options")},setFeedback:function(t){this.feedback=t||null},generateFind:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},e=t.piece,i=void 0===e?"for":e,n=t.obj,s=void 0===n?this.thingMutable:n;if("object"==(void 0===s?"undefined":A()(s))){if(!i||"for"==i){var o={};if(this.getsmart(s,"properties.mapped.a special lopu regex to match."+this.getsmart(s,"properties.mapped.a special lopu regex to match.type","String"),!1)){var a=this.getsmart(s,"properties.mapped.a special lopu regex to match."+this.getsmart(s,"properties.mapped.a special lopu regex to match.type","String"),void 0),r=a.split(" ");o.realms={$in:r},o.names={$in:r},o.text={regex:!0,value:a,options:"i"},o.description={regex:!0,value:a,options:"i"},o.title={regex:!0,value:a,options:"i"},o.orAllTheThings=!0}else o.realms=this.getsmart(s,"properties.mapped.ignore realms.Boolean",!1)?void 0:this.getsmart(s,"properties.mapped.realms to match.Array of Strings.length",0)>0?this.getsmart(s,"properties.mapped.broadly match realms.Boolean",!1)?{$in:this.getsmart(s,"properties.mapped.realms to match.Array of Strings",void 0)}:{$all:this.getsmart(s,"properties.mapped.realms to match.Array of Strings",void 0)}:void 0,o.names=this.getsmart(s,"properties.mapped.ignore names.Boolean",!1)?void 0:this.getsmart(s,"properties.mapped.names to match.Array of Strings.length",0)>0?this.getsmart(s,"properties.mapped.broadly match names.Boolean",!1)?{$in:this.getsmart(s,"properties.mapped.names to match.Array of Strings",void 0)}:{$all:this.getsmart(s,"properties.mapped.names to match.Array of Strings",void 0)}:void 0,o.owners=this.getsmart(s,"properties.mapped.ignore owners.Boolean",!1)?void 0:this.getsmart(s,"properties.mapped.owners to match.Array of Strings.length",0)>0?this.getsmart(s,"properties.mapped.broadly match owners.Boolean",!1)?{$in:this.getsmart(s,"properties.mapped.owners to match.Array of Strings",void 0)}:{$all:this.getsmart(s,"properties.mapped.owners to match.Array of Strings",void 0)}:void 0,o.text=this.getsmart(s,"properties.mapped.ignore text.Boolean",!1)?void 0:this.getsmart(s,"properties.mapped.text to match.String",!1)?this.getsmart(s,"properties.mapped.broadly match text.Boolean",!1)?{regex:!0,value:this.getsmart(s,"properties.mapped.text to match.String",void 0),options:"i"}:this.getsmart(s,"properties.mapped.text to match.String",void 0):void 0,o.description=this.getsmart(s,"properties.mapped.ignore description.Boolean",!1)?void 0:this.getsmart(s,"properties.mapped.description to match.String",!1)?this.getsmart(s,"properties.mapped.broadly match description.Boolean",!1)?{regex:!0,value:this.getsmart(s,"properties.mapped.description to match.String",void 0),options:"i"}:this.getsmart(s,"properties.mapped.description to match.String",void 0):void 0,o.title=this.getsmart(s,"properties.mapped.ignore title.Boolean",!1)?void 0:this.getsmart(s,"properties.mapped.title to match.String",!1)?this.getsmart(s,"properties.mapped.broadly match title.Boolean",!1)?{regex:!0,value:this.getsmart(s,"properties.mapped.title to match.String",void 0),options:"i"}:this.getsmart(s,"properties.mapped.title to match.String",void 0):void 0,o["geojson.geometry"]=this.getsmart(s,"properties.mapped.ignore location.Boolean",!1)?void 0:this.getsmart(s,"properties.mapped.geojson to match.geojson",!1)?{$near:{$maxDistance:this.getsmart(s,"properties.mapped.broadly match location.Boolean",!1)?1e4*this.getsmart(s,"properties.mapped.geojson search radius.Number",12):1e4,$geometry:this.getsmart(s,"geojson.geometry",void 0)}}:this.getsmart(s,"properties.mapped.use this things location.Boolean",!1)?{$near:{$maxDistance:this.getsmart(s,"properties.mapped.broadly match location.Boolean",!1)?1e3*this.getsmart(s,"properties.mapped.geojson search radius.Number",12):1e4,$geometry:this.getsmart(s,"geojson.geometry",void 0)}}:void 0;return o}if("count"==i)return this.getsmart(s,"properties.mapped.limit.Number",!1)||this.getsmart(s,"properties.mapped.count.Number",5);if("options"==i){var h={};return h.sort=this.getsmart(s,"properties.mapped.sort."+this.getsmart(s,"properties.mapped.sort.type","json"),void 0),h}}return!1},getProperty:function(t){for(var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"title",i=arguments.length>2&&void 0!==arguments[2]?arguments[2]:this.gosmart(this,"thingMutable.properties",[]),n=0;n>i.length;n++)if(i[n][e]==t)return i[n]},updateRealmsList:function(t,e){this.$set(this.realms,"searched",null),this.realms.push({key:"searched",realm:t})},genDefaultThing:function(){return"slot"==(arguments.length>0&&void 0!==arguments[0]?arguments[0]:void 0)?{realms:["inventory slots"],title:"debug",names:["inventory slot"],properties:[{title:"options","Array of Strings":["inventory slot","icon"],type:"Array of Strings"}],owners:[this.entity._id],parents:[this.thingMutable.uuid],uuid:this.$uuid.v4()}:this.optIn("a lopu inventory generator",this.thingMutable.names)?{realms:["new"].concat(this.getsmart(this.thingMutable,"properties.mapped.realms to match.Array of Strings",[])),names:this.getsmart(this.thingMutable,"properties.mapped.names to match.Array of Strings",[]),description:void 0,properties:[{title:"options","Array of Strings":["editing","edited","is-default-thing",this.optIn("shallow adders")?"less padding":null],type:"Array of Strings"}],owners:[this.entity._id],parents:[this.thingMutable],uuid:this.$uuid.v4()}:{realms:["new"],description:void 0,properties:[{title:"options","Array of Strings":["editing","edited","is-default-thing",this.optIn("shallow adders")?"less padding":null],type:"Array of Strings"}],owners:[this.entity._id],parents:[this.thingMutable],uuid:this.$uuid.v4()}},resetDefaultThing:function(){this.defaultThingMutable=this.genDefaultThing()},setChildOptions:function(){this.childOptions=[this.optIn("feed")?"wide":"icon",this.optIn("addable")?"addable":null,this.optIn("slotted")?"in slot":null,this.optIn("shrink slot icons")?"shrink slot icon":null,this.optIn("feed")?null:"inventory item",this.optIn("icon")?"no-fetch":null,this.optIn("show inventory")?"fetch":null,this.optIn("dont load childrens children")?"dont load children":null,this.optIn("dont load children children children")?"dont load childrens children":null,this.optIn("show-children-comments")?"show-comments":null,this.optIn("shallow adders")?"shallow adders":null],this.childOptions=this.childOptions.filter(function(t){return t||0==t})},removeMessage:function(t){this.messages.splice(t,1)},sameObj:function(t,e,i){return!(!t||!e)&&(e&&(i&&this._uid&&this._uid==i.clientId&&(e._id&&e._id==t._id||e.uuid&&e.uuid==t.uuid)||e._id&&e._id==t._id||e.uuid&&e.uuid==t.uuid))},isParent:function(t){return void 0!==t.parentId&&(this.getsmart(this,"thingMutable.uuid",void 0)==t.parentId||this._uid==t.parentId||this.getsmart(this,"thingMutable._id",void 0)==t.parentId)||t.thing&&this.getsmart(t,"thing.relatives",[])&&this.getsmart(this,"thingMutable._id",!1)&&this.optIn({path:"parents",relative:this.getsmart(this,"thingMutable._id",{toString:function(){}}).toString()},this.getsmart(t,"thing.relatives",[]),!0,["relative","path"])},thingCleaned:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:this.thingMutable;return{_id:t._id,uuid:t.uuid,title:t.title,description:t.description}},valueToAThing:function(t){if(this.getsmart(t,"constructor",void 0)!==Object){var e={type:this.childType,names:["a lopu value"]};return e[this.childType]=t,e}return this.getsmart(t,"constructor",void 0),Object,t},firstOrLast:function(t,e,i){var n=arguments.length>3&&void 0!==arguments[3]?arguments[3]:"thing";return!(0!=t&&!t||!e||!i)&&((0!=t||1!=e&&1!=i.length)&&(0==t?"first-"+n:t<=e&&t==i.length-1||t==e-1?"last-"+n:"mid-"+n))},osxTrunc:function(t){if("string"==typeof t){var e=t.replace(/&nbsp;/g," ");if(e.replace(/^\s+|\s+$/g,"").length>26){var i=e.replace(/&nbsp;/g," ").replace(/\s+$/g,"").substr(-8).replace(/^\s+/g,"");return e.replace(/&nbsp;/g," ").substr(0,19).replace(/\s+$/g,"")+"..."+i}return t}},trunc:function(t){if("string"==typeof t){var e=t.replace(/&nbsp;/g," ");return e.replace(/^\s+|\s+$/g,"").length>26?e.replace(/&nbsp;/g," ").substr(0,26).replace(/\s+$/g,"")+"..":t}},updateOpts:function(){var t=this;return new D.a(function(e,i){t.getsmart(t,"thingMutable.properties.mapped.options",!1)?(t.pushOpts(t.parentOptionsMutable.filter(function(e){return t.getsmart(t,"thingMutable.properties.mapped.options.Array of Strings",[]).indexOf("ignore client option "+e)<0&&(e||0==e)})),t.parentOptionsMutable=[],e(!0)):t.mapList(t.gosmart(t,"thingMutable.properties",[]),"title","options").then(function(i){if(i)e(t.updateOpts());else{var n=t.gosmart(t,"thingMutable.properties",[]);t.pushThing({option:{title:"options","Array of Strings":[],type:"Array of Strings"},list:n,obj:!0,key:"title"}),e(t.updateOpts())}}).catch(function(t){console.error(t),i(t)})})},checkPropertiesForOptions:function(){if(this.gosmart(this,"thingMutable.properties",[]).constructor==Array){var t=!0,e=!1,i=void 0;try{for(var n,s=L()(this.thingMutable.properties);!(t=(n=s.next()).done);t=!0){var o=n.value;"things render limit"==o.title&&(this.limitMutable=o[o.type||"Number"]||5),this.pushOpt(o.title)}}catch(t){e=!0,i=t}finally{try{!t&&s.return&&s.return()}finally{if(e)throw i}}}},addSlotsToInv:function(t){var e=this,i=Math.floor(this.getsmart(this,"$refs.inventory-list-container.offsetWidth",558))-2,n=93;if(this.invGrid.invWidth==i&&i<93);else if(this.optIn("slotted")){if(i%n>n/3)for(;i%n>7;)n--;else for(;i%n>7;)n++;if(this.invGrid.width=n,this.invGrid.invWidth=Math.floor(i/n)*n,this.optIn("generate slots")){var s=this.gosmart(this,"thingMutable.things",[]),o=4*Math.floor(i/n);if(o=o<this.limitMutable?this.limitMutable:o,s.length<o){for(var a=o-s.length,r=function(){var t=e.genDefaultThing("slot");e.mapList(e.setsmart(t,"properties",e.getsmart(t,"properties",[]))).then(function(e){s.push(t)}).catch(function(t){console.error(t)})},h=0;h<a;h++)r();this.limitMutable=o}else s.length>=o&&(this.limitMutable=o)}}},noValids:function(t){if(t&&t.length){for(var e=0;e<t.length;e++)if(!t[e])return!0;return!1}return!0},applySchema:function(){var t=this,e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:this.getsmart(this,"schema",void 0),i=arguments.length>1&&void 0!==arguments[1]?arguments[1]:this.getsmart(this,"thingMutable",void 0);return new D.a(function(n,s){e&&i?"string"==typeof e?n(!1):"string"!=typeof i?e.properties?t.mapList(e.properties,"title",void 0,!0).then(function(s){s?(e.properties.forEach(function(e,n){if("string"==typeof t.getsmart(e,"title","")&&t.getsmart(e,"title","").indexOf(" schema")>=0){var s=t.getsmart(e,e.type,!1);if(s){if(s.constructor==Array)if(!0===t.getsmartvalue(e,"properties","merge",!1))for(var o=0;o<s.length;o++)t.pushThing({option:s[o],list:t.gosmartvalue(i,e.title.replace(" schema",""),[])});t.setsmart(i,e.title.replace(" schema",""),t.jsmart.parse(t.jsmart.stringify(s)))}}}),n(!0)):n(!1)}).catch(function(t){t&&console.error(t)}):n(!0):n(!1):n(!(e||!i))})},pushChildThing:function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:this.gosmart(this,"thingMutable.things",[]);this.pushOpt(t,e,!0,"_id"),this.mapThings(),this.mapThings("title",t.properties)},saveThing:function(){this.pushOpt(this.entity._id,this.gosmart(this,"thingMutable.owners",[])),this.savesToMutable&&(this.getsmart(this,"savesToMutable.properties.#"),this.pushOpts(this.savesToMutable,this.gosmart(this,"thingMutable.parents",[]))),this.thingMutable.clientId=this._uid;var t={thing:this.thingMutable,clientId:this._uid,entity:this.entity};this.$socket.emit("saveThing",t)},forkThing:function(){},referenceThing:function(){},deleteThing:function(t,e){if(1==t)if("object"!=A()(this.thingMutable)||this.thingMutable._id){var i={thing:this.thingMutable,clientId:this._uid,entity:this.entity};this.$socket.emit("deleteThing",i),this.setFeedback(null)}else this.$emit("remove"),this.setsmart(this,"thingMutable",void 0),this.setFeedback(null);else this.setFeedback({message:"Are you sure you want to delete this?",type:"delete"})},deleteChildThing:function(t,e){(t||0==t)&&e&&this.getsmart(this,"thingMutable."+e,!1)&&this.gosmart(this,"thingMutable."+e,[]).splice(t,1)},savedChildThing:function(t){this.optsIn(["a lopu inventory generator","a lopu map"],this.getsmart(this.thingMutable,"names",[]))&&this.renderThingsOnMap()},addNewChildThing:function(){var t=this.genDefaultThing(),e=this.gosmart(this,"thingMutable.things",[]);this.limitMutable=this.limitMutable+1,e.push(t),this.updateThingLocation({thing:t,loc:"map"})},addNewProperty:function(){var t={names:["property"],owners:[this.entity._id],parents:[this.thingMutable._id],uuid:this.$uuid.v4()};this.propertiesLimitMutable=this.propertiesLimitMutable+1,this.gosmart(this,"thingMutable.properties",[]).push(t)},addNewValue:function(){if(this.getsmart(this,"thingMutable.type",void 0)){if("String"==this.childType)var t="new string";else t={names:["a lopu value"],owners:[this.entity._id],parents:[this.thingMutable._id],uuid:this.$uuid.v4(),type:this.childType};this.valueLimitMutable=this.valueLimitMutable+1,this.gosmart(this,"thingMutable."+this.getsmart(this,"thingMutable.type",void 0),[]).push(t)}},updateType:function(t){this.type=t},mapInventory:function(t,e,i){if("object"==(void 0===t?"undefined":A()(t))&&t.things){var n=!0,s=!1,o=void 0;try{for(var a,r=L()(t.things);!(n=(a=r.next()).done);n=!0){var h=a.value;t.thing&&(e[h.thing]=h,this.mapInventory(h,e[h.thing],i++))}}catch(t){s=!0,o=t}finally{try{!n&&r.return&&r.return()}finally{if(s)throw o}}}},mapList:function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"title",i=this,n=arguments[2],s=arguments[3];return new D.a(function(o,a){if(e){if(t){t.mapped&&"boolean"!=typeof t.mapped||i.$set(t,"mapped",{}),0==t.length&&(n&&i.getsmart(t,"mapped."+n,!1)||!n?o(!0):n?o(!1):o());for(var r=0;r<t.length;r++)if("string"!=typeof t[r])i.$set(t.mapped,t[r][e],t[r]),r==t.length-1&&(n&&i.getsmart(t,"mapped."+n,!1)||!n?o(!0):n?o(!1):o());else if(s){var h=i.funCounter;i.funCounter=i.funCounter+1,i.getThing({thing:t[r],clientId:i._uid,funCounter:h}),i.$options.sockets.giveThing=function(s){i._uid==s.clientId&&s.funCounter==h&&(i.$set(t,r.toString(),s.thing),i.$set(t.mapped,t[r][e],t[r])),r==t.length-1&&(n&&i.getsmart(t,"mapped."+n,!1)||!n?o(!0):n?o(!1):o())}}else r==t.length-1&&(n&&i.getsmart(t,"mapped."+n,!1)||!n?o(!0):n?o(!1):o())}}else a()})},mapThings:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"title",e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:this.gosmart(this,"thingMutable.things",[]);return this.mapList(e,t)},mapProperties:function(){return this.mapList(this.gosmart(this,"thingMutable.properties",[]),"title")},loadComments:function(){var t=this,e=(arguments.length>0&&void 0!==arguments[0]&&arguments[0],arguments.length>1&&void 0!==arguments[1]?arguments[1]:"all");this.optIn("comments-loaded")||"all"==e&&this.populateThings({rules:{title:{regex:!0,value:"-comments"}},returnPath:"things"}).then(function(){t.compileComments()})},compileComments:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:this.gosmart(this,"thingMutable.things",[]);t.mapped["all-comments"]||(t.push({title:"all-comments",things:[],parents:[this.thingMutable._id],owners:[],properties:[{title:"things render limit",Number:0,names:["a lopu client option"]},{title:"uniques","Array of Strings":["title"],type:"Array of Strings"}],uuid:this.$uuid.v4()}),this.mapList(t)),t.mapped["this lopus comments"]||(t.push({title:"this lopus comments",things:[],parents:[this.thingMutable._id],owners:[],properties:[{title:"things render limit",Number:5,names:["a lopu client option"]},{title:"uniques","Array of Strings":["title"],type:"Array of Strings"}],uuid:this.$uuid.v4()}),this.mapList(t));var e=!0,i=!1,n=void 0;try{for(var s,o=L()(t);!(e=(s=o.next()).done);e=!0){var a=s.value;a.title&&a.title.indexOf("comments")>=0&&"all-comments"!==a.title&&this.pushOpts(a.things,t.mapped["all-comments"].things)}}catch(t){i=!0,n=t}finally{try{!e&&o.return&&o.return()}finally{if(i)throw n}}this.pushOpt("comments-loaded")},populateThings:function(){var t=this,e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},i=e.things,n=void 0===i?this.gosmart(this,"thingMutable.things",[]):i,s=e.returnPath,o=void 0===s?"things":s,a=e.funCounter,r=void 0===a?this.funCounter:a,h=e.rules,l=void 0===h?void 0:h;return this.funCounter++,new D.a(function(e,i){t.$socket.emit("populateThings",{things:n,parentId:t.thingMutable._id||t.thingMutable.uuid||t._uid,returnPath:o,rules:l,funCounter:r,sort:"inception"}),t.$options.sockets.giveThings=function(i){t.isParent(i)&&i.funCounter==r&&t.setThings({options:i.things,list:t.gosmart(t,"thingMutable."+i.returnPath,[]),obj:!0,strings:!0}).then(function(){t.mapList(t.gosmart(t,"thingMutable."+i.returnPath,[])).then(function(){e()})})}})},populate:function(){var t=this,e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},i=e.things,n=void 0===i?this.gosmart(this,"thingMutable.things",[]):i,s=e.returnPath,o=void 0===s?"things":s,a=e.funCounter,r=void 0===a?this.funCounter:a,h=e.rules,l=void 0===h?void 0:h;return this.funCounter++,new D.a(function(e,i){t.$socket.emit("populateThings",{things:n,parentId:t.thingMutable._id||t.thingMutable.uuid||t._uid,returnPath:o,rules:l,funCounter:r,sort:"inception"});t.$options.sockets.giveThings=function(n){t.isParent(n)&&n.funCounter==r?t.setThings({options:n.things,list:t.gosmart(t,"thingMutable."+n.returnPath,[]),obj:!0,strings:!0}).then(function(){e()}).catch(function(){i()}):e()}})},locationInitialized:function(t){var e=this,i=new MapboxGeocoder({accessToken:mapboxgl.accessToken});this.thingMapGeocoder=i,t.addControl(i),this.thingMap=t,t.on("load",function(){t.addSource("things",{type:"geojson",data:e.thingMapFeatures}),e.updateGeoSearchValue(),e.listenForDragEvents(t)})},listenForDragEvents:function(t){var e,i=this;t.on("move",function(){clearTimeout(e),e=setTimeout(function(){i.updateGeoSearchValue()},500)})},updateThingLocation:function(){var t=this,e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},i=e.thing,n=void 0===i?this.thingMutable:i,s=e.loc,o=void 0===s?"user":s,a=e.overwrite,r=void 0===a||a;return new D.a(function(e,i){t.getsmart(n,"geojson",!1)?e(!1):"user"==o?navigator.geolocation&&(r||t.getsmart(n,"geojson",!0))?navigator.geolocation.getCurrentPosition(function(i){t.$set(n,"geojson",t.tryGeojson(i)),e(!0)},function(t){t&&console.error(t),e(!1)}):e(!1):"map"==o&&(r||t.getsmart(n,"geojson",!0))?t.optIn("locationSet")&&t.sameObj(n,t.thingMutable)?(t.popOpt("locationSet"),t.removeMarker(),e(!1)):t.updateGeoSearchValue(n).then(function(i){i?(n.geojson=i,t.pushOpt("locationSet"),t.optsIn(["a lopu inventory generator","a lopu map"],t.gosmart(t.thingMutable,"names",[]))?(t.sameObj(n,t.thingMutable)||t.pushThingFeature(n,"render"),e(!0)):(t.pushThingFeature(n,"render"),e(!0))):e(!1)}).catch(function(t){console.error(t),i(t)}):e(!1)})},thingMapboxCoords:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:this.thingMutable;return[this.findCoord("lng",t),this.findCoord("lat",t)]},thingLCoords:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:this.thingMutable;return[this.findCoord("lat",t),this.findCoord("lng",t)]},findCoord:function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:this.thingMutable;return"lng"==t?this.getsmart(e,"geojson.geometry.coordinates.0",this.getsmart(e,"geojson.coords.longitude",145.1794972)):"lat"==t?this.getsmart(e,"geojson.geometry.coordinates.1",this.getsmart(e,"geojson.coords.latitude",-37.9831522)):void 0},pushThingFeature:function(){var t=this,e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:this.thingMutable,i=arguments.length>1&&void 0!==arguments[1]&&arguments[1],n=this.getsmart(this.thingMapFeatures,"features",void 0);if(n){var s=this.thingToFeature(e);this.setThing({option:s,list:n,obj:!0,key:["properties.thing._id","properties.thing.uuid"],targets:["properties.thing","geometry"],keymatchtype:"broad",push:!0}).then(function(e){t.getsmart(t,"thingMap.getSource",!1)&&t.thingMap.getSource("things")&&t.thingMap.getSource("things").setData(t.thingMapFeatures),i&&t.renderFeatureMarker(e,n)})}},removeMarker:function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:this.gosmart(this,"thingMapFeatures.features",[]),i=arguments.length>2&&void 0!==arguments[2]?arguments[2]:this.thingMutable;if(t){var n=this.getsmart(e[t],"properties.el",void 0);n&&n.parentNode&&n.parentNode.removeChild(n)}else for(var s=0;s<e.length;s++)if(this.sameObj(this.getsmart(e[s],"properties.thing",void 0),i)){var o=e[s].properties.el;o&&o.parentNode&&o.parentNode.removeChild(o)}},renderFeatureMarker:function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:this.gosmart(this,"thingMapFeatures.features",[]);if(e&&e[t]&&this.thingMap){this.removeMarker(t,e);var i=document.createElement("div");i.className="marker";var n=document.createElement("img");i.appendChild(n);var s=this.getsmart(e[t],"properties.thing.description",this.getsmart(e[t],"properties.thing.uuid",void 0));if(s){var o=document.createTextNode(s);i.appendChild(o)}n.src="../static/svg/thingMarker.svg",e[t].properties.el=i,new mapboxgl.Marker(i,{offset:[0,-15]}).setLngLat(e[t].geometry.coordinates).addTo(this.thingMap)}},renderFeatureMarkers:function(){for(var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:this.gosmart(this,"thingMapFeatures.features",[]),e=0;e<t.length;e++)this.renderFeatureMarker(e,t)},thingToFeature:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:this.thingMutable;return{type:"Feature",geometry:{type:"Point",coordinates:this.thingMapboxCoords(t)},properties:{thing:this.thingCleaned(t)}}},updateGeoSearchValue:function(){var t=this;arguments.length>0&&void 0!==arguments[0]?arguments[0]:this.thingMutable;return new D.a(function(e,i){t.getMapCentreAddress().then(function(i){i&&(t.thingMapGeocoder._inputEl.value=i.place_name),e(i)}).catch(function(t){t&&console.error(t)})})},getMapCentreAddress:function(){var t=this;return new D.a(function(e,i){if(t.thingMap){var n="https://api.mapbox.com/geocoding/v5/mapbox.places/"+t.thingMap.getCenter().lng+","+t.thingMap.getCenter().lat+".json?access_token="+mapboxgl.accessToken+"&types=address";t.$http.get(n).then(function(t){e(t.body.features[0])}).catch(function(t){console.error(t),i(t)})}else i()})},tryGeojson:function(t){return this.getsmart(t,"coords",void 0)&&this.getsmart(t,"coords.latitude",void 0)&&this.getsmart(t,"coords.longitude",void 0)?{center:[this.getsmart(t,"coords.longitude",145.179286),this.getsmart(t,"coords.latitude",-37.983109)],geometry:{coordinates:[this.getsmart(t,"coords.longitude",145.179286),this.getsmart(t,"coords.latitude",-37.983109)],type:"Point"}}:t},renderThingsOnMap:function(){var t=this,e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:this.gosmart(this.thingMutable,"things",[]);e&&this.convertListToFeatures(e).then(function(){t.renderFeatureMarkers()})},convertListToFeatures:function(){var t=this,e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:this.gosmart(this.thingMutable,"things",[]);return new D.a(function(i,n){if(e)for(var s=0;s<e.length;s++)t.pushThingFeature(e[s]),s==e.length-1&&i();else n()})}},watch:{"$store.state.entity":function(){this.entity=this.$store.state.entity},"$store.state.realms":function(){this.realms=this.$store.state.realms},"$store.state.thingTypes":function(){this.thingTypes=this.$store.state.thingTypes},"$store.state.thingNames":function(){this.thingNames=this.$store.state.thingNames},"$store.state.priceUnits":function(){this.priceUnits=this.$store.state.priceUnits},"$store.state.currencies":function(){this.currencies=this.$store.state.currencies},thing:function(){this.sameObj(this.thing,this.thingMutable)?this.sameObj(this.thing,this.thingMutable):(this.setsmart(this,"thingMutable",this.thing),this.create())},"thing.properties":function(){console.log("hmm"),this.sameObj(this.thing,this.thingMutable)&&this.getsmart(this.thing,"names",[]).includes("a lopu inventory generator")&&!this.optIn("gotten")&&this.optIn("regen lopu")&&(this.popOpt("regen lopu"),console.log("woo"),this.reinit())},thingMutable:function(){var t=this,e=this;this.thingMutable&&(this.mapThings(),this.resetDefaultThing(),this.mapProperties().then(function(e){t.resetDefaultThing(),t.updateOpts()}),setTimeout(function(){e.optIn("loading",e.getsmart(e,"thingMutable.names",[]))&&e.pushOpt("waiting-hidden",e.getsmart(e,"thingMutable.names",[]))},6e3),this.entity&&this.entity.inventory&&(this.entity.inventory._id==this.thingMutable._id&&void 0!==this.thingMutable._id||this.entity.inventory.uuid==this.thingMutable.uuid&&void 0!==this.thingMutable.uuid)&&this.$store.commit("entityInventorySet",this.thingMutable))},"thingMutable.properties.mapped.options.Array of Strings":function(){this.optIn("show inventory")?(this.popOpt("no-fetch",this.childOptions),this.pushOpt("fetch",this.childOptions),this.optIn("watched-inv")||this.addSlotsToInv(),this.pushOpt("watched-inv")):this.popOpt("watched-inv")},optionsMutable:function(){},parentOptions:function(){this.optIn("no-fetch",this.parentOptionsMutable)||this.optIn("fetched")||!this.optIn("fetch",this.parentOptionsMutable)||(this.popOpt("no-fetch"),this.create())}},props:{thing:{default:function(){return{properties:{title:"my trip to wonderland",names:["a lopu"],description:"It was a hot summers night, awh awh awhoooooo",uuid:this.$uuid.v4()}}}},title:String,source:{},defaultThing:{default:function(){}},neighbours:{default:function(){return[]}},parentId:{},index:{},options:{type:Array,default:function(){return[]}},parentOptions:{type:Array,default:function(){return[]}},theme:{default:"reddit",type:String},fieldsDraft:{default:function(){}},requiredRealms:{default:function(){return[{realm:"all"}]}},limit:{type:Number,default:50},loadLimit:{type:Number,default:5},savesTo:{default:void 0},schema:{}},computed:{thingComputed:{get:function(){return this.thing||{description:"",parents:[this.parentId],names:["new"]}}},fieldsComputed:{get:function(){return this.fieldsDraft||{title:null,description:this.getsmart(this,"thingMutable.description",""),owners:[this.$store.state.entity._id],ownerAlias:this.$store.state.entity.username,realms:null,names:null,url:null,parents:this.getsmart(this,"thingMutable.parents",[])}}},value:{get:function(){var t=void 0;return this.type&&"string"==typeof this.type&&(0==this.type.indexOf("String")?t=this.thingMutable.String:0==this.type.indexOf("Thing")?t=this.thingMutable[this.type]:0==this.type.indexOf("Array")?t=this.thingMutable[this.type]:0==this.type.indexOf("Number")?t=this.thingMutable.Number:0==this.type.indexOf("Boolean")&&(t=this.thingMutable.Boolean)),t},set:function(t){if("string"==typeof t&&"string"==typeof this.type)if(0==this.type.indexOf("String"))this.$set(this.thingMutable,"String",t);else if(0==this.type.indexOf("Thing"))this.$set(this.thingMutable,this.type,t);else if(0==this.type.indexOf("Array"))this.$set(this.thingMutable,this.type,t);else if(0==this.type.indexOf("Number")){var e=parseInt(t);this.$set(this.thingMutable,"Number",e)}else 0==this.type.indexOf("Boolean")&&this.$set(this.thingMutable,"Boolean",t)}},valueString:{get:function(){var t="undefined";this.value;return this.type&&"string"==typeof this.type&&(0==this.type.indexOf("String")?t=this.getsmart(this,"thingMutable.String","undefined"):0==this.type.indexOf("Thing")?t=this.getsmart(this,"thingMutable."+this.type,"undefined").toString():0==this.type.indexOf("Array")?t=this.getsmart(this,"thingMutable."+this.type,"undefined").toString():0==this.type.indexOf("Number")?t=this.getsmart(this,"thingMutable.Number","undefined").toString():0==this.type.indexOf("Boolean")&&(t=this.getsmart(this,"thingMutable.Boolean","undefined").toString())),t}},valueShortRender:{get:function(){var t="undefined";this.value;return this.type&&"string"==typeof this.type&&(0==this.type.indexOf("String")?t=this.trunc(this.thingMutable.String)||"undefined":0==this.type.indexOf("Thing")?t="{"+(this.getsmart(this,"thingMutable."+this.type+".title",!1)||"thing")+"}":0==this.type.indexOf("Array")?t="[ "+this.getsmart(this,"thingMutable."+this.type+".length",0)+" ]":0==this.type.indexOf("Number")?t=this.getsmart(this,"thingMutable.Number","undefined").toString():0==this.type.indexOf("Boolean")&&(t=this.getsmart(this,"thingMutable.Boolean","undefined").toString())),t}},type:{get:function(){return this.thingMutable.type},set:function(t){this.$set(this.thingMutable,"type",t)}},typeString:{get:function(){return this.type}},childType:{get:function(){var t=void 0;return"string"==typeof this.type?this.optIn(0,[this.type.indexOf("Thing"),this.type.indexOf("Array")])&&(this.type.length>"Array".length||this.type.length>"Thing".length)&&(t=(t=this.type.split(" "))[t.length-1].replace(/s$/gi,"")):t=void 0,t}},thingDescriptionInputOptions:{get:function(){return{toolbar:{},placeholder:{text:"Start typing to add a description",hideOnClick:!1},targetBlank:!0}}},thingValueInputOptions:{get:function(){var t={toolbar:{},placeholder:{text:"Start typing to express your self",hideOnClick:!1},targetBlank:!0};return"string"==typeof this.getsmart(this.thingMutable,"type",void 0)&&0==this.getsmart(this.thingMutable,"type","").indexOf("Boolean")?t.placeholder.text="Enter either true or false, 0 or 1, yes or no":"string"==typeof this.getsmart(this.thingMutable,"type",void 0)&&0==this.getsmart(this.thingMutable,"type","").indexOf("Number")?t.placeholder.text='Enter any number you want, "500 million" works, so does "negative 900", as does "four times eight"':"string"==typeof this.getsmart(this.thingMutable,"type",void 0)&&0==this.getsmart(this.thingMutable,"type","").indexOf("String")&&(t.placeholder.text="Start typing to enter the text value"),t}},thingTitleInputOptions:{get:function(){return{toolbar:{},placeholder:{text:"Start typing to add a title",hideOnClick:!1},targetBlank:!0}}},editable:{get:function(){var t=this.getsmart(this,"thingMutable.owners",[]).filter(function(t){});return!(0!=t.length&&!this.optIn(this.getsmart(this,"entity._id",void 0),t))}}},components:{}},ti=function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("div",{staticClass:"thing-container"},[t._v(t._s(t.optIn("a lopu dom node",t.getsmartval(t.thing,"properties.names",[]))?t.domval(t.thing):"")),i("div",{staticClass:"thing-positioner"},[i("div",{staticClass:"thing"},[t._l(t.thing.properties,function(e,n){return t.thing.properties&&!t.optIn("a lopu dom node",t.getsmartval(t.thing,"properties.names",[]))&&t.thing.constructor==Object?["title"==n?[i("div",{staticClass:"title-container"},[i("div",{staticClass:"title-positioner"},[i("div",{staticClass:"title"},[t._v(t._s(e))])])])]:t._e()]:t._e()})],2)])])},ei=[];ti._withStripped=!0;var ii=!1;var ni=function(t){ii||(i("mpFg"),i("6WWz"))},si=Object(p.a)(Xe,ti,ei,!1,ni,"data-v-2dcbfe49",null);si.options.__file="src/components/alopu.vue";var oi=si.exports,ai={mixins:[I()({vue:{reactiveSetter:!0,vm:"this"},objList:"this.thingMutable.things",stringList:"this.thingMutable.properties.mapped.options.Array of Strings"})],data:function(){return{thingMutable:this.thing,entity:this.$store.state.entity,feedback:null,realms:this.$store.state.realms,thingTypes:this.$store.state.thingTypes,types:this.$store.state.types,thingNames:this.$store.state.thingNames,priceUnits:this.$store.state.priceUnits,currencies:this.$store.state.currencies,urls:["http://agora.dev/forum","http://lopu.com.au","http://agora.lopu.com.au"],err:null,alterEgos:[this.$store.state.entity.username?this.$store.state.entity.username:"anonymous","anonymous"],neighboursMutable:this.neighbours,messages:[],funCounter:0,limitMutable:5,loadLimitMutable:5,propertiesLimitMutable:50,propertiesLoadLimitMutable:5,valueLimitMutable:5,valueLoadLimitMutable:5,savesToMutable:this.savesTo,optionsMutable:[],childOptions:[],parentOptionsMutable:this.parentOptions,defaultThingMutable:this.defaultThing,thingMap:void 0,thingMapGeocoder:void 0,thingMapFeatures:{type:"FeatureCollection",features:[]},invGrid:{width:80,invWidth:void 0,padding:"2px 3px"}}},sockets:{connect:function(){},giveThing:function(t){var e=this;if("hmm"==this.thingMutable.uuid&&console.log("got thing %s",Date.now()),this.sameObj(t.thing,this.thingMutable,t))this.thingMutable=t.thing,(t.giveEvent="save")&&this.$emit("saved"),this.mapProperties().then(function(t){e.reinit(),e.popOpt("editing"),e.pushOpt("fetched")}).catch(function(t){console.error(t)}),this.setFeedback(t.feedback);else if(this.isParent(t))if(this.optIn("a lopu inventory generator",this.getsmart(this.thingMutable,"names",[])))"hmm"==this.thingMutable.uuid&&console.log("where we should be"),t.thing.tag="loading",this.setThing({option:t.thing,list:this.gosmart(this,"thingMutable.things",[]),obj:!0,key:["_id","uuid","tag"],keymatchtype:"broad",push:!0,strings:!0}).then(function(e){delete t.thing.tag}).catch(function(t){t&&console.error(t)}),this.optIn("a lopu map",this.getsmart(this.thingMutable,"names",[]))&&this.pushThingFeature(t.thing,"render");else{for(var i=0;i<t.thing.relatives.length;i++)this.optIn(t.thing._id,this.thingMutable[t.thing.relatives[i].path])||this.optIn(t.thing,this.thingMutable[t.thing.relatives[i].path],!0)||this.optIn(t.thing,this.thingMutable[t.thing.relatives[i].path],!0,"uuid")?this.setThing({option:t.thing,list:this.thingMutable[t.thing.relatives[i].path],obj:!0,key:["_id","uuid"],keymatchtype:"broad",strings:!0}):this.optIn(t.thing,this.thingMutable.things,!0),this.thingMutable._id&&this.thingMutable._id.toString()==t.thing.relatives[i].relative&&this.pushOpt(t.thing,this.thingMutable[t.thing.relatives[i].path],!0);this.entity&&this.entity.inventory&&(this.entity.inventory._id==this.thingMutable._id&&void 0!==this.thingMutable._id||this.entity.inventory.uuid==this.thingMutable.uuid&&void 0!==this.thingMutable.uuid)&&this.$store.commit("entityInventorySet",this.thingMutable)}else t.thing.title&&t.thing.title.indexOf("-comments")},giveThings:function(t){this.isParent(t)&&t.returnPath&&(this.setThings({options:t.things,list:this.thingMutable[t.returnPath],obj:!0,strings:!0}),this.mapList(this.thingMutable[t.returnPath]))},confirmThingDeletion:function(t){console.log("wtf"),console.log(this.sameObj(this.getsmart(t,"thing",void 0),this.getsmart(this,"thingMutable",void 0),t)),console.log(t),this.sameObj(this.getsmart(t,"thing",void 0),this.getsmart(this,"thingMutable",void 0),t)&&(this.getsmart(t,"feedback.success",!1)?(this.$emit("remove"),this.setsmart(this,"thingMutable",void 0)):(this.setFeedback(null),this.pushOpt({text:this.getsmart(t,"feedback.message","There was an error deleting this thing from the database"),from:"lopu"},this.messages)))}},created:function(){},mounted:function(){this.isMounted=!0;var t=this;window.onresize=function(){t.addSlotsToInv()},this.create()},methods:{create:function(){this.thingMutable&&"object"===A()(this.thingMutable)?this.reinit():"string"!=typeof this.thingMutable||this.optIn("no-fetch")||(this.getThing({thing:this.thingMutable,parentId:this.parentId,clientId:this._uid,populations:[{path:"properties"}]}),this.thingMutable={_id:this.thingMutable,names:["loading"]});var t=this;setTimeout(function(){t.optIn("loading",t.getsmart(t,"thingMutable.names",[]))},12345),this.setChildOptions()},reinit:function(){var t=this;"hmm"==this.thingMutable.uuid&&console.log("reinitting"),this.parentOptionsMutable=JSON.parse(tt()(this.parentOptions)),this.mapProperties().then(function(e){t.applySchema().then(function(e){t.mapProperties().then(function(e){t.checkPropertiesForOptions(),t.updateOpts(),t.updateThingLocation({loc:"user",overwrite:!1}).then(function(e){if(t.optIn("a lopu inventory generator",t.getsmart(t,"thingMutable.names",[]))&&!t.optIn("gotten")&&!t.getsmart(t,"thingMutable.properties.mapped.dont gen this lopu",!1)){var i=t.generateFind();if(i){for(var n=t.generateFind({piece:"count"}),s=t.generateFind({piece:"options"}),o=(t.getsmart(t,"thingMutable.things.length",0),t.gosmart(t,"thingMutable.things",[])),a=0;a<n;a++){t.pushThing({option:{names:["loading"],uuid:!1,tag:"loading"},list:o})}t.limitMutable=t.limitMutable+n,t.getThings({parentId:t.getsmart(t,"thingMutable._id",t._uid),entity:{_id:t.entity._id},returnPath:"things",find:i,count:n,findOptions:s,stream:!0}),t.pushOpt("gotten"),t.popOpt("regen lopu")}}}).catch(function(t){t&&console.error(t)}),t.optIn("show-comments")&&t.loadComments(),t.optIn("inventory",t.thingMutable.names)&&t.pushOpts(["show inventory","inventory mode"]),t.setChildOptions(),t.resetDefaultThing(),t.addSlotsToInv()}).catch(function(t){t&&console.error(t)})}).catch(function(t){t&&console.error(t)})}).catch(function(t){console.error(t)})},getThing:function(t){this.$socket.emit("getThing",t)},getThings:function(t){console.log("emitting request %s",Date.now()),this.$socket.emit("getThings",t)},addPrice:function(){this.thingMutable.contract?this.thingMutable.contract.push({thing:null,amount:null,multiplier:null,unit:null}):this.$set(this.thingMutable,"contract",[{thing:null,amount:null,multiplier:null,unit:null}])},removePrice:function(t){this.thingMutable.contract.splice(t,1)},updateDescription:function(t){this.setsmart(this,"thingMutable.description",t.api.origElements.innerHTML)},updateTitle:function(t){this.setsmart(this,"thingMutable.title",t.api.origElements.innerHTML)},updateValue:function(t){this.value=t.api.origElements.innerHTML},updateAt:function(t,e,i){console.log(t),console.log(e),console.log(i)},showOptions:function(){this.optIn("icon")||this.optIn("hiding")||this.pushOpt("show options")},showOptionsPerm:function(){this.pushOpts(["show options","focused"]),this.popOpts(["hiding"])},toggleOptions:function(){this.optIn("focused")?this.popOpts(["show options","focused"]):this.optIn("icon")||this.pushOpts(["show options","focused"])},hideOptions:function(){this.popOpts(["show options","focused"]),this.pushOpt("hiding"),setTimeout(this.popOpt("hiding"),4e3)},hideOptionsMaybe:function(){!this.optIn("focused")&&this.optIn("show options")&&this.popOpt("show options")},setFeedback:function(t){this.feedback=t||null},generateFind:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},e=t.piece,i=void 0===e?"for":e,n=t.obj,s=void 0===n?this.thingMutable:n;if("object"==(void 0===s?"undefined":A()(s))){if(!i||"for"==i){var o={};if(this.getsmart(s,"properties.mapped.a special lopu regex to match."+this.getsmart(s,"properties.mapped.a special lopu regex to match.type","String"),!1)){var a=this.getsmart(s,"properties.mapped.a special lopu regex to match."+this.getsmart(s,"properties.mapped.a special lopu regex to match.type","String"),void 0),r=a.split(" ");o.realms={$in:r},o.names={$in:r},o.text={regex:!0,value:a,options:"i"},o.description={regex:!0,value:a,options:"i"},o.title={regex:!0,value:a,options:"i"},o.orAllTheThings=!0}else o.realms=this.getsmart(s,"properties.mapped.ignore realms.Boolean",!1)?void 0:this.getsmart(s,"properties.mapped.realms to match.Array of Strings.length",0)>0?this.getsmart(s,"properties.mapped.broadly match realms.Boolean",!1)?{$in:this.getsmart(s,"properties.mapped.realms to match.Array of Strings",void 0)}:{$all:this.getsmart(s,"properties.mapped.realms to match.Array of Strings",void 0)}:void 0,o.names=this.getsmart(s,"properties.mapped.ignore names.Boolean",!1)?void 0:this.getsmart(s,"properties.mapped.names to match.Array of Strings.length",0)>0?this.getsmart(s,"properties.mapped.broadly match names.Boolean",!1)?{$in:this.getsmart(s,"properties.mapped.names to match.Array of Strings",void 0)}:{$all:this.getsmart(s,"properties.mapped.names to match.Array of Strings",void 0)}:void 0,o.owners=this.getsmart(s,"properties.mapped.ignore owners.Boolean",!1)?void 0:this.getsmart(s,"properties.mapped.owners to match.Array of Strings.length",0)>0?this.getsmart(s,"properties.mapped.broadly match owners.Boolean",!1)?{$in:this.getsmart(s,"properties.mapped.owners to match.Array of Strings",void 0)}:{$all:this.getsmart(s,"properties.mapped.owners to match.Array of Strings",void 0)}:void 0,o.text=this.getsmart(s,"properties.mapped.ignore text.Boolean",!1)?void 0:this.getsmart(s,"properties.mapped.text to match.String",!1)?this.getsmart(s,"properties.mapped.broadly match text.Boolean",!1)?{regex:!0,value:this.getsmart(s,"properties.mapped.text to match.String",void 0),options:"i"}:this.getsmart(s,"properties.mapped.text to match.String",void 0):void 0,o.description=this.getsmart(s,"properties.mapped.ignore description.Boolean",!1)?void 0:this.getsmart(s,"properties.mapped.description to match.String",!1)?this.getsmart(s,"properties.mapped.broadly match description.Boolean",!1)?{regex:!0,value:this.getsmart(s,"properties.mapped.description to match.String",void 0),options:"i"}:this.getsmart(s,"properties.mapped.description to match.String",void 0):void 0,o.title=this.getsmart(s,"properties.mapped.ignore title.Boolean",!1)?void 0:this.getsmart(s,"properties.mapped.title to match.String",!1)?this.getsmart(s,"properties.mapped.broadly match title.Boolean",!1)?{regex:!0,value:this.getsmart(s,"properties.mapped.title to match.String",void 0),options:"i"}:this.getsmart(s,"properties.mapped.title to match.String",void 0):void 0,o["geojson.geometry"]=this.getsmart(s,"properties.mapped.ignore location.Boolean",!1)?void 0:this.getsmart(s,"properties.mapped.geojson to match.geojson",!1)?{$near:{$maxDistance:this.getsmart(s,"properties.mapped.broadly match location.Boolean",!1)?1e4*this.getsmart(s,"properties.mapped.geojson search radius.Number",12):1e4,$geometry:this.getsmart(s,"geojson.geometry",void 0)}}:this.getsmart(s,"properties.mapped.use this things location.Boolean",!1)?{$near:{$maxDistance:this.getsmart(s,"properties.mapped.broadly match location.Boolean",!1)?1e3*this.getsmart(s,"properties.mapped.geojson search radius.Number",12):1e4,$geometry:this.getsmart(s,"geojson.geometry",void 0)}}:void 0;return o}if("count"==i)return this.getsmart(s,"properties.mapped.limit.Number",!1)||this.getsmart(s,"properties.mapped.count.Number",5);if("options"==i){var h={};return h.sort=this.getsmart(s,"properties.mapped.sort."+this.getsmart(s,"properties.mapped.sort.type","json"),void 0),h}}return!1},getProperty:function(t){for(var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"title",i=arguments.length>2&&void 0!==arguments[2]?arguments[2]:this.gosmart(this,"thingMutable.properties",[]),n=0;n>i.length;n++)if(i[n][e]==t)return i[n]},updateRealmsList:function(t,e){this.$set(this.realms,"searched",null),this.realms.push({key:"searched",realm:t})},genDefaultThing:function(){return"slot"==(arguments.length>0&&void 0!==arguments[0]?arguments[0]:void 0)?{realms:["inventory slots"],title:"debug",names:["inventory slot"],properties:[{title:"options","Array of Strings":["inventory slot","icon"],type:"Array of Strings"}],owners:[this.entity._id],parents:[this.thingMutable.uuid],uuid:this.$uuid.v4()}:this.optIn("a lopu inventory generator",this.thingMutable.names)?{realms:["new"].concat(this.getsmart(this.thingMutable,"properties.mapped.realms to match.Array of Strings",[])),names:this.getsmart(this.thingMutable,"properties.mapped.names to match.Array of Strings",[]),description:void 0,properties:[{title:"options","Array of Strings":["editing","edited","is-default-thing",this.optIn("shallow adders")?"less padding":null],type:"Array of Strings"}],owners:[this.entity._id],parents:[this.thingMutable],uuid:this.$uuid.v4()}:{realms:["new"],description:void 0,properties:[{title:"options","Array of Strings":["editing","edited","is-default-thing",this.optIn("shallow adders")?"less padding":null],type:"Array of Strings"}],owners:[this.entity._id],parents:[this.thingMutable],uuid:this.$uuid.v4()}},resetDefaultThing:function(){this.defaultThingMutable=this.genDefaultThing()},setChildOptions:function(){this.childOptions=[this.optIn("feed")?"wide":"icon",this.optIn("addable")?"addable":null,this.optIn("slotted")?"in slot":null,this.optIn("shrink slot icons")?"shrink slot icon":null,this.optIn("feed")?null:"inventory item",this.optIn("icon")?"no-fetch":null,this.optIn("show inventory")?"fetch":null,this.optIn("dont load childrens children")?"dont load children":null,this.optIn("dont load children children children")?"dont load childrens children":null,this.optIn("show-children-comments")?"show-comments":null,this.optIn("shallow adders")?"shallow adders":null],this.childOptions=this.childOptions.filter(function(t){return t||0==t})},removeMessage:function(t){this.messages.splice(t,1)},sameObj:function(t,e,i){return!(!t||!e)&&(e&&(i&&this._uid&&this._uid==i.clientId&&(e._id&&e._id==t._id||e.uuid&&e.uuid==t.uuid)||e._id&&e._id==t._id||e.uuid&&e.uuid==t.uuid))},isParent:function(t){return void 0!==t.parentId&&(this.getsmart(this,"thingMutable.uuid",void 0)==t.parentId||this._uid==t.parentId||this.getsmart(this,"thingMutable._id",void 0)==t.parentId)||t.thing&&this.getsmart(t,"thing.relatives",[])&&this.getsmart(this,"thingMutable._id",!1)&&this.optIn({path:"parents",relative:this.getsmart(this,"thingMutable._id",{toString:function(){}}).toString()},this.getsmart(t,"thing.relatives",[]),!0,["relative","path"])},thingCleaned:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:this.thingMutable;return{_id:t._id,uuid:t.uuid,title:t.title,description:t.description}},valueToAThing:function(t){if(this.getsmart(t,"constructor",void 0)!==Object){var e={type:this.childType,names:["a lopu value"]};return e[this.childType]=t,e}return this.getsmart(t,"constructor",void 0),Object,t},firstOrLast:function(t,e,i){var n=arguments.length>3&&void 0!==arguments[3]?arguments[3]:"thing";return!(0!=t&&!t||!e||!i)&&((0!=t||1!=e&&1!=i.length)&&(0==t?"first-"+n:t<=e&&t==i.length-1||t==e-1?"last-"+n:"mid-"+n))},osxTrunc:function(t){if("string"==typeof t){var e=t.replace(/&nbsp;/g," ");if(e.replace(/^\s+|\s+$/g,"").length>26){var i=e.replace(/&nbsp;/g," ").replace(/\s+$/g,"").substr(-8).replace(/^\s+/g,"");return e.replace(/&nbsp;/g," ").substr(0,19).replace(/\s+$/g,"")+"..."+i}return t}},trunc:function(t){if("string"==typeof t){var e=t.replace(/&nbsp;/g," ");return e.replace(/^\s+|\s+$/g,"").length>26?e.replace(/&nbsp;/g," ").substr(0,26).replace(/\s+$/g,"")+"..":t}},updateOpts:function(){var t=this;return new D.a(function(e,i){t.getsmart(t,"thingMutable.properties.mapped.options",!1)?(t.pushOpts(t.parentOptionsMutable.filter(function(e){return t.getsmart(t,"thingMutable.properties.mapped.options.Array of Strings",[]).indexOf("ignore client option "+e)<0&&(e||0==e)})),t.parentOptionsMutable=[],e(!0)):t.mapList(t.gosmart(t,"thingMutable.properties",[]),"title","options").then(function(i){if(i)e(t.updateOpts());else{var n=t.gosmart(t,"thingMutable.properties",[]);t.pushThing({option:{title:"options","Array of Strings":[],type:"Array of Strings"},list:n,obj:!0,key:"title"}),e(t.updateOpts())}}).catch(function(t){console.error(t),i(t)})})},checkPropertiesForOptions:function(){if(this.gosmart(this,"thingMutable.properties",[]).constructor==Array){var t=!0,e=!1,i=void 0;try{for(var n,s=L()(this.thingMutable.properties);!(t=(n=s.next()).done);t=!0){var o=n.value;"things render limit"==o.title&&(this.limitMutable=o[o.type||"Number"]||5),this.pushOpt(o.title)}}catch(t){e=!0,i=t}finally{try{!t&&s.return&&s.return()}finally{if(e)throw i}}}},addSlotsToInv:function(t){var e=this,i=Math.floor(this.getsmart(this,"$refs.inventory-list-container.offsetWidth",558))-2,n=93;if(this.invGrid.invWidth==i&&i<93);else if(this.optIn("slotted")){if(i%n>n/3)for(;i%n>7;)n--;else for(;i%n>7;)n++;if(this.invGrid.width=n,this.invGrid.invWidth=Math.floor(i/n)*n,this.optIn("generate slots")){var s=this.gosmart(this,"thingMutable.things",[]),o=4*Math.floor(i/n);if(o=o<this.limitMutable?this.limitMutable:o,s.length<o){for(var a=o-s.length,r=function(){var t=e.genDefaultThing("slot");e.mapList(e.setsmart(t,"properties",e.getsmart(t,"properties",[]))).then(function(e){s.push(t)}).catch(function(t){console.error(t)})},h=0;h<a;h++)r();this.limitMutable=o}else s.length>=o&&(this.limitMutable=o)}}},noValids:function(t){if(t&&t.length){for(var e=0;e<t.length;e++)if(!t[e])return!0;return!1}return!0},applySchema:function(){var t=this,e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:this.getsmart(this,"schema",void 0),i=arguments.length>1&&void 0!==arguments[1]?arguments[1]:this.getsmart(this,"thingMutable",void 0);return new D.a(function(n,s){e&&i?"string"==typeof e?n(!1):"string"!=typeof i?e.properties?t.mapList(e.properties,"title",void 0,!0).then(function(s){s?(e.properties.forEach(function(e,n){if("string"==typeof t.getsmart(e,"title","")&&t.getsmart(e,"title","").indexOf(" schema")>=0){var s=t.getsmart(e,e.type,!1);if(s){if(s.constructor==Array)if(!0===t.getsmartvalue(e,"properties","merge",!1))for(var o=0;o<s.length;o++)t.pushThing({option:s[o],list:t.gosmartvalue(i,e.title.replace(" schema",""),[])});t.setsmart(i,e.title.replace(" schema",""),t.jsmart.parse(t.jsmart.stringify(s)))}}}),n(!0)):n(!1)}).catch(function(t){t&&console.error(t)}):n(!0):n(!1):n(!(e||!i))})},pushChildThing:function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:this.gosmart(this,"thingMutable.things",[]);this.pushOpt(t,e,!0,"_id"),this.mapThings(),this.mapThings("title",t.properties)},saveThing:function(){this.pushOpt(this.entity._id,this.gosmart(this,"thingMutable.owners",[])),this.savesToMutable&&(this.getsmart(this,"savesToMutable.properties.#"),this.pushOpts(this.savesToMutable,this.gosmart(this,"thingMutable.parents",[]))),this.thingMutable.clientId=this._uid;var t={thing:this.thingMutable,clientId:this._uid,entity:this.entity};this.$socket.emit("saveThing",t)},forkThing:function(){},referenceThing:function(){},deleteThing:function(t,e){if(1==t)if("object"!=A()(this.thingMutable)||this.thingMutable._id){var i={thing:this.thingMutable,clientId:this._uid,entity:this.entity};this.$socket.emit("deleteThing",i),this.setFeedback(null)}else this.$emit("remove"),this.setsmart(this,"thingMutable",void 0),this.setFeedback(null);else this.setFeedback({message:"Are you sure you want to delete this?",type:"delete"})},deleteChildThing:function(t,e){(t||0==t)&&e&&this.getsmart(this,"thingMutable."+e,!1)&&this.gosmart(this,"thingMutable."+e,[]).splice(t,1)},savedChildThing:function(t){this.optsIn(["a lopu inventory generator","a lopu map"],this.getsmart(this.thingMutable,"names",[]))&&this.renderThingsOnMap()},addNewChildThing:function(){var t=this.genDefaultThing(),e=this.gosmart(this,"thingMutable.things",[]);this.limitMutable=this.limitMutable+1,e.push(t),this.updateThingLocation({thing:t,loc:"map"})},addNewProperty:function(){var t={names:["property"],owners:[this.entity._id],parents:[this.thingMutable._id],uuid:this.$uuid.v4()};this.propertiesLimitMutable=this.propertiesLimitMutable+1,this.gosmart(this,"thingMutable.properties",[]).push(t)},addNewValue:function(){if(this.getsmart(this,"thingMutable.type",void 0)){if("String"==this.childType)var t="new string";else t={names:["a lopu value"],owners:[this.entity._id],parents:[this.thingMutable._id],uuid:this.$uuid.v4(),type:this.childType};this.valueLimitMutable=this.valueLimitMutable+1,this.gosmart(this,"thingMutable."+this.getsmart(this,"thingMutable.type",void 0),[]).push(t)}},updateType:function(t){this.type=t},mapInventory:function(t,e,i){if("object"==(void 0===t?"undefined":A()(t))&&t.things){var n=!0,s=!1,o=void 0;try{for(var a,r=L()(t.things);!(n=(a=r.next()).done);n=!0){var h=a.value;t.thing&&(e[h.thing]=h,this.mapInventory(h,e[h.thing],i++))}}catch(t){s=!0,o=t}finally{try{!n&&r.return&&r.return()}finally{if(s)throw o}}}},mapList:function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"title",i=this,n=arguments[2],s=arguments[3];return new D.a(function(o,a){if(e){if(t){t.mapped&&"boolean"!=typeof t.mapped||i.$set(t,"mapped",{}),0==t.length&&(n&&i.getsmart(t,"mapped."+n,!1)||!n?o(!0):n?o(!1):o());for(var r=0;r<t.length;r++)if("string"!=typeof t[r])i.$set(t.mapped,t[r][e],t[r]),r==t.length-1&&(n&&i.getsmart(t,"mapped."+n,!1)||!n?o(!0):n?o(!1):o());else if(s){var h=i.funCounter;i.funCounter=i.funCounter+1,i.getThing({thing:t[r],clientId:i._uid,funCounter:h}),i.$options.sockets.giveThing=function(s){i._uid==s.clientId&&s.funCounter==h&&(i.$set(t,r.toString(),s.thing),i.$set(t.mapped,t[r][e],t[r])),r==t.length-1&&(n&&i.getsmart(t,"mapped."+n,!1)||!n?o(!0):n?o(!1):o())}}else r==t.length-1&&(n&&i.getsmart(t,"mapped."+n,!1)||!n?o(!0):n?o(!1):o())}}else a()})},mapThings:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"title",e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:this.gosmart(this,"thingMutable.things",[]);return this.mapList(e,t)},mapProperties:function(){return this.mapList(this.gosmart(this,"thingMutable.properties",[]),"title")},loadComments:function(){var t=this,e=(arguments.length>0&&void 0!==arguments[0]&&arguments[0],arguments.length>1&&void 0!==arguments[1]?arguments[1]:"all");this.optIn("comments-loaded")||"all"==e&&this.populateThings({rules:{title:{regex:!0,value:"-comments"}},returnPath:"things"}).then(function(){t.compileComments()})},compileComments:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:this.gosmart(this,"thingMutable.things",[]);t.mapped["all-comments"]||(t.push({title:"all-comments",things:[],parents:[this.thingMutable._id],owners:[],properties:[{title:"things render limit",Number:0,names:["a lopu client option"]},{title:"uniques","Array of Strings":["title"],type:"Array of Strings"}],uuid:this.$uuid.v4()}),this.mapList(t)),t.mapped["this lopus comments"]||(t.push({title:"this lopus comments",things:[],parents:[this.thingMutable._id],owners:[],properties:[{title:"things render limit",Number:5,names:["a lopu client option"]},{title:"uniques","Array of Strings":["title"],type:"Array of Strings"}],uuid:this.$uuid.v4()}),this.mapList(t));var e=!0,i=!1,n=void 0;try{for(var s,o=L()(t);!(e=(s=o.next()).done);e=!0){var a=s.value;a.title&&a.title.indexOf("comments")>=0&&"all-comments"!==a.title&&this.pushOpts(a.things,t.mapped["all-comments"].things)}}catch(t){i=!0,n=t}finally{try{!e&&o.return&&o.return()}finally{if(i)throw n}}this.pushOpt("comments-loaded")},populateThings:function(){var t=this,e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},i=e.things,n=void 0===i?this.gosmart(this,"thingMutable.things",[]):i,s=e.returnPath,o=void 0===s?"things":s,a=e.funCounter,r=void 0===a?this.funCounter:a,h=e.rules,l=void 0===h?void 0:h;return this.funCounter++,new D.a(function(e,i){t.$socket.emit("populateThings",{things:n,parentId:t.thingMutable._id||t.thingMutable.uuid||t._uid,returnPath:o,rules:l,funCounter:r,sort:"inception"}),t.$options.sockets.giveThings=function(i){t.isParent(i)&&i.funCounter==r&&t.setThings({options:i.things,list:t.gosmart(t,"thingMutable."+i.returnPath,[]),obj:!0,strings:!0}).then(function(){t.mapList(t.gosmart(t,"thingMutable."+i.returnPath,[])).then(function(){e()})})}})},populate:function(){var t=this,e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},i=e.things,n=void 0===i?this.gosmart(this,"thingMutable.things",[]):i,s=e.returnPath,o=void 0===s?"things":s,a=e.funCounter,r=void 0===a?this.funCounter:a,h=e.rules,l=void 0===h?void 0:h;return this.funCounter++,new D.a(function(e,i){t.$socket.emit("populateThings",{things:n,parentId:t.thingMutable._id||t.thingMutable.uuid||t._uid,returnPath:o,rules:l,funCounter:r,sort:"inception"});t.$options.sockets.giveThings=function(n){t.isParent(n)&&n.funCounter==r?t.setThings({options:n.things,list:t.gosmart(t,"thingMutable."+n.returnPath,[]),obj:!0,strings:!0}).then(function(){e()}).catch(function(){i()}):e()}})},locationInitialized:function(t){var e=this,i=new MapboxGeocoder({accessToken:mapboxgl.accessToken});this.thingMapGeocoder=i,t.addControl(i),this.thingMap=t,t.on("load",function(){t.addSource("things",{type:"geojson",data:e.thingMapFeatures}),e.updateGeoSearchValue(),e.listenForDragEvents(t)})},listenForDragEvents:function(t){var e,i=this;t.on("move",function(){clearTimeout(e),e=setTimeout(function(){i.updateGeoSearchValue()},500)})},updateThingLocation:function(){var t=this,e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},i=e.thing,n=void 0===i?this.thingMutable:i,s=e.loc,o=void 0===s?"user":s,a=e.overwrite,r=void 0===a||a;return new D.a(function(e,i){t.getsmart(n,"geojson",!1)?e(!1):"user"==o?navigator.geolocation&&(r||t.getsmart(n,"geojson",!0))?navigator.geolocation.getCurrentPosition(function(i){t.$set(n,"geojson",t.tryGeojson(i)),e(!0)},function(t){t&&console.error(t),e(!1)}):e(!1):"map"==o&&(r||t.getsmart(n,"geojson",!0))?t.optIn("locationSet")&&t.sameObj(n,t.thingMutable)?(t.popOpt("locationSet"),t.removeMarker(),e(!1)):t.updateGeoSearchValue(n).then(function(i){i?(n.geojson=i,t.pushOpt("locationSet"),t.optsIn(["a lopu inventory generator","a lopu map"],t.gosmart(t.thingMutable,"names",[]))?(t.sameObj(n,t.thingMutable)||t.pushThingFeature(n,"render"),e(!0)):(t.pushThingFeature(n,"render"),e(!0))):e(!1)}).catch(function(t){console.error(t),i(t)}):e(!1)})},thingMapboxCoords:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:this.thingMutable;return[this.findCoord("lng",t),this.findCoord("lat",t)]},thingLCoords:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:this.thingMutable;return[this.findCoord("lat",t),this.findCoord("lng",t)]},findCoord:function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:this.thingMutable;return"lng"==t?this.getsmart(e,"geojson.geometry.coordinates.0",this.getsmart(e,"geojson.coords.longitude",145.1794972)):"lat"==t?this.getsmart(e,"geojson.geometry.coordinates.1",this.getsmart(e,"geojson.coords.latitude",-37.9831522)):void 0},pushThingFeature:function(){var t=this,e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:this.thingMutable,i=arguments.length>1&&void 0!==arguments[1]&&arguments[1],n=this.getsmart(this.thingMapFeatures,"features",void 0);if(n){var s=this.thingToFeature(e);this.setThing({option:s,list:n,obj:!0,key:["properties.thing._id","properties.thing.uuid"],targets:["properties.thing","geometry"],keymatchtype:"broad",push:!0}).then(function(e){t.getsmart(t,"thingMap.getSource",!1)&&t.thingMap.getSource("things")&&t.thingMap.getSource("things").setData(t.thingMapFeatures),i&&t.renderFeatureMarker(e,n)})}},removeMarker:function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:this.gosmart(this,"thingMapFeatures.features",[]),i=arguments.length>2&&void 0!==arguments[2]?arguments[2]:this.thingMutable;if(t){var n=this.getsmart(e[t],"properties.el",void 0);n&&n.parentNode&&n.parentNode.removeChild(n)}else for(var s=0;s<e.length;s++)if(this.sameObj(this.getsmart(e[s],"properties.thing",void 0),i)){var o=e[s].properties.el;o&&o.parentNode&&o.parentNode.removeChild(o)}},renderFeatureMarker:function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:this.gosmart(this,"thingMapFeatures.features",[]);if(e&&e[t]&&this.thingMap){this.removeMarker(t,e);var i=document.createElement("div");i.className="marker";var n=document.createElement("img");i.appendChild(n);var s=this.getsmart(e[t],"properties.thing.description",this.getsmart(e[t],"properties.thing.uuid",void 0));if(s){var o=document.createTextNode(s);i.appendChild(o)}n.src="../static/svg/thingMarker.svg",e[t].properties.el=i,new mapboxgl.Marker(i,{offset:[0,-15]}).setLngLat(e[t].geometry.coordinates).addTo(this.thingMap)}},renderFeatureMarkers:function(){for(var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:this.gosmart(this,"thingMapFeatures.features",[]),e=0;e<t.length;e++)this.renderFeatureMarker(e,t)},thingToFeature:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:this.thingMutable;return{type:"Feature",geometry:{type:"Point",coordinates:this.thingMapboxCoords(t)},properties:{thing:this.thingCleaned(t)}}},updateGeoSearchValue:function(){var t=this;arguments.length>0&&void 0!==arguments[0]?arguments[0]:this.thingMutable;return new D.a(function(e,i){t.getMapCentreAddress().then(function(i){i&&(t.thingMapGeocoder._inputEl.value=i.place_name),e(i)}).catch(function(t){t&&console.error(t)})})},getMapCentreAddress:function(){var t=this;return new D.a(function(e,i){if(t.thingMap){var n="https://api.mapbox.com/geocoding/v5/mapbox.places/"+t.thingMap.getCenter().lng+","+t.thingMap.getCenter().lat+".json?access_token="+mapboxgl.accessToken+"&types=address";t.$http.get(n).then(function(t){e(t.body.features[0])}).catch(function(t){console.error(t),i(t)})}else i()})},tryGeojson:function(t){return this.getsmart(t,"coords",void 0)&&this.getsmart(t,"coords.latitude",void 0)&&this.getsmart(t,"coords.longitude",void 0)?{center:[this.getsmart(t,"coords.longitude",145.179286),this.getsmart(t,"coords.latitude",-37.983109)],geometry:{coordinates:[this.getsmart(t,"coords.longitude",145.179286),this.getsmart(t,"coords.latitude",-37.983109)],type:"Point"}}:t},renderThingsOnMap:function(){var t=this,e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:this.gosmart(this.thingMutable,"things",[]);e&&this.convertListToFeatures(e).then(function(){t.renderFeatureMarkers()})},convertListToFeatures:function(){var t=this,e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:this.gosmart(this.thingMutable,"things",[]);return new D.a(function(i,n){if(e)for(var s=0;s<e.length;s++)t.pushThingFeature(e[s]),s==e.length-1&&i();else n()})}},watch:{"$store.state.entity":function(){this.entity=this.$store.state.entity},"$store.state.realms":function(){this.realms=this.$store.state.realms},"$store.state.thingTypes":function(){this.thingTypes=this.$store.state.thingTypes},"$store.state.thingNames":function(){this.thingNames=this.$store.state.thingNames},"$store.state.priceUnits":function(){this.priceUnits=this.$store.state.priceUnits},"$store.state.currencies":function(){this.currencies=this.$store.state.currencies},thing:function(){this.sameObj(this.thing,this.thingMutable)?this.sameObj(this.thing,this.thingMutable):(this.setsmart(this,"thingMutable",this.thing),this.create())},"thing.properties":function(){console.log("hmm"),this.sameObj(this.thing,this.thingMutable)&&this.getsmart(this.thing,"names",[]).includes("a lopu inventory generator")&&!this.optIn("gotten")&&this.optIn("regen lopu")&&(this.popOpt("regen lopu"),console.log("woo"),this.reinit())},thingMutable:function(){var t=this,e=this;this.thingMutable&&(this.mapThings(),this.resetDefaultThing(),this.mapProperties().then(function(e){t.resetDefaultThing(),t.updateOpts()}),setTimeout(function(){e.optIn("loading",e.getsmart(e,"thingMutable.names",[]))&&e.pushOpt("waiting-hidden",e.getsmart(e,"thingMutable.names",[]))},6e3),this.entity&&this.entity.inventory&&(this.entity.inventory._id==this.thingMutable._id&&void 0!==this.thingMutable._id||this.entity.inventory.uuid==this.thingMutable.uuid&&void 0!==this.thingMutable.uuid)&&this.$store.commit("entityInventorySet",this.thingMutable))},"thingMutable.properties.mapped.options.Array of Strings":function(){this.optIn("show inventory")?(this.popOpt("no-fetch",this.childOptions),this.pushOpt("fetch",this.childOptions),this.optIn("watched-inv")||this.addSlotsToInv(),this.pushOpt("watched-inv")):this.popOpt("watched-inv")},optionsMutable:function(){},parentOptions:function(){this.optIn("no-fetch",this.parentOptionsMutable)||this.optIn("fetched")||!this.optIn("fetch",this.parentOptionsMutable)||(this.popOpt("no-fetch"),this.create())}},props:{thing:{default:function(){return{properties:{title:"my trip to wonderland",names:["a lopu"],description:"It was a hot summers night, awh awh awhoooooo",uuid:this.$uuid.v4()}}}},title:String,source:{},defaultThing:{default:function(){}},neighbours:{default:function(){return[]}},parentId:{},index:{},options:{type:Array,default:function(){return[]}},parentOptions:{type:Array,default:function(){return[]}},theme:{default:"reddit",type:String},fieldsDraft:{default:function(){}},requiredRealms:{default:function(){return[{realm:"all"}]}},limit:{type:Number,default:50},loadLimit:{type:Number,default:5},savesTo:{default:void 0},schema:{}},computed:{thingComputed:{get:function(){return this.thing||{description:"",parents:[this.parentId],names:["new"]}}},fieldsComputed:{get:function(){return this.fieldsDraft||{title:null,description:this.getsmart(this,"thingMutable.description",""),owners:[this.$store.state.entity._id],ownerAlias:this.$store.state.entity.username,realms:null,names:null,url:null,parents:this.getsmart(this,"thingMutable.parents",[])}}},value:{get:function(){var t=void 0;return this.type&&"string"==typeof this.type&&(0==this.type.indexOf("String")?t=this.thingMutable.String:0==this.type.indexOf("Thing")?t=this.thingMutable[this.type]:0==this.type.indexOf("Array")?t=this.thingMutable[this.type]:0==this.type.indexOf("Number")?t=this.thingMutable.Number:0==this.type.indexOf("Boolean")&&(t=this.thingMutable.Boolean)),t},set:function(t){if("string"==typeof t&&"string"==typeof this.type)if(0==this.type.indexOf("String"))this.$set(this.thingMutable,"String",t);else if(0==this.type.indexOf("Thing"))this.$set(this.thingMutable,this.type,t);else if(0==this.type.indexOf("Array"))this.$set(this.thingMutable,this.type,t);else if(0==this.type.indexOf("Number")){var e=parseInt(t);this.$set(this.thingMutable,"Number",e)}else 0==this.type.indexOf("Boolean")&&this.$set(this.thingMutable,"Boolean",t)}},valueString:{get:function(){var t="undefined";this.value;return this.type&&"string"==typeof this.type&&(0==this.type.indexOf("String")?t=this.getsmart(this,"thingMutable.String","undefined"):0==this.type.indexOf("Thing")?t=this.getsmart(this,"thingMutable."+this.type,"undefined").toString():0==this.type.indexOf("Array")?t=this.getsmart(this,"thingMutable."+this.type,"undefined").toString():0==this.type.indexOf("Number")?t=this.getsmart(this,"thingMutable.Number","undefined").toString():0==this.type.indexOf("Boolean")&&(t=this.getsmart(this,"thingMutable.Boolean","undefined").toString())),t}},valueShortRender:{get:function(){var t="undefined";this.value;return this.type&&"string"==typeof this.type&&(0==this.type.indexOf("String")?t=this.trunc(this.thingMutable.String)||"undefined":0==this.type.indexOf("Thing")?t="{"+(this.getsmart(this,"thingMutable."+this.type+".title",!1)||"thing")+"}":0==this.type.indexOf("Array")?t="[ "+this.getsmart(this,"thingMutable."+this.type+".length",0)+" ]":0==this.type.indexOf("Number")?t=this.getsmart(this,"thingMutable.Number","undefined").toString():0==this.type.indexOf("Boolean")&&(t=this.getsmart(this,"thingMutable.Boolean","undefined").toString())),t}},type:{get:function(){return this.thingMutable.type},set:function(t){this.$set(this.thingMutable,"type",t)}},typeString:{get:function(){return this.type}},childType:{get:function(){var t=void 0;return"string"==typeof this.type?this.optIn(0,[this.type.indexOf("Thing"),this.type.indexOf("Array")])&&(this.type.length>"Array".length||this.type.length>"Thing".length)&&(t=(t=this.type.split(" "))[t.length-1].replace(/s$/gi,"")):t=void 0,t}},thingDescriptionInputOptions:{get:function(){return{toolbar:{},placeholder:{text:"Start typing to add a description",hideOnClick:!1},targetBlank:!0}}},thingValueInputOptions:{get:function(){var t={toolbar:{},placeholder:{text:"Start typing to express your self",hideOnClick:!1},targetBlank:!0};return"string"==typeof this.getsmart(this.thingMutable,"type",void 0)&&0==this.getsmart(this.thingMutable,"type","").indexOf("Boolean")?t.placeholder.text="Enter either true or false, 0 or 1, yes or no":"string"==typeof this.getsmart(this.thingMutable,"type",void 0)&&0==this.getsmart(this.thingMutable,"type","").indexOf("Number")?t.placeholder.text='Enter any number you want, "500 million" works, so does "negative 900", as does "four times eight"':"string"==typeof this.getsmart(this.thingMutable,"type",void 0)&&0==this.getsmart(this.thingMutable,"type","").indexOf("String")&&(t.placeholder.text="Start typing to enter the text value"),t}},thingTitleInputOptions:{get:function(){return{toolbar:{},placeholder:{text:"Start typing to add a title",hideOnClick:!1},targetBlank:!0}}},editable:{get:function(){var t=this.getsmart(this,"thingMutable.owners",[]).filter(function(t){});return!(0!=t.length&&!this.optIn(this.getsmart(this,"entity._id",void 0),t))}}},components:{}},ri=function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("div",{staticClass:"thing"},[t._v(t._s(t.optIn("a lopu dom node",t.getsmartval(t.thing,"properties.names",[]))?t.domval(t.thing):"")),t._l(t.thing.properties,function(e,n){return t.thing.properties&&!t.optIn("a lopu dom node",t.getsmartval(t.thing,"properties.names",[]))&&t.thing.constructor==Object?[i("div",[t._v(t._s(n))]),i("div",[t._v(t._s(e))])]:t._e()})],2)},hi=[];ri._withStripped=!0;var li=!1;var pi=function(t){li||(i("Arq/"),i("+szC"))},ui=Object(p.a)(ai,ri,hi,!1,pi,"data-v-96789462",null);ui.options.__file="src/components/object.vue";var ci=ui.exports,di={mixins:[I()({vue:{reactiveSetter:!0,vm:"this"}})],data:function(){return{valueMutable:this.value}},sockets:{connect:function(){}},created:function(){},mounted:function(){},methods:{},watch:{},props:{value:{}},computed:{},components:{}},gi=function(){var t=this.$createElement;return(this._self._c||t)("div",{staticClass:"value"},[this._v(this._s(this.valueMutable))])},mi=[];gi._withStripped=!0;var vi=!1;var fi=function(t){vi||i("L9cC")},yi=Object(p.a)(di,gi,mi,!1,fi,"data-v-49b03d11",null);yi.options.__file="src/components/value.vue";yi.exports;var bi={mixins:[I()({vue:{reactiveSetter:!0,vm:"this"},objList:"this.thingMutable.things",stringList:"this.thingMutable.properties.mapped.options.Array of Strings"})],data:function(){return{thingMutable:this.thing,entity:this.$store.state.entity,feedback:null,realms:this.$store.state.realms,thingTypes:this.$store.state.thingTypes,types:this.$store.state.types,thingNames:this.$store.state.thingNames,priceUnits:this.$store.state.priceUnits,currencies:this.$store.state.currencies,urls:["http://agora.dev/forum","http://lopu.com.au","http://agora.lopu.com.au"],err:null,alterEgos:[this.$store.state.entity.username?this.$store.state.entity.username:"anonymous","anonymous"],neighboursMutable:this.neighbours,messages:[],funCounter:0,limitMutable:5,loadLimitMutable:5,propertiesLimitMutable:50,propertiesLoadLimitMutable:5,valueLimitMutable:5,valueLoadLimitMutable:5,savesToMutable:this.savesTo,optionsMutable:[],childOptions:[],parentOptionsMutable:this.parentOptions,defaultThingMutable:this.defaultThing,thingMap:void 0,thingMapGeocoder:void 0,thingMapFeatures:{type:"FeatureCollection",features:[]},invGrid:{width:80,invWidth:void 0,padding:"2px 3px"}}},sockets:{connect:function(){},giveThing:function(t){var e=this;if("hmm"==this.thingMutable.uuid&&console.log("got thing %s",Date.now()),this.sameObj(t.thing,this.thingMutable,t))this.thingMutable=t.thing,(t.giveEvent="save")&&this.$emit("saved"),this.mapProperties().then(function(t){e.reinit(),e.popOpt("editing"),e.pushOpt("fetched")}).catch(function(t){console.error(t)}),this.setFeedback(t.feedback);else if(this.isParent(t))if(this.optIn("a lopu inventory generator",this.getsmart(this.thingMutable,"names",[])))"hmm"==this.thingMutable.uuid&&console.log("where we should be"),t.thing.tag="loading",this.setThing({option:t.thing,list:this.gosmart(this,"thingMutable.things",[]),obj:!0,key:["_id","uuid","tag"],keymatchtype:"broad",push:!0,strings:!0}).then(function(e){delete t.thing.tag}).catch(function(t){t&&console.error(t)}),this.optIn("a lopu map",this.getsmart(this.thingMutable,"names",[]))&&this.pushThingFeature(t.thing,"render");else{for(var i=0;i<t.thing.relatives.length;i++)this.optIn(t.thing._id,this.thingMutable[t.thing.relatives[i].path])||this.optIn(t.thing,this.thingMutable[t.thing.relatives[i].path],!0)||this.optIn(t.thing,this.thingMutable[t.thing.relatives[i].path],!0,"uuid")?this.setThing({option:t.thing,list:this.thingMutable[t.thing.relatives[i].path],obj:!0,key:["_id","uuid"],keymatchtype:"broad",strings:!0}):this.optIn(t.thing,this.thingMutable.things,!0),this.thingMutable._id&&this.thingMutable._id.toString()==t.thing.relatives[i].relative&&this.pushOpt(t.thing,this.thingMutable[t.thing.relatives[i].path],!0);this.entity&&this.entity.inventory&&(this.entity.inventory._id==this.thingMutable._id&&void 0!==this.thingMutable._id||this.entity.inventory.uuid==this.thingMutable.uuid&&void 0!==this.thingMutable.uuid)&&this.$store.commit("entityInventorySet",this.thingMutable)}else t.thing.title&&t.thing.title.indexOf("-comments")},giveThings:function(t){this.isParent(t)&&t.returnPath&&(this.setThings({options:t.things,list:this.thingMutable[t.returnPath],obj:!0,strings:!0}),this.mapList(this.thingMutable[t.returnPath]))},confirmThingDeletion:function(t){console.log("wtf"),console.log(this.sameObj(this.getsmart(t,"thing",void 0),this.getsmart(this,"thingMutable",void 0),t)),console.log(t),this.sameObj(this.getsmart(t,"thing",void 0),this.getsmart(this,"thingMutable",void 0),t)&&(this.getsmart(t,"feedback.success",!1)?(this.$emit("remove"),this.setsmart(this,"thingMutable",void 0)):(this.setFeedback(null),this.pushOpt({text:this.getsmart(t,"feedback.message","There was an error deleting this thing from the database"),from:"lopu"},this.messages)))}},created:function(){},mounted:function(){this.isMounted=!0;var t=this;window.onresize=function(){t.addSlotsToInv()},this.create()},methods:{create:function(){this.thingMutable&&"object"===A()(this.thingMutable)?this.reinit():"string"!=typeof this.thingMutable||this.optIn("no-fetch")||(this.getThing({thing:this.thingMutable,parentId:this.parentId,clientId:this._uid,populations:[{path:"properties"}]}),this.thingMutable={_id:this.thingMutable,names:["loading"]});var t=this;setTimeout(function(){t.optIn("loading",t.getsmart(t,"thingMutable.names",[]))},12345),this.setChildOptions()},reinit:function(){var t=this;"hmm"==this.thingMutable.uuid&&console.log("reinitting"),this.parentOptionsMutable=JSON.parse(tt()(this.parentOptions)),this.mapProperties().then(function(e){t.applySchema().then(function(e){t.mapProperties().then(function(e){t.checkPropertiesForOptions(),t.updateOpts(),t.updateThingLocation({loc:"user",overwrite:!1}).then(function(e){if(t.optIn("a lopu inventory generator",t.getsmart(t,"thingMutable.names",[]))&&!t.optIn("gotten")&&!t.getsmart(t,"thingMutable.properties.mapped.dont gen this lopu",!1)){var i=t.generateFind();if(i){for(var n=t.generateFind({piece:"count"}),s=t.generateFind({piece:"options"}),o=(t.getsmart(t,"thingMutable.things.length",0),t.gosmart(t,"thingMutable.things",[])),a=0;a<n;a++){t.pushThing({option:{names:["loading"],uuid:!1,tag:"loading"},list:o})}t.limitMutable=t.limitMutable+n,t.getThings({parentId:t.getsmart(t,"thingMutable._id",t._uid),entity:{_id:t.entity._id},returnPath:"things",find:i,count:n,findOptions:s,stream:!0}),t.pushOpt("gotten"),t.popOpt("regen lopu")}}}).catch(function(t){t&&console.error(t)}),t.optIn("show-comments")&&t.loadComments(),t.optIn("inventory",t.thingMutable.names)&&t.pushOpts(["show inventory","inventory mode"]),t.setChildOptions(),t.resetDefaultThing(),t.addSlotsToInv()}).catch(function(t){t&&console.error(t)})}).catch(function(t){t&&console.error(t)})}).catch(function(t){console.error(t)})},getThing:function(t){this.$socket.emit("getThing",t)},getThings:function(t){console.log("emitting request %s",Date.now()),this.$socket.emit("getThings",t)},addPrice:function(){this.thingMutable.contract?this.thingMutable.contract.push({thing:null,amount:null,multiplier:null,unit:null}):this.$set(this.thingMutable,"contract",[{thing:null,amount:null,multiplier:null,unit:null}])},removePrice:function(t){this.thingMutable.contract.splice(t,1)},updateDescription:function(t){this.setsmart(this,"thingMutable.description",t.api.origElements.innerHTML)},updateTitle:function(t){this.setsmart(this,"thingMutable.title",t.api.origElements.innerHTML)},updateValue:function(t){this.value=t.api.origElements.innerHTML},updateAt:function(t,e,i){console.log(t),console.log(e),console.log(i)},showOptions:function(){this.optIn("icon")||this.optIn("hiding")||this.pushOpt("show options")},showOptionsPerm:function(){this.pushOpts(["show options","focused"]),this.popOpts(["hiding"])},toggleOptions:function(){this.optIn("focused")?this.popOpts(["show options","focused"]):this.optIn("icon")||this.pushOpts(["show options","focused"])},hideOptions:function(){this.popOpts(["show options","focused"]),this.pushOpt("hiding"),setTimeout(this.popOpt("hiding"),4e3)},hideOptionsMaybe:function(){!this.optIn("focused")&&this.optIn("show options")&&this.popOpt("show options")},setFeedback:function(t){this.feedback=t||null},generateFind:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},e=t.piece,i=void 0===e?"for":e,n=t.obj,s=void 0===n?this.thingMutable:n;if("object"==(void 0===s?"undefined":A()(s))){if(!i||"for"==i){var o={};if(this.getsmart(s,"properties.mapped.a special lopu regex to match."+this.getsmart(s,"properties.mapped.a special lopu regex to match.type","String"),!1)){var a=this.getsmart(s,"properties.mapped.a special lopu regex to match."+this.getsmart(s,"properties.mapped.a special lopu regex to match.type","String"),void 0),r=a.split(" ");o.realms={$in:r},o.names={$in:r},o.text={regex:!0,value:a,options:"i"},o.description={regex:!0,value:a,options:"i"},o.title={regex:!0,value:a,options:"i"},o.orAllTheThings=!0}else o.realms=this.getsmart(s,"properties.mapped.ignore realms.Boolean",!1)?void 0:this.getsmart(s,"properties.mapped.realms to match.Array of Strings.length",0)>0?this.getsmart(s,"properties.mapped.broadly match realms.Boolean",!1)?{$in:this.getsmart(s,"properties.mapped.realms to match.Array of Strings",void 0)}:{$all:this.getsmart(s,"properties.mapped.realms to match.Array of Strings",void 0)}:void 0,o.names=this.getsmart(s,"properties.mapped.ignore names.Boolean",!1)?void 0:this.getsmart(s,"properties.mapped.names to match.Array of Strings.length",0)>0?this.getsmart(s,"properties.mapped.broadly match names.Boolean",!1)?{$in:this.getsmart(s,"properties.mapped.names to match.Array of Strings",void 0)}:{$all:this.getsmart(s,"properties.mapped.names to match.Array of Strings",void 0)}:void 0,o.owners=this.getsmart(s,"properties.mapped.ignore owners.Boolean",!1)?void 0:this.getsmart(s,"properties.mapped.owners to match.Array of Strings.length",0)>0?this.getsmart(s,"properties.mapped.broadly match owners.Boolean",!1)?{$in:this.getsmart(s,"properties.mapped.owners to match.Array of Strings",void 0)}:{$all:this.getsmart(s,"properties.mapped.owners to match.Array of Strings",void 0)}:void 0,o.text=this.getsmart(s,"properties.mapped.ignore text.Boolean",!1)?void 0:this.getsmart(s,"properties.mapped.text to match.String",!1)?this.getsmart(s,"properties.mapped.broadly match text.Boolean",!1)?{regex:!0,value:this.getsmart(s,"properties.mapped.text to match.String",void 0),options:"i"}:this.getsmart(s,"properties.mapped.text to match.String",void 0):void 0,o.description=this.getsmart(s,"properties.mapped.ignore description.Boolean",!1)?void 0:this.getsmart(s,"properties.mapped.description to match.String",!1)?this.getsmart(s,"properties.mapped.broadly match description.Boolean",!1)?{regex:!0,value:this.getsmart(s,"properties.mapped.description to match.String",void 0),options:"i"}:this.getsmart(s,"properties.mapped.description to match.String",void 0):void 0,o.title=this.getsmart(s,"properties.mapped.ignore title.Boolean",!1)?void 0:this.getsmart(s,"properties.mapped.title to match.String",!1)?this.getsmart(s,"properties.mapped.broadly match title.Boolean",!1)?{regex:!0,value:this.getsmart(s,"properties.mapped.title to match.String",void 0),options:"i"}:this.getsmart(s,"properties.mapped.title to match.String",void 0):void 0,o["geojson.geometry"]=this.getsmart(s,"properties.mapped.ignore location.Boolean",!1)?void 0:this.getsmart(s,"properties.mapped.geojson to match.geojson",!1)?{$near:{$maxDistance:this.getsmart(s,"properties.mapped.broadly match location.Boolean",!1)?1e4*this.getsmart(s,"properties.mapped.geojson search radius.Number",12):1e4,$geometry:this.getsmart(s,"geojson.geometry",void 0)}}:this.getsmart(s,"properties.mapped.use this things location.Boolean",!1)?{$near:{$maxDistance:this.getsmart(s,"properties.mapped.broadly match location.Boolean",!1)?1e3*this.getsmart(s,"properties.mapped.geojson search radius.Number",12):1e4,$geometry:this.getsmart(s,"geojson.geometry",void 0)}}:void 0;return o}if("count"==i)return this.getsmart(s,"properties.mapped.limit.Number",!1)||this.getsmart(s,"properties.mapped.count.Number",5);if("options"==i){var h={};return h.sort=this.getsmart(s,"properties.mapped.sort."+this.getsmart(s,"properties.mapped.sort.type","json"),void 0),h}}return!1},getProperty:function(t){for(var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"title",i=arguments.length>2&&void 0!==arguments[2]?arguments[2]:this.gosmart(this,"thingMutable.properties",[]),n=0;n>i.length;n++)if(i[n][e]==t)return i[n]},updateRealmsList:function(t,e){this.$set(this.realms,"searched",null),this.realms.push({key:"searched",realm:t})},genDefaultThing:function(){return"slot"==(arguments.length>0&&void 0!==arguments[0]?arguments[0]:void 0)?{realms:["inventory slots"],title:"debug",names:["inventory slot"],properties:[{title:"options","Array of Strings":["inventory slot","icon"],type:"Array of Strings"}],owners:[this.entity._id],parents:[this.thingMutable.uuid],uuid:this.$uuid.v4()}:this.optIn("a lopu inventory generator",this.thingMutable.names)?{realms:["new"].concat(this.getsmart(this.thingMutable,"properties.mapped.realms to match.Array of Strings",[])),names:this.getsmart(this.thingMutable,"properties.mapped.names to match.Array of Strings",[]),description:void 0,properties:[{title:"options","Array of Strings":["editing","edited","is-default-thing",this.optIn("shallow adders")?"less padding":null],type:"Array of Strings"}],owners:[this.entity._id],parents:[this.thingMutable],uuid:this.$uuid.v4()}:{realms:["new"],description:void 0,properties:[{title:"options","Array of Strings":["editing","edited","is-default-thing",this.optIn("shallow adders")?"less padding":null],type:"Array of Strings"}],owners:[this.entity._id],parents:[this.thingMutable],uuid:this.$uuid.v4()}},resetDefaultThing:function(){this.defaultThingMutable=this.genDefaultThing()},setChildOptions:function(){this.childOptions=[this.optIn("feed")?"wide":"icon",this.optIn("addable")?"addable":null,this.optIn("slotted")?"in slot":null,this.optIn("shrink slot icons")?"shrink slot icon":null,this.optIn("feed")?null:"inventory item",this.optIn("icon")?"no-fetch":null,this.optIn("show inventory")?"fetch":null,this.optIn("dont load childrens children")?"dont load children":null,this.optIn("dont load children children children")?"dont load childrens children":null,this.optIn("show-children-comments")?"show-comments":null,this.optIn("shallow adders")?"shallow adders":null],this.childOptions=this.childOptions.filter(function(t){return t||0==t})},removeMessage:function(t){this.messages.splice(t,1)},sameObj:function(t,e,i){return!(!t||!e)&&(e&&(i&&this._uid&&this._uid==i.clientId&&(e._id&&e._id==t._id||e.uuid&&e.uuid==t.uuid)||e._id&&e._id==t._id||e.uuid&&e.uuid==t.uuid))},isParent:function(t){return void 0!==t.parentId&&(this.getsmart(this,"thingMutable.uuid",void 0)==t.parentId||this._uid==t.parentId||this.getsmart(this,"thingMutable._id",void 0)==t.parentId)||t.thing&&this.getsmart(t,"thing.relatives",[])&&this.getsmart(this,"thingMutable._id",!1)&&this.optIn({path:"parents",relative:this.getsmart(this,"thingMutable._id",{toString:function(){}}).toString()},this.getsmart(t,"thing.relatives",[]),!0,["relative","path"])},thingCleaned:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:this.thingMutable;return{_id:t._id,uuid:t.uuid,title:t.title,description:t.description}},valueToAThing:function(t){if(this.getsmart(t,"constructor",void 0)!==Object){var e={type:this.childType,names:["a lopu value"]};return e[this.childType]=t,e}return this.getsmart(t,"constructor",void 0),Object,t},firstOrLast:function(t,e,i){var n=arguments.length>3&&void 0!==arguments[3]?arguments[3]:"thing";return!(0!=t&&!t||!e||!i)&&((0!=t||1!=e&&1!=i.length)&&(0==t?"first-"+n:t<=e&&t==i.length-1||t==e-1?"last-"+n:"mid-"+n))},osxTrunc:function(t){if("string"==typeof t){var e=t.replace(/&nbsp;/g," ");if(e.replace(/^\s+|\s+$/g,"").length>26){var i=e.replace(/&nbsp;/g," ").replace(/\s+$/g,"").substr(-8).replace(/^\s+/g,"");return e.replace(/&nbsp;/g," ").substr(0,19).replace(/\s+$/g,"")+"..."+i}return t}},trunc:function(t){if("string"==typeof t){var e=t.replace(/&nbsp;/g," ");return e.replace(/^\s+|\s+$/g,"").length>26?e.replace(/&nbsp;/g," ").substr(0,26).replace(/\s+$/g,"")+"..":t}},updateOpts:function(){var t=this;return new D.a(function(e,i){t.getsmart(t,"thingMutable.properties.mapped.options",!1)?(t.pushOpts(t.parentOptionsMutable.filter(function(e){return t.getsmart(t,"thingMutable.properties.mapped.options.Array of Strings",[]).indexOf("ignore client option "+e)<0&&(e||0==e)})),t.parentOptionsMutable=[],e(!0)):t.mapList(t.gosmart(t,"thingMutable.properties",[]),"title","options").then(function(i){if(i)e(t.updateOpts());else{var n=t.gosmart(t,"thingMutable.properties",[]);t.pushThing({option:{title:"options","Array of Strings":[],type:"Array of Strings"},list:n,obj:!0,key:"title"}),e(t.updateOpts())}}).catch(function(t){console.error(t),i(t)})})},checkPropertiesForOptions:function(){if(this.gosmart(this,"thingMutable.properties",[]).constructor==Array){var t=!0,e=!1,i=void 0;try{for(var n,s=L()(this.thingMutable.properties);!(t=(n=s.next()).done);t=!0){var o=n.value;"things render limit"==o.title&&(this.limitMutable=o[o.type||"Number"]||5),this.pushOpt(o.title)}}catch(t){e=!0,i=t}finally{try{!t&&s.return&&s.return()}finally{if(e)throw i}}}},addSlotsToInv:function(t){var e=this,i=Math.floor(this.getsmart(this,"$refs.inventory-list-container.offsetWidth",558))-2,n=93;if(this.invGrid.invWidth==i&&i<93);else if(this.optIn("slotted")){if(i%n>n/3)for(;i%n>7;)n--;else for(;i%n>7;)n++;if(this.invGrid.width=n,this.invGrid.invWidth=Math.floor(i/n)*n,this.optIn("generate slots")){var s=this.gosmart(this,"thingMutable.things",[]),o=4*Math.floor(i/n);if(o=o<this.limitMutable?this.limitMutable:o,s.length<o){for(var a=o-s.length,r=function(){var t=e.genDefaultThing("slot");e.mapList(e.setsmart(t,"properties",e.getsmart(t,"properties",[]))).then(function(e){s.push(t)}).catch(function(t){console.error(t)})},h=0;h<a;h++)r();this.limitMutable=o}else s.length>=o&&(this.limitMutable=o)}}},noValids:function(t){if(t&&t.length){for(var e=0;e<t.length;e++)if(!t[e])return!0;return!1}return!0},applySchema:function(){var t=this,e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:this.getsmart(this,"schema",void 0),i=arguments.length>1&&void 0!==arguments[1]?arguments[1]:this.getsmart(this,"thingMutable",void 0);return new D.a(function(n,s){e&&i?"string"==typeof e?n(!1):"string"!=typeof i?e.properties?t.mapList(e.properties,"title",void 0,!0).then(function(s){s?(e.properties.forEach(function(e,n){if("string"==typeof t.getsmart(e,"title","")&&t.getsmart(e,"title","").indexOf(" schema")>=0){var s=t.getsmart(e,e.type,!1);if(s){if(s.constructor==Array)if(!0===t.getsmartvalue(e,"properties","merge",!1))for(var o=0;o<s.length;o++)t.pushThing({option:s[o],list:t.gosmartvalue(i,e.title.replace(" schema",""),[])});t.setsmart(i,e.title.replace(" schema",""),t.jsmart.parse(t.jsmart.stringify(s)))}}}),n(!0)):n(!1)}).catch(function(t){t&&console.error(t)}):n(!0):n(!1):n(!(e||!i))})},pushChildThing:function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:this.gosmart(this,"thingMutable.things",[]);this.pushOpt(t,e,!0,"_id"),this.mapThings(),this.mapThings("title",t.properties)},saveThing:function(){this.pushOpt(this.entity._id,this.gosmart(this,"thingMutable.owners",[])),this.savesToMutable&&(this.getsmart(this,"savesToMutable.properties.#"),this.pushOpts(this.savesToMutable,this.gosmart(this,"thingMutable.parents",[]))),this.thingMutable.clientId=this._uid;var t={thing:this.thingMutable,clientId:this._uid,entity:this.entity};this.$socket.emit("saveThing",t)},forkThing:function(){},referenceThing:function(){},deleteThing:function(t,e){if(1==t)if("object"!=A()(this.thingMutable)||this.thingMutable._id){var i={thing:this.thingMutable,clientId:this._uid,entity:this.entity};this.$socket.emit("deleteThing",i),this.setFeedback(null)}else this.$emit("remove"),this.setsmart(this,"thingMutable",void 0),this.setFeedback(null);else this.setFeedback({message:"Are you sure you want to delete this?",type:"delete"})},deleteChildThing:function(t,e){(t||0==t)&&e&&this.getsmart(this,"thingMutable."+e,!1)&&this.gosmart(this,"thingMutable."+e,[]).splice(t,1)},savedChildThing:function(t){this.optsIn(["a lopu inventory generator","a lopu map"],this.getsmart(this.thingMutable,"names",[]))&&this.renderThingsOnMap()},addNewChildThing:function(){var t=this.genDefaultThing(),e=this.gosmart(this,"thingMutable.things",[]);this.limitMutable=this.limitMutable+1,e.push(t),this.updateThingLocation({thing:t,loc:"map"})},addNewProperty:function(){var t={names:["property"],owners:[this.entity._id],parents:[this.thingMutable._id],uuid:this.$uuid.v4()};this.propertiesLimitMutable=this.propertiesLimitMutable+1,this.gosmart(this,"thingMutable.properties",[]).push(t)},addNewValue:function(){if(this.getsmart(this,"thingMutable.type",void 0)){if("String"==this.childType)var t="new string";else t={names:["a lopu value"],owners:[this.entity._id],parents:[this.thingMutable._id],uuid:this.$uuid.v4(),type:this.childType};this.valueLimitMutable=this.valueLimitMutable+1,this.gosmart(this,"thingMutable."+this.getsmart(this,"thingMutable.type",void 0),[]).push(t)}},updateType:function(t){this.type=t},mapInventory:function(t,e,i){if("object"==(void 0===t?"undefined":A()(t))&&t.things){var n=!0,s=!1,o=void 0;try{for(var a,r=L()(t.things);!(n=(a=r.next()).done);n=!0){var h=a.value;t.thing&&(e[h.thing]=h,this.mapInventory(h,e[h.thing],i++))}}catch(t){s=!0,o=t}finally{try{!n&&r.return&&r.return()}finally{if(s)throw o}}}},mapList:function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"title",i=this,n=arguments[2],s=arguments[3];return new D.a(function(o,a){if(e){if(t){t.mapped&&"boolean"!=typeof t.mapped||i.$set(t,"mapped",{}),0==t.length&&(n&&i.getsmart(t,"mapped."+n,!1)||!n?o(!0):n?o(!1):o());for(var r=0;r<t.length;r++)if("string"!=typeof t[r])i.$set(t.mapped,t[r][e],t[r]),r==t.length-1&&(n&&i.getsmart(t,"mapped."+n,!1)||!n?o(!0):n?o(!1):o());else if(s){var h=i.funCounter;i.funCounter=i.funCounter+1,i.getThing({thing:t[r],clientId:i._uid,funCounter:h}),i.$options.sockets.giveThing=function(s){i._uid==s.clientId&&s.funCounter==h&&(i.$set(t,r.toString(),s.thing),i.$set(t.mapped,t[r][e],t[r])),r==t.length-1&&(n&&i.getsmart(t,"mapped."+n,!1)||!n?o(!0):n?o(!1):o())}}else r==t.length-1&&(n&&i.getsmart(t,"mapped."+n,!1)||!n?o(!0):n?o(!1):o())}}else a()})},mapThings:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"title",e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:this.gosmart(this,"thingMutable.things",[]);return this.mapList(e,t)},mapProperties:function(){return this.mapList(this.gosmart(this,"thingMutable.properties",[]),"title")},loadComments:function(){var t=this,e=(arguments.length>0&&void 0!==arguments[0]&&arguments[0],arguments.length>1&&void 0!==arguments[1]?arguments[1]:"all");this.optIn("comments-loaded")||"all"==e&&this.populateThings({rules:{title:{regex:!0,value:"-comments"}},returnPath:"things"}).then(function(){t.compileComments()})},compileComments:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:this.gosmart(this,"thingMutable.things",[]);t.mapped["all-comments"]||(t.push({title:"all-comments",things:[],parents:[this.thingMutable._id],owners:[],properties:[{title:"things render limit",Number:0,names:["a lopu client option"]},{title:"uniques","Array of Strings":["title"],type:"Array of Strings"}],uuid:this.$uuid.v4()}),this.mapList(t)),t.mapped["this lopus comments"]||(t.push({title:"this lopus comments",things:[],parents:[this.thingMutable._id],owners:[],properties:[{title:"things render limit",Number:5,names:["a lopu client option"]},{title:"uniques","Array of Strings":["title"],type:"Array of Strings"}],uuid:this.$uuid.v4()}),this.mapList(t));var e=!0,i=!1,n=void 0;try{for(var s,o=L()(t);!(e=(s=o.next()).done);e=!0){var a=s.value;a.title&&a.title.indexOf("comments")>=0&&"all-comments"!==a.title&&this.pushOpts(a.things,t.mapped["all-comments"].things)}}catch(t){i=!0,n=t}finally{try{!e&&o.return&&o.return()}finally{if(i)throw n}}this.pushOpt("comments-loaded")},populateThings:function(){var t=this,e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},i=e.things,n=void 0===i?this.gosmart(this,"thingMutable.things",[]):i,s=e.returnPath,o=void 0===s?"things":s,a=e.funCounter,r=void 0===a?this.funCounter:a,h=e.rules,l=void 0===h?void 0:h;return this.funCounter++,new D.a(function(e,i){t.$socket.emit("populateThings",{things:n,parentId:t.thingMutable._id||t.thingMutable.uuid||t._uid,returnPath:o,rules:l,funCounter:r,sort:"inception"}),t.$options.sockets.giveThings=function(i){t.isParent(i)&&i.funCounter==r&&t.setThings({options:i.things,list:t.gosmart(t,"thingMutable."+i.returnPath,[]),obj:!0,strings:!0}).then(function(){t.mapList(t.gosmart(t,"thingMutable."+i.returnPath,[])).then(function(){e()})})}})},populate:function(){var t=this,e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},i=e.things,n=void 0===i?this.gosmart(this,"thingMutable.things",[]):i,s=e.returnPath,o=void 0===s?"things":s,a=e.funCounter,r=void 0===a?this.funCounter:a,h=e.rules,l=void 0===h?void 0:h;return this.funCounter++,new D.a(function(e,i){t.$socket.emit("populateThings",{things:n,parentId:t.thingMutable._id||t.thingMutable.uuid||t._uid,returnPath:o,rules:l,funCounter:r,sort:"inception"});t.$options.sockets.giveThings=function(n){t.isParent(n)&&n.funCounter==r?t.setThings({options:n.things,list:t.gosmart(t,"thingMutable."+n.returnPath,[]),obj:!0,strings:!0}).then(function(){e()}).catch(function(){i()}):e()}})},locationInitialized:function(t){var e=this,i=new MapboxGeocoder({accessToken:mapboxgl.accessToken});this.thingMapGeocoder=i,t.addControl(i),this.thingMap=t,t.on("load",function(){t.addSource("things",{type:"geojson",data:e.thingMapFeatures}),e.updateGeoSearchValue(),e.listenForDragEvents(t)})},listenForDragEvents:function(t){var e,i=this;t.on("move",function(){clearTimeout(e),e=setTimeout(function(){i.updateGeoSearchValue()},500)})},updateThingLocation:function(){var t=this,e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},i=e.thing,n=void 0===i?this.thingMutable:i,s=e.loc,o=void 0===s?"user":s,a=e.overwrite,r=void 0===a||a;return new D.a(function(e,i){t.getsmart(n,"geojson",!1)?e(!1):"user"==o?navigator.geolocation&&(r||t.getsmart(n,"geojson",!0))?navigator.geolocation.getCurrentPosition(function(i){t.$set(n,"geojson",t.tryGeojson(i)),e(!0)},function(t){t&&console.error(t),e(!1)}):e(!1):"map"==o&&(r||t.getsmart(n,"geojson",!0))?t.optIn("locationSet")&&t.sameObj(n,t.thingMutable)?(t.popOpt("locationSet"),t.removeMarker(),e(!1)):t.updateGeoSearchValue(n).then(function(i){i?(n.geojson=i,t.pushOpt("locationSet"),t.optsIn(["a lopu inventory generator","a lopu map"],t.gosmart(t.thingMutable,"names",[]))?(t.sameObj(n,t.thingMutable)||t.pushThingFeature(n,"render"),e(!0)):(t.pushThingFeature(n,"render"),e(!0))):e(!1)}).catch(function(t){console.error(t),i(t)}):e(!1)})},thingMapboxCoords:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:this.thingMutable;return[this.findCoord("lng",t),this.findCoord("lat",t)]},thingLCoords:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:this.thingMutable;return[this.findCoord("lat",t),this.findCoord("lng",t)]},findCoord:function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:this.thingMutable;return"lng"==t?this.getsmart(e,"geojson.geometry.coordinates.0",this.getsmart(e,"geojson.coords.longitude",145.1794972)):"lat"==t?this.getsmart(e,"geojson.geometry.coordinates.1",this.getsmart(e,"geojson.coords.latitude",-37.9831522)):void 0},pushThingFeature:function(){var t=this,e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:this.thingMutable,i=arguments.length>1&&void 0!==arguments[1]&&arguments[1],n=this.getsmart(this.thingMapFeatures,"features",void 0);if(n){var s=this.thingToFeature(e);this.setThing({option:s,list:n,obj:!0,key:["properties.thing._id","properties.thing.uuid"],targets:["properties.thing","geometry"],keymatchtype:"broad",push:!0}).then(function(e){t.getsmart(t,"thingMap.getSource",!1)&&t.thingMap.getSource("things")&&t.thingMap.getSource("things").setData(t.thingMapFeatures),i&&t.renderFeatureMarker(e,n)})}},removeMarker:function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:this.gosmart(this,"thingMapFeatures.features",[]),i=arguments.length>2&&void 0!==arguments[2]?arguments[2]:this.thingMutable;if(t){var n=this.getsmart(e[t],"properties.el",void 0);n&&n.parentNode&&n.parentNode.removeChild(n)}else for(var s=0;s<e.length;s++)if(this.sameObj(this.getsmart(e[s],"properties.thing",void 0),i)){var o=e[s].properties.el;o&&o.parentNode&&o.parentNode.removeChild(o)}},renderFeatureMarker:function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:this.gosmart(this,"thingMapFeatures.features",[]);if(e&&e[t]&&this.thingMap){this.removeMarker(t,e);var i=document.createElement("div");i.className="marker";var n=document.createElement("img");i.appendChild(n);var s=this.getsmart(e[t],"properties.thing.description",this.getsmart(e[t],"properties.thing.uuid",void 0));if(s){var o=document.createTextNode(s);i.appendChild(o)}n.src="../static/svg/thingMarker.svg",e[t].properties.el=i,new mapboxgl.Marker(i,{offset:[0,-15]}).setLngLat(e[t].geometry.coordinates).addTo(this.thingMap)}},renderFeatureMarkers:function(){for(var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:this.gosmart(this,"thingMapFeatures.features",[]),e=0;e<t.length;e++)this.renderFeatureMarker(e,t)},thingToFeature:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:this.thingMutable;return{type:"Feature",geometry:{type:"Point",coordinates:this.thingMapboxCoords(t)},properties:{thing:this.thingCleaned(t)}}},updateGeoSearchValue:function(){var t=this;arguments.length>0&&void 0!==arguments[0]?arguments[0]:this.thingMutable;return new D.a(function(e,i){t.getMapCentreAddress().then(function(i){i&&(t.thingMapGeocoder._inputEl.value=i.place_name),e(i)}).catch(function(t){t&&console.error(t)})})},getMapCentreAddress:function(){var t=this;return new D.a(function(e,i){if(t.thingMap){var n="https://api.mapbox.com/geocoding/v5/mapbox.places/"+t.thingMap.getCenter().lng+","+t.thingMap.getCenter().lat+".json?access_token="+mapboxgl.accessToken+"&types=address";t.$http.get(n).then(function(t){e(t.body.features[0])}).catch(function(t){console.error(t),i(t)})}else i()})},tryGeojson:function(t){return this.getsmart(t,"coords",void 0)&&this.getsmart(t,"coords.latitude",void 0)&&this.getsmart(t,"coords.longitude",void 0)?{center:[this.getsmart(t,"coords.longitude",145.179286),this.getsmart(t,"coords.latitude",-37.983109)],geometry:{coordinates:[this.getsmart(t,"coords.longitude",145.179286),this.getsmart(t,"coords.latitude",-37.983109)],type:"Point"}}:t},renderThingsOnMap:function(){var t=this,e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:this.gosmart(this.thingMutable,"things",[]);e&&this.convertListToFeatures(e).then(function(){t.renderFeatureMarkers()})},convertListToFeatures:function(){var t=this,e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:this.gosmart(this.thingMutable,"things",[]);return new D.a(function(i,n){if(e)for(var s=0;s<e.length;s++)t.pushThingFeature(e[s]),s==e.length-1&&i();else n()})}},watch:{"$store.state.entity":function(){this.entity=this.$store.state.entity},"$store.state.realms":function(){this.realms=this.$store.state.realms},"$store.state.thingTypes":function(){this.thingTypes=this.$store.state.thingTypes},"$store.state.thingNames":function(){this.thingNames=this.$store.state.thingNames},"$store.state.priceUnits":function(){this.priceUnits=this.$store.state.priceUnits},"$store.state.currencies":function(){this.currencies=this.$store.state.currencies},thing:function(){this.sameObj(this.thing,this.thingMutable)?this.sameObj(this.thing,this.thingMutable):(this.setsmart(this,"thingMutable",this.thing),this.create())},"thing.properties":function(){console.log("hmm"),this.sameObj(this.thing,this.thingMutable)&&this.getsmart(this.thing,"names",[]).includes("a lopu inventory generator")&&!this.optIn("gotten")&&this.optIn("regen lopu")&&(this.popOpt("regen lopu"),console.log("woo"),this.reinit())},thingMutable:function(){var t=this,e=this;this.thingMutable&&(this.mapThings(),this.resetDefaultThing(),this.mapProperties().then(function(e){t.resetDefaultThing(),t.updateOpts()}),setTimeout(function(){e.optIn("loading",e.getsmart(e,"thingMutable.names",[]))&&e.pushOpt("waiting-hidden",e.getsmart(e,"thingMutable.names",[]))},6e3),this.entity&&this.entity.inventory&&(this.entity.inventory._id==this.thingMutable._id&&void 0!==this.thingMutable._id||this.entity.inventory.uuid==this.thingMutable.uuid&&void 0!==this.thingMutable.uuid)&&this.$store.commit("entityInventorySet",this.thingMutable))},"thingMutable.properties.mapped.options.Array of Strings":function(){this.optIn("show inventory")?(this.popOpt("no-fetch",this.childOptions),this.pushOpt("fetch",this.childOptions),this.optIn("watched-inv")||this.addSlotsToInv(),this.pushOpt("watched-inv")):this.popOpt("watched-inv")},optionsMutable:function(){},parentOptions:function(){this.optIn("no-fetch",this.parentOptionsMutable)||this.optIn("fetched")||!this.optIn("fetch",this.parentOptionsMutable)||(this.popOpt("no-fetch"),this.create())}},props:{thing:{default:function(){return["a","b",{c:"d"}]}},title:String,source:{},defaultThing:{default:function(){}},neighbours:{default:function(){return[]}},parentId:{},index:{},options:{type:Array,default:function(){return[]}},parentOptions:{type:Array,default:function(){return[]}},theme:{default:"reddit",type:String},fieldsDraft:{default:function(){}},requiredRealms:{default:function(){return[{realm:"all"}]}},limit:{type:Number,default:50},loadLimit:{type:Number,default:5},savesTo:{default:void 0},schema:{}},computed:{thingComputed:{get:function(){return this.thing||{description:"",parents:[this.parentId],names:["new"]}}},fieldsComputed:{get:function(){return this.fieldsDraft||{title:null,description:this.getsmart(this,"thingMutable.description",""),owners:[this.$store.state.entity._id],ownerAlias:this.$store.state.entity.username,realms:null,names:null,url:null,parents:this.getsmart(this,"thingMutable.parents",[])}}},value:{get:function(){var t=void 0;return this.type&&"string"==typeof this.type&&(0==this.type.indexOf("String")?t=this.thingMutable.String:0==this.type.indexOf("Thing")?t=this.thingMutable[this.type]:0==this.type.indexOf("Array")?t=this.thingMutable[this.type]:0==this.type.indexOf("Number")?t=this.thingMutable.Number:0==this.type.indexOf("Boolean")&&(t=this.thingMutable.Boolean)),t},set:function(t){if("string"==typeof t&&"string"==typeof this.type)if(0==this.type.indexOf("String"))this.$set(this.thingMutable,"String",t);else if(0==this.type.indexOf("Thing"))this.$set(this.thingMutable,this.type,t);else if(0==this.type.indexOf("Array"))this.$set(this.thingMutable,this.type,t);else if(0==this.type.indexOf("Number")){var e=parseInt(t);this.$set(this.thingMutable,"Number",e)}else 0==this.type.indexOf("Boolean")&&this.$set(this.thingMutable,"Boolean",t)}},valueString:{get:function(){var t="undefined";this.value;return this.type&&"string"==typeof this.type&&(0==this.type.indexOf("String")?t=this.getsmart(this,"thingMutable.String","undefined"):0==this.type.indexOf("Thing")?t=this.getsmart(this,"thingMutable."+this.type,"undefined").toString():0==this.type.indexOf("Array")?t=this.getsmart(this,"thingMutable."+this.type,"undefined").toString():0==this.type.indexOf("Number")?t=this.getsmart(this,"thingMutable.Number","undefined").toString():0==this.type.indexOf("Boolean")&&(t=this.getsmart(this,"thingMutable.Boolean","undefined").toString())),t}},valueShortRender:{get:function(){var t="undefined";this.value;return this.type&&"string"==typeof this.type&&(0==this.type.indexOf("String")?t=this.trunc(this.thingMutable.String)||"undefined":0==this.type.indexOf("Thing")?t="{"+(this.getsmart(this,"thingMutable."+this.type+".title",!1)||"thing")+"}":0==this.type.indexOf("Array")?t="[ "+this.getsmart(this,"thingMutable."+this.type+".length",0)+" ]":0==this.type.indexOf("Number")?t=this.getsmart(this,"thingMutable.Number","undefined").toString():0==this.type.indexOf("Boolean")&&(t=this.getsmart(this,"thingMutable.Boolean","undefined").toString())),t}},type:{get:function(){return this.thingMutable.type},set:function(t){this.$set(this.thingMutable,"type",t)}},typeString:{get:function(){return this.type}},childType:{get:function(){var t=void 0;return"string"==typeof this.type?this.optIn(0,[this.type.indexOf("Thing"),this.type.indexOf("Array")])&&(this.type.length>"Array".length||this.type.length>"Thing".length)&&(t=(t=this.type.split(" "))[t.length-1].replace(/s$/gi,"")):t=void 0,t}},thingDescriptionInputOptions:{get:function(){return{toolbar:{},placeholder:{text:"Start typing to add a description",hideOnClick:!1},targetBlank:!0}}},thingValueInputOptions:{get:function(){var t={toolbar:{},placeholder:{text:"Start typing to express your self",hideOnClick:!1},targetBlank:!0};return"string"==typeof this.getsmart(this.thingMutable,"type",void 0)&&0==this.getsmart(this.thingMutable,"type","").indexOf("Boolean")?t.placeholder.text="Enter either true or false, 0 or 1, yes or no":"string"==typeof this.getsmart(this.thingMutable,"type",void 0)&&0==this.getsmart(this.thingMutable,"type","").indexOf("Number")?t.placeholder.text='Enter any number you want, "500 million" works, so does "negative 900", as does "four times eight"':"string"==typeof this.getsmart(this.thingMutable,"type",void 0)&&0==this.getsmart(this.thingMutable,"type","").indexOf("String")&&(t.placeholder.text="Start typing to enter the text value"),t}},thingTitleInputOptions:{get:function(){return{toolbar:{},placeholder:{text:"Start typing to add a title",hideOnClick:!1},targetBlank:!0}}},editable:{get:function(){var t=this.getsmart(this,"thingMutable.owners",[]).filter(function(t){});return!(0!=t.length&&!this.optIn(this.getsmart(this,"entity._id",void 0),t))}}},components:{}},Mi=function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("div",{staticClass:"thing"},[t._v(t._s(t.optIn("a lopu dom node",t.getsmartval(t.thing,"properties.names",[]))?t.domval(t.thing):"")),t._l(t.thing,function(t){return[i("value",{attrs:{value:t}})]})],2)},wi=[];Mi._withStripped=!0;var Ci=!1;var Ii=function(t){Ci||(i("EUs4"),i("dFJ4"))},_i=Object(p.a)(bi,Mi,wi,!1,Ii,"data-v-226569f9",null);_i.options.__file="src/components/array.vue";var Ti=_i.exports,Oi={name:"planetExpress-comp",mixins:[I()({vue:{reactiveSetter:!0,vm:"this"}})],data:function(){return{uuid:this._uid,currentMap:{names:["courier map"],properties:[{title:"options",type:"Array of Strings","Array of Strings":["show map","no options","hide description"]}]},pickupAddresses:[],dropoffAddresses:[],mapboxglAccessToken:"pk.eyJ1IjoibG9wdSIsImEiOiJjamFydTVhc3QxNjRtMzNwaHEzNmJ1bW0zIn0.Wm7f-1eyd7K5AT3WN7fRDw",funCounter:1}},sockets:{connect:function(){},giveUniqueName:function(t){}},created:function(){var t=this;this.addAddress("pickupAddresses"),this.addAddress("dropoffAddresses"),navigator.geolocation&&!this.pickupAddress&&navigator.geolocation.getCurrentPosition(function(e){t.getAddressFromCoords(e.coords.longitude,e.coords.latitude).then(function(e){t.setsmart(t,"pickupAddresses.0.address",e)}).catch(function(t){console.error(t)})})},methods:{addAddress:function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{address:void 0,goods:[]};t&&e&&this.pushThing({option:e,list:this.gosmart(this,t,[]),obj:!0,key:"address"})},removeGood:function(t,e,i){this.popThing({option:e,list:this.gosmart(t,"goods",[]),obj:!0,key:"name"})},addGood:function(t,e,i){var n=this,s=arguments.length>3&&void 0!==arguments[3]?arguments[3]:this.funCounter;if(!t){this.funCounter++;var o={name:t,address:e,addressType:i,funCounter:s};this.$socket.emit("getUniqueName",o),this.$options.sockets.giveUniqueName=function(t){if(t.funCounter==s){var i={name:t.name};n.setsmart(i,t.addressType,e.address),n.setThing({option:i,list:n.gosmart(e,"goods",[]),obj:!0,key:"name",push:!0})}}}},tryGeojson:function(t){return this.getsmart(t,"coords",void 0)&&this.getsmart(t,"coords.latitude",void 0)&&this.getsmart(t,"coords.longitude",void 0)?{center:[this.getsmart(t,"coords.longitude",145.179286),this.getsmart(t,"coords.latitude",-37.983109)],geometry:{coordinates:[this.getsmart(t,"coords.longitude",145.179286),this.getsmart(t,"coords.latitude",-37.983109)],type:"Point"}}:t},getAddressFromCoords:function(t,e){var i=this;return new D.a(function(n,s){var o="https://api.mapbox.com/geocoding/v5/mapbox.places/"+t+","+e+".json?access_token="+i.mapboxglAccessToken+"&types=address";i.$http.get(o).then(function(t){n(t.body.features[0].place_name)}).catch(function(t){console.error(t),s(t)})})},autoCompleteAddress:function(t){var e=this;return new D.a(function(i,n){var s="https://api.mapbox.com/geocoding/v5/mapbox.places/"+t+".json?access_token="+e.mapboxglAccessToken+"&types=address";e.$http.get(s).then(function(t){console.log("data"),console.log(t),i(t.body.features)}).catch(function(t){console.error(t),n(t)})})},searchAddress:function(t,e){console.log(t),this.autoCompleteAddress(t).then(function(t){console.log("res"),console.log(t);for(var i=[],n=0;n<t.length;n++)i.push({label:t[n].place_name});e(i)}).catch(function(t){console.error(t)})},selectAddress:function(t,e,i){t&&(e||0==e)&&i&&this.setsmart(this,i+"."+e+".address",t.label)}},props:{siteTitle:{}},components:{thing:rt},watch:{},route:{canActivate:function(){return!0}}},xi=function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("q-page",[i("div",{staticClass:"planetExpress fit"},[i("div",{staticClass:"splash-container"},[i("div",{staticClass:"splash-positioner"},[i("div",{staticClass:"splash"},[i("div",{staticClass:"particles-container"},[i("div",{staticClass:"particles-positioner"},[i("div",{staticClass:"particles"},[i("vue-particles",{staticClass:"vue-particles",attrs:{moveSpeed:2.5,shapeType:"star",color:"#FFF",opacity:.7,particlesNumber:35,particleSize:4}})],1)])]),i("div",{staticClass:"particles-container"},[i("div",{staticClass:"particles-positioner"},[i("div",{staticClass:"particles"},[i("vue-particles",{staticClass:"vue-particles",attrs:{moveSpeed:2,shapeType:"image",image:{src:"/assets/pixel-ship.png"},particlesNumber:3,particleSize:30}})],1)])]),i("div",{staticClass:"search-container"},[i("div",{staticClass:"search-positioner"},[i("div",{staticClass:"search"},[i("div",{staticClass:"addresses-container pickupAddresses-container"},[i("div",{staticClass:"pickupAddresses-positioner"},[i("div",{staticClass:"pickupAddresses"},[t._l(t.pickupAddresses,function(e,n){return i("div",{staticClass:"pickup-address-container"},[i("div",{staticClass:"pickup-address-positioner"},[i("div",{staticClass:"pickup-address"},[i("q-search",{staticClass:"bg-primary bg-white q-if-inverted",attrs:{placeholder:"what's the pickup address?","float-label":"pickup from?"},model:{value:e.address,callback:function(i){t.$set(e,"address",i)},expression:"address.address"}},[i("q-autocomplete",{on:{search:t.searchAddress,selected:function(e){return t.selectAddress(e,n,"pickupAddresses")}}})],1),i("div",{staticClass:"goods-container"},[i("div",{staticClass:"goods-positioner"},[i("div",{staticClass:"goods"},[t._l(t.gosmart(e,"goods",[]),function(n){return i("div",{staticClass:"good"},[i("img",{attrs:{src:"assets/box.png"}}),i("q-chip",{staticClass:"z-top q-chip-good-delete",attrs:{floating:!0,color:"negative",small:"small"},on:{click:function(i){t.removeGood(e,n,"pickupAddress")}}},[i("q-icon",{attrs:{name:"close",size:".9rem"}})],1),i("div",{staticClass:"good-name-container"},[i("div",{staticClass:"good-name-positioner"},[i("div",{staticClass:"good-name"},[t._v(t._s(n.name))])])])],1)}),i("div",{staticClass:"add-good",on:{click:function(i){t.addGood(!1,e,"pickupAddress")}}},[i("q-btn",{staticClass:"shadow-3 text-primary",attrs:{size:"md",color:"white",label:"add box"}},[i("q-chip",{staticClass:"z-top",attrs:{floating:!0,color:"secondary"}},[t._v(t._s(e.goods.length))])],1)],1)],2)])])],1)])])}),i("div",{staticClass:"additional-actions-container"},[i("div",{staticClass:"additional-actions-positioner"},[i("div",{staticClass:"additional-actions"},[i("q-btn",{staticClass:"add-address-btn",attrs:{color:"secondary",size:"sm",push:"push"},on:{click:function(e){t.addAddress("pickupAddresses")}}},[t._v("Add another pickup address")])],1)])])],2)])]),i("div",{staticClass:"map-container"},[i("div",{staticClass:"map-positioner"},[i("div",{staticClass:"map"},[i("thing",{attrs:{thing:t.currentMap}})],1)])]),i("div",{staticClass:"addresses-container dropoffAddresses-container"},[i("div",{staticClass:"dropoffAddresses-positioner"},[i("div",{staticClass:"dropoffAddresses"},[t._l(t.dropoffAddresses,function(e,n){return i("div",{staticClass:"dropoff-address-container"},[i("div",{staticClass:"dropoff-address-positioner"},[i("div",{staticClass:"dropoff-address"},[i("q-search",{staticClass:"bg-primary bg-white q-if-inverted",attrs:{placeholder:"what's the dropoff address?","float-label":"where to?"},model:{value:e.address,callback:function(i){t.$set(e,"address",i)},expression:"address.address"}},[i("q-autocomplete",{on:{search:t.searchAddress,selected:function(e){return t.selectAddress(e,n,"dropoffAddresses")}}})],1),i("div",{staticClass:"goods-container"},[i("div",{staticClass:"goods-positioner"},[i("div",{staticClass:"goods"},[t._l(t.gosmart(e,"goods",[]),function(n){return n.deliveryAddress&&n.deliveryAddress==e.address?i("div",{staticClass:"good"},[i("img",{attrs:{src:"assets/box.png"}}),i("div",{staticClass:"good-name-container"},[i("div",{staticClass:"good-name-positioner"},[i("div",{staticClass:"good-name"},[t._v(t._s(n.name))])])])]):t._e()}),i("div",{staticClass:"add-good",on:{click:function(i){t.addGood(!1,e,"pickupAddress")}}},[i("q-btn",{staticClass:"shadow-3 text-primary",attrs:{size:"md",color:"white",label:"link all"}},[i("q-chip",{staticClass:"z-top",attrs:{floating:!0,color:"secondary"}},[t._v(t._s(e.goods.length))])],1)],1)],2)])])],1)])])}),i("div",{staticClass:"additional-actions-container"},[i("div",{staticClass:"additional-actions-positioner"},[i("div",{staticClass:"additional-actions"},[t.dropoffAddresses.length>0?i("q-btn",{staticClass:"add-address-btn",attrs:{color:"secondary",size:"sm",push:"push"},on:{click:function(e){t.addAddress("dropoffAddresses")}}},[t._v("Add another delivery address")]):t._e()],1)])])],2)])])])])])])])])])])},Si=[];xi._withStripped=!0;var ki=!1;var $i=function(t){ki||i("7faQ")},ji=Object(p.a)(Oi,xi,Si,!1,$i,null,null);ji.options.__file="src/components/planetExpress.vue";var Ai=ji.exports,Ni=function(){var t=this.$createElement;this._self._c;return this._m(0)},Li=[function(){var t=this.$createElement,e=this._self._c||t;return e("div",{staticClass:"test1"},[e("div",{staticClass:"text"},[this._v("woo hoo")])])}];Ni._withStripped=!0;var Pi=!1;var Di=function(t){Pi||i("bhaj")},Fi=Object(p.a)({name:"test1-comp",data:function(){return{uuid:this._uid}},sockets:{connect:function(){}},created:function(){},methods:{},props:{siteTitle:{}},components:{},watch:{},route:{canActivate:function(){return!0}}},Ni,Li,!1,Di,"data-v-2e66127f",null);Fi.options.__file="src/components/test1.vue";Fi.exports;var Bi=[{path:"/(|home)",name:"home",component:gt},{path:"/realms",name:"realms",component:St},{path:"/realms/:realm",name:"realm",component:wt,props:!0},{path:"/planetexpress",name:"planetExpress",component:Ai,props:!0},{path:"/forum",name:"forum",component:rt,props:{thing:{names:["a lopu inventory generator"],properties:[{title:"server-save",boolean:!1},{title:"realms to match",list:["testing"]},{title:"limit",Number:5},{title:"broadly match realms",boolean:!0},{title:"broadly match description",boolean:!0},{title:"options",list:["no options","addable","no context","put-first","feed","show-children-comments","put new things first","addable with template","dont load childrens children","wide-adder"]}]}}},{path:"/market",name:"market",component:rt,props:{thing:{realms:["commerce","market"],properties:[{title:"count",Number:25},{title:"broadly match realms",boolean:!0},{title:"options",list:["addable","no context","feed","put-first","put new things first","default-new-thing"]}]}}},{path:"/register",name:"register",component:Pt},{path:"/logout",name:"logout",component:ee},{path:"/self",name:"self",component:qt},{path:"/trade",name:"trade",component:Yt},{path:"/ico",name:"ico",component:re},{path:"/ico/things",name:"icoThings",component:de},{path:"/ico/things/styles",name:"icoThingsStyles",component:be},{path:"/ico/things/styles/inventories",name:"inventoryStyles",component:Te},{path:"/ico/things/options",name:"icoThingsOptions",component:je},{path:"/ico/things/sandbox",name:"icoSandboxThing",component:Ee},{path:"/ico/things/manifest",name:"icoManifestThing",component:We},{path:"/ico/status",name:"status",component:Ke},{path:"/ico/object",name:"icoobject",component:ci},{path:"/object",name:"object",component:ci},{path:"/ico/array",name:"icoarray",component:Ti},{path:"/array",name:"array",component:Ti},{path:"/ico/alopu",name:"icoalopu",component:oi},{path:"/alopu",name:"alopu",component:oi},{path:"*",component:function(){return i.e(0).then(i.bind(null,"c5Mg"))}}];o.a.use(U.a);var Ei=new U.a({mode:"history",base:"/",scrollBehavior:function(){return{y:0}},routes:Bi}),zi=i("424j"),Gi=i("iFDT"),qi=i.n(Gi);o.a.use(Ae.a);var Hi=new Ae.a.Store({state:{isAuthenticated:!1,entity:{type:"temporary",identity:"anonymous",auth:!1,username:void 0},authLogs:[],entityMessage:"welcome, <a href='/self'>"+(this.user?this.user.username:"anonymous")+"</a>",realms:["all","public","free","philosophy"],pageHistory:[],thingTypes:["object","service","inventory","question","answer","moment"],types:["Array","String","Number","Boolean","Thing","Array of Arrays","Array of Booleans","Array of Numbers","Array of Things","Array of Strings","Thing of Arrays","Thing of Booleans","Thing of Numbers","Thing of Things","Thing of Strings"],thingNames:["fork","flashlight","book","food","vegan lesagne","sour strap","wallet","blanket","mattress"],priceUnits:["purchase","unit","use","click","second","minute","hour","day","cm","metre","km","mg","g","kg","tonne"],currencies:["AUD","USD","EUR","REN","YEN","RUP"],sideBarOptions:["closed"],ico:{sandboxThing:{title:"A lopu sandbox thing",description:"change as much as you want, the change's will still be here when you return",names:["a lopu ico sandbox thing","thing"]},sandboxThingSchema:{title:"A lopu sandbox thing",description:"change as much as you want, the change's will still be here when you return",names:["a lopu ico sandbox thing","thing"]}},test:{woo:Boolean,woo1:Array,woo2:[Array],woo3:{Array:Array},woo4:{hmm:Boolean,hmm1:Array,hmm2:[Object],hmm3:{Array:Array}}}},getters:{isAuthenticated:function(){},entityGetter:function(t){return t.entity},getUsername:function(t){return t.entity.username}},setters:{},mutations:{isAuthenticated:function(t,e){t.isAuthenticated=e.isAuthenticated},entitySet:function(t,e){t.entity=e},navSet:function(t,e){t.nav=e},sandboxThingSet:function(t,e){t.ico.sandboxThing=e},entityInventorySet:function(t,e){t.entity.inventory=e},newAuthLog:function(t,e){t.authLogs.push(e)},entityMessageUpdate:function(t,e){t.userMessage=e},SetRealms:function(t,e){t.realms=e},SetThingTypes:function(t,e){t.thingTypes=e},addPage:function(t,e){"string"==typeof e&&t.pageHistory.push(e)},resetSandboxThing:function(t,e){if(e){var i=qi.a.parse(qi.a.stringify(t.ico.sandboxThingSchema));t.ico.sandboxThing=i}}},actions:{login:function(t,e){}},plugins:[Object(zi.a)()]}),Vi=i("TXmL"),Ui={en:{failed:"Action failed",success:"Action was successful"}},Wi=i("mtWM"),Ri=i.n(Wi),Qi=i("iFDT");window.mapboxgl=i("1e2d");var Yi=i("dqTT"),Ji=i.n(Yi),Zi=(i("D/PP"),i("D4uH")),Ki=i("kwPQ"),Xi=i.n(Ki),tn=i("DmT9"),en=i.n(tn),nn=i("hMcO"),sn=i.n(nn),on=en()("https://alopuserver.src"),an=i("T1ft"),rn=i.n(an),hn=i("8+8L"),ln=i("66dk"),pn=i.n(ln),un=i("fzx2");i("tPmd"),i("NSaL");var cn=i("mM94");o.a.config.productionTip=!1;var dn=s()({el:"#app",router:Ei,store:Hi},V),gn=[];gn.push(function(t){var e=t.app;t.Vue.use(Vi.a),e.i18n=new Vi.a({locale:"en",fallbackLocale:"en",messages:Ui})}),gn.push(function(t){t.Vue.prototype.$axios=Ri.a}),gn.push(function(t){t.app,t.router;t.Vue.mixin({data:function(){return{jsmart:Qi}}})}),gn.push(function(t){t.app,t.router,t.Vue}),gn.push(function(t){t.app,t.router;t.Vue.component("mapbox",Ji.a)}),gn.push(function(t){t.app,t.router;t.Vue.component("icon",Zi.a)}),gn.push(function(t){t.app,t.router;t.Vue.component("VueImgInputer",Xi.a)}),gn.push(function(t){t.app,t.router;t.Vue.use(sn.a,on)}),gn.push(function(t){t.app,t.router;t.Vue.component("v-select",rn.a)}),gn.push(function(t){t.app,t.router;t.Vue.use(hn.a)}),gn.push(function(t){t.app,t.router;t.Vue.component("medium-editor",pn.a)}),gn.push(function(t){t.app,t.router;t.Vue.use(un.a)}),gn.push(function(t){t.app,t.router;var e=t.Vue,i=new e;e.mixin({data:function(){return{eventHub:i}}})}),gn.push(function(t){t.app,t.router,t.Vue}),gn.push(function(t){t.app,t.router;t.Vue.use(cn.a)}),gn.forEach(function(t){return t({app:dn,router:Ei,store:Hi,Vue:o.a})}),new o.a(dn)},rp0M:function(t,e){},tPmd:function(t,e){},tQ2K:function(t,e){},wttD:function(t,e){}},[0]);